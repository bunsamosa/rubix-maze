(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1452:function(t,e,r){var n=r(1577);t.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},1454:function(t,e){t.exports=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports.default=t.exports},1455:function(t,e){function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},1456:function(t,e){t.exports=function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},1457:function(t,e,r){var n=r(1583);t.exports=function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},1458:function(t,e,r){var n=r(1459).default,i=r(1584);t.exports=function _possibleConstructorReturn(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return i(t)},t.exports.__esModule=!0,t.exports.default=t.exports},1459:function(t,e){function _typeof(e){return t.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,_typeof(e)}t.exports=_typeof,t.exports.__esModule=!0,t.exports.default=t.exports},1460:function(t,e){function _getPrototypeOf(e){return t.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,_getPrototypeOf(e)}t.exports=_getPrototypeOf,t.exports.__esModule=!0,t.exports.default=t.exports},1466:function(t,e,r){"use strict";r.r(e),function(t){r.d(e,"PhantomInjectedProvider",(function(){return PhantomInjectedProvider})),r.d(e,"SlopeInjectedProxyProvider",(function(){return SlopeInjectedProxyProvider})),r.d(e,"SolanaPrivateKeyProvider",(function(){return SolanaPrivateKeyProvider})),r.d(e,"SolanaWallet",(function(){return SolanaWallet})),r.d(e,"SolflareInjectedProvider",(function(){return SolflareInjectedProvider})),r.d(e,"SolletInjectedProvider",(function(){return SolletInjectedProvider})),r.d(e,"TorusInjectedProvider",(function(){return TorusInjectedProvider}));var n=r(8),i=r.n(n),o=r(1432),s=r(70),a=r(7),u=r(1467),c=r(1452),h=r.n(c),l=r(232),d=r(1490),p=r(1497),m=r.n(p);function createChainIdMiddleware(t){return(e,r,n,i)=>"solana_chainId"===e.method?(r.result=t,i()):n()}function createProviderConfigMiddleware(t){return(e,r,n,i)=>"solana_provider_config"===e.method?(r.result=t,i()):n()}function createConfigMiddleware(t){const{chainId:e}=t;return Object(s.k)([createChainIdMiddleware(e),createProviderConfigMiddleware(t)])}function createGetAccountsMiddleware(t){let{getAccounts:e}=t;return Object(s.f)(async(t,r,n)=>{const{method:i}=t;if("getAccounts"!==i)return n();if(!e)throw new Error("WalletMiddleware - opts.getAccounts not provided");const o=await e(t);r.result=o})}function createRequestAccountsMiddleware(t){let{requestAccounts:e}=t;return Object(s.f)(async(t,r,n)=>{const{method:i}=t;if("requestAccounts"!==i)return n();if(!e)throw new Error("WalletMiddleware - opts.requestAccounts not provided");const o=await e(t);r.result=o})}function createGenericJRPCMiddleware(t,e){return Object(s.f)(async(r,n,i)=>{const{method:o}=r;if(o!==t)return i();if(!e)throw new Error("WalletMiddleware - ".concat(t," not provided"));const s=await e(r);n.result=s})}function createSolanaMiddleware(t){const{getAccounts:e,requestAccounts:r,signTransaction:n,signAndSendTransaction:i,signAllTransactions:o,signMessage:a,getPrivateKey:u,getSecretKey:c}=t;return Object(s.k)([createRequestAccountsMiddleware({requestAccounts:r}),createGetAccountsMiddleware({getAccounts:e}),createGenericJRPCMiddleware("signTransaction",n),createGenericJRPCMiddleware("signAndSendTransaction",i),createGenericJRPCMiddleware("signAllTransactions",o),createGenericJRPCMiddleware("signMessage",a),createGenericJRPCMiddleware("solanaPrivateKey",u),createGenericJRPCMiddleware("solanaSecretKey",c)])}function ownKeys$3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread$3(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$3(Object(r),!0).forEach((function(e){i()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$3(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}class BaseInjectedProvider extends u.a{constructor(t){let{config:e,state:r}=t;super({config:{chainConfig:_objectSpread$3(_objectSpread$3({},e.chainConfig),{},{chainNamespace:a.g.SOLANA})},state:r})}async switchChain(t){return Promise.resolve()}async setupProvider(t){const e=new s.b,r=createSolanaMiddleware(this.getProviderHandlers(t));e.push(r);const n=createConfigMiddleware(this.config.chainConfig);e.push(n);const i=this.getInjectedProviderProxy(t);i&&e.push(i);const a=Object(o.i)(e);this.updateProviderEngineProxy(a),await this.lookupNetwork()}async lookupNetwork(){const{chainConfig:t}=this.config;return this.update({chainId:t.chainId}),t.chainId||""}getInjectedProviderProxy(t){}}const getBaseProviderHandlers=t=>({requestAccounts:async()=>t.publicKey?[h.a.encode(t.publicKey.toBytes())]:[],getAccounts:async()=>t.publicKey?[h.a.encode(t.publicKey.toBytes())]:[],getPrivateKey:async()=>{throw l.ethErrors.rpc.methodNotSupported()},getSecretKey:async()=>{throw l.ethErrors.rpc.methodNotSupported()},signTransaction:async e=>await t.signTransaction(e.params.message),signMessage:async e=>await t.signMessage(e.params.message),signAllTransactions:async e=>{var r,n;if(null===(r=e.params)||void 0===r||!r.message||null===(n=e.params)||void 0===n||!n.message.length)throw l.ethErrors.rpc.invalidParams("message");return await t.signAllTransactions(e.params.message)},signAndSendTransaction:async e=>({signature:(await t.signAndSendTransaction(e.params.message)).signature})});function ownKeys$2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function createInjectedProviderProxyMiddleware(t){return Object(s.f)(async(e,r,n)=>{const o=await t.request(function _objectSpread$2(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$2(Object(r),!0).forEach((function(e){i()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$2(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e));r.result=o})}class PhantomInjectedProvider extends BaseInjectedProvider{getProviderHandlers(t){return getBaseProviderHandlers(t)}getInjectedProviderProxy(t){return createInjectedProviderProxyMiddleware(t)}}class SlopeInjectedProxyProvider extends BaseInjectedProvider{getProviderHandlers(t){return((t,e)=>({requestAccounts:async()=>{const{data:e}=await t.connect();return[e.publicKey]},getAccounts:async()=>{const{data:e}=await t.connect();return[e.publicKey]},getPrivateKey:async()=>{throw l.ethErrors.rpc.methodNotSupported()},getSecretKey:async()=>{throw l.ethErrors.rpc.methodNotSupported()},signTransaction:async e=>{const r=e.params.message;if(!r)throw l.ethErrors.rpc.invalidRequest({message:"Invalid transaction message"});const{data:n}=await t.signTransaction(h.a.encode(r.serializeMessage()));if(!n.publicKey||!n.signature)throw new Error("Invalid signature from slope wallet");const i=new d.c(n.publicKey),o=h.a.decode(n.signature);return r.addSignature(i,o),r},signMessage:async e=>{const r=await t.signMessage(e.params.message);return h.a.decode(r.data.signature)},signAndSendTransaction:async r=>{const n=e();if(!n)throw l.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const i=r.params.message;if(!i)throw l.ethErrors.rpc.invalidRequest({message:"Invalid transaction message"});const{data:o}=await t.signTransaction(h.a.encode(i.serializeMessage()));if(!o.publicKey||!o.signature)throw new Error("Invalid signature from slope wallet");const s=new d.c(o.publicKey),a=h.a.decode(o.signature);i.addSignature(s,a);const u=await n.request({method:"solana_provider_config",params:[]}),c=new d.a(u.rpcTarget);return{signature:await c.sendRawTransaction(i.serialize())}},signAllTransactions:async e=>{var r,n,i;if(null===(r=e.params)||void 0===r||!r.message||null===(n=e.params)||void 0===n||!n.message.length)throw l.ethErrors.rpc.invalidParams("message");const o=e.params.message,{length:s}=o,a=[];for(let t=0;t<s;t++)a.push(h.a.encode(e.params.message[t].serializeMessage()));const{msg:u,data:c}=await t.signAllTransactions(a);if(!c.publicKey||(null===(i=c.signatures)||void 0===i?void 0:i.length)!==s)throw new Error(u);const p=new d.c(c.publicKey);for(let t=0;t<s;t++){const e=h.a.decode(c.signatures[t]);o[t].addSignature(p,e)}return o}}))(t,this.getProviderEngineProxy.bind(this))}}class SolflareInjectedProvider extends BaseInjectedProvider{getProviderHandlers(t){return((t,e)=>{const r=getBaseProviderHandlers(t);return r.signAndSendTransaction=async r=>{const n=e();if(!n)throw l.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const i=await t.signTransaction(r.params.message),o=await n.request({method:"solana_provider_config",params:[]}),s=new d.a(o.rpcTarget);return{signature:await s.sendRawTransaction(i.serialize())}},r})(t,this.getProviderEngineProxy.bind(this))}}class SolletInjectedProvider extends BaseInjectedProvider{getProviderHandlers(t){return((t,e)=>{const r=getBaseProviderHandlers(t);return r.signMessage=async e=>{const{signature:r}=await t.sign(e.params.message,"utf8");return r},r.signAndSendTransaction=async r=>{const n=e();if(!n)throw l.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const i=await t.signTransaction(r.params.message),o=await n.request({method:"solana_provider_config",params:[]}),s=new d.a(o.rpcTarget);return{signature:await s.sendRawTransaction(i.serialize())}},r})(t,this.getProviderEngineProxy.bind(this))}}function ownKeys$1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread$1(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$1(Object(r),!0).forEach((function(e){i()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}class TorusInjectedProvider extends u.a{constructor(t){let{config:e,state:r}=t;super({config:{chainConfig:_objectSpread$1(_objectSpread$1({},e.chainConfig),{},{chainNamespace:a.g.SOLANA})},state:r})}async switchChain(t){return Promise.resolve()}async setupProvider(t){this.handleInjectedProviderUpdate(t),await this.setupEngine(t)}async lookupNetwork(){if(!this.provider)throw l.ethErrors.provider.custom({message:"Torus solana provider is not initialized",code:4902});const{chainId:t}=this.config.chainConfig,e=await this.provider.request({method:"solana_chainId"}),r=Object(a.o)(e.toString())?e:"0x".concat(parseInt(e,10).toString(16));if(t!==r)throw a.k.rpcConnectionError("Invalid network, net_version is: ".concat(r,", expected: ").concat(t));return this.update({chainId:r}),this.provider.emit("connect",{chainId:this.state.chainId}),this.provider.emit("chainChanged",this.state.chainId),this.state.chainId}async setupEngine(t){const e=createSolanaMiddleware((t=>({requestAccounts:async()=>await t.request({method:"solana_requestAccounts",params:{}}),getAccounts:async()=>await t.request({method:"solana_accounts",params:{}}),getPrivateKey:async()=>{throw l.ethErrors.rpc.methodNotSupported()},getSecretKey:async()=>{throw l.ethErrors.rpc.methodNotSupported()},signMessage:async e=>{var r;if(null===(r=e.params)||void 0===r||!r.message)throw l.ethErrors.rpc.invalidParams("message");return await t.signMessage(e.params.message)},signTransaction:async e=>{var r;if(null===(r=e.params)||void 0===r||!r.message)throw l.ethErrors.rpc.invalidParams("message");const n=e.params.message;return await t.signTransaction(n)},signAndSendTransaction:async e=>{var r;if(null===(r=e.params)||void 0===r||!r.message)throw l.ethErrors.rpc.invalidParams("message");const n=e.params.message;return{signature:await t.sendTransaction(n)}},signAllTransactions:async e=>{var r,n;if(null===(r=e.params)||void 0===r||!r.message||null===(n=e.params)||void 0===n||!n.message.length)throw l.ethErrors.rpc.invalidParams("message");const i=e.params.message;return await t.signAllTransactions(i)}}))(t)),r=createInjectedProviderProxyMiddleware(t),n=new s.b;n.push(e),n.push(r);const i=Object(o.i)(n);this.updateProviderEngineProxy(i),await this.lookupNetwork()}async handleInjectedProviderUpdate(t){t.on("accountsChanged",async t=>{this.provider.emit("accountsChanged",t)}),t.on("chainChanged",async e=>{const r=Object(a.o)(e)?e:"0x".concat(parseInt(e,10).toString(16));this.configure({chainConfig:_objectSpread$1(_objectSpread$1({},this.config.chainConfig),{},{chainId:r})}),await this.setupProvider(t)})}}function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach((function(e){i()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}class SolanaPrivateKeyProvider extends u.a{constructor(t){let{config:e,state:r}=t;super({config:{chainConfig:_objectSpread(_objectSpread({},e.chainConfig),{},{chainNamespace:a.g.SOLANA})},state:r})}async enable(){if(!this.state.privateKey)throw l.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});return await this.setupProvider(this.state.privateKey),this._providerEngineProxy.request({method:"eth_accounts"})}async setupProvider(e){const r=createSolanaMiddleware(await async function getProviderHandlers(e){let{privKey:r,getProviderEngineProxy:n}=e;if("string"!=typeof r)throw a.k.invalidParams("privKey must be a string");const i=d.b.fromSecretKey(t.from(r,"hex"));return{requestAccounts:async()=>[i.publicKey.toBase58()],getAccounts:async()=>[i.publicKey.toBase58()],getPrivateKey:async()=>r,getSecretKey:async()=>h.a.encode(i.secretKey),signTransaction:async t=>{var e;if(null===(e=t.params)||void 0===e||!e.message)throw l.ethErrors.rpc.invalidParams("message");const r=t.params.message;return r.partialSign(i),r},signMessage:async t=>{var e;if(null===(e=t.params)||void 0===e||!e.message)throw l.ethErrors.rpc.invalidParams("message");return m.a.sign.detached(t.params.message,i.secretKey)},signAndSendTransaction:async t=>{var e;if(null===(e=t.params)||void 0===e||!e.message)throw l.ethErrors.rpc.invalidParams("message");const r=n();if(!r)throw l.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const o=t.params.message;return o.sign(i),{signature:await r.request({method:"sendTransaction",params:[h.a.encode(o.serialize())]})}},signAllTransactions:async t=>{var e,r,n;if(null===(e=t.params)||void 0===e||!e.message||null===(r=t.params)||void 0===r||!r.message.length)throw l.ethErrors.rpc.invalidParams("message");const o=null===(n=t.params)||void 0===n?void 0:n.message;for(const t of o||[]){t.partialSign(i)}return o}}}({privKey:e,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)})),n=new s.b,{networkMiddleware:i}=function createJsonRpcClient(t){const{rpcTarget:e}=t,r=Object(o.g)({rpcTarget:e});return{networkMiddleware:Object(s.k)([createConfigMiddleware(t),r]),fetchMiddleware:r}}(this.config.chainConfig);n.push(this.getChainSwitchMiddleware()),n.push(this.getAccountMiddleware()),n.push(r),n.push(i);const u=Object(o.i)(n);this.updateProviderEngineProxy(u),await this.lookupNetwork()}async updateAccount(t){if(!this._providerEngineProxy)throw l.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});await this._providerEngineProxy.request({method:"solanaPrivateKey"})!==t.privateKey&&(await this.setupProvider(t.privateKey),this._providerEngineProxy.emit("accountsChanged",{accounts:await this._providerEngineProxy.request({method:"requestAccounts"})}))}async switchChain(t){if(!this._providerEngineProxy)throw l.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const e=this.getChainConfig(t.chainId);this.update({chainId:"loading"}),this.configure({chainConfig:e});const r=await this._providerEngineProxy.request({method:"solanaPrivateKey"});await this.setupProvider(r)}async lookupNetwork(){if(!this._providerEngineProxy)throw l.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const t=await this._providerEngineProxy.request({method:"getHealth",params:[]}),{chainConfig:e}=this.config;if("ok"!==t)throw a.k.rpcConnectionError("Failed to lookup network for following rpc target: ".concat(e.rpcTarget));return this.update({chainId:e.chainId}),this.state.chainId!==e.chainId&&(this.provider.emit("chainChanged",this.state.chainId),this.provider.emit("connect",{chainId:this.state.chainId})),this.state.chainId}getChainSwitchMiddleware(){return function createChainSwitchMiddleware(t){let{addNewChainConfig:e,switchSolanaChain:r}=t;return Object(s.k)([createGenericJRPCMiddleware("addSolanaChain",e),createGenericJRPCMiddleware("switchSolanaChain",r)])}({addNewChainConfig:async t=>{if(!t.params)throw l.ethErrors.rpc.invalidParams("Missing request params");const{chainId:e,chainName:r,rpcUrls:n,blockExplorerUrls:i,nativeCurrency:o}=t.params;if(!e)throw l.ethErrors.rpc.invalidParams("Missing chainId in chainParams");if(!n||0===n.length)throw l.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");if(!o)throw l.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");this.addChain({chainNamespace:a.g.SOLANA,chainId:e,ticker:(null==o?void 0:o.symbol)||"SOL",tickerName:(null==o?void 0:o.name)||"Solana",displayName:r,rpcTarget:n[0],blockExplorer:(null==i?void 0:i[0])||""})},switchSolanaChain:async t=>{if(!t.params)throw l.ethErrors.rpc.invalidParams("Missing request params");if(!t.params.chainId)throw l.ethErrors.rpc.invalidParams("Missing chainId");await this.switchChain(t.params)}})}getAccountMiddleware(){return function createAccountMiddleware(t){let{updatePrivatekey:e}=t;return Object(s.k)([createGenericJRPCMiddleware("updateAccount",e)])}({updatePrivatekey:async t=>{if(!t.params)throw l.ethErrors.rpc.invalidParams("Missing request params");if(!t.params.privateKey)throw l.ethErrors.rpc.invalidParams("Missing privateKey");const{privateKey:e}=t.params;await this.updateAccount({privateKey:e})}})}}i()(SolanaPrivateKeyProvider,"getProviderInstance",async t=>{const e=new SolanaPrivateKeyProvider({config:{chainConfig:t.chainConfig}});return await e.setupProvider(t.privKey),e});class SolanaWallet{constructor(t){i()(this,"provider",void 0),this.provider=t}async requestAccounts(){return await this.provider.request({method:"requestAccounts",params:{}})}async signAndSendTransaction(t){const{signature:e}=await this.provider.request({method:"signAndSendTransaction",params:{message:t}});return{signature:e}}async signTransaction(t){return await this.provider.request({method:"signTransaction",params:{message:t}})}async signAllTransactions(t){return await this.provider.request({method:"signAllTransactions",params:{message:t}})}async signMessage(t){return await this.provider.request({method:"signMessage",params:{message:t}})}async request(t){return await this.provider.request(t)}}}.call(this,r(15).Buffer)},1490:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return Connection})),r.d(e,"b",(function(){return Keypair})),r.d(e,"c",(function(){return PublicKey}));var n=r(1575),i=r.n(n),o=r(15),s=r(1576),a=r.n(s),u=r(1452),c=r.n(u),h=r(1578),l=r(1491),d=r(1581),p=r(1592),m=r(1582),g=r(1590),y=r.n(g),b=r(381),v=r.n(b),w=r(257),_=r.n(w);const toBuffer=t=>o.Buffer.isBuffer(t)?t:t instanceof Uint8Array?o.Buffer.from(t.buffer,t.byteOffset,t.byteLength):o.Buffer.from(t);var k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var B={},j={},O=assert$6;function assert$6(t,e){if(!t)throw new Error(e||"Assertion failed")}assert$6.equal=function assertEqual(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)};var E={exports:{}};"function"==typeof Object.create?E.exports=function inherits(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:E.exports=function inherits(t,e){if(e){t.super_=e;var TempCtor=function(){};TempCtor.prototype=e.prototype,t.prototype=new TempCtor,t.prototype.constructor=t}};var x=O,I=E.exports;function isSurrogatePair(t,e){return 55296==(64512&t.charCodeAt(e))&&(!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1)))}function htonl(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function zero2(t){return 1===t.length?"0"+t:t}function zero8(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}j.inherits=I,j.toArray=function toArray(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=63&o|128):isSurrogatePair(t,i)?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++i)),r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=63&o|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=63&o|128)}else for(i=0;i<t.length;i++)r[i]=0|t[i];return r},j.toHex=function toHex(t){for(var e="",r=0;r<t.length;r++)e+=zero2(t[r].toString(16));return e},j.htonl=htonl,j.toHex32=function toHex32(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];"little"===e&&(i=htonl(i)),r+=zero8(i.toString(16))}return r},j.zero2=zero2,j.zero8=zero8,j.join32=function join32(t,e,r,n){var i=r-e;x(i%4==0);for(var o=new Array(i/4),s=0,a=e;s<o.length;s++,a+=4){var u;u="big"===n?t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],o[s]=u>>>0}return o},j.split32=function split32(t,e){for(var r=new Array(4*t.length),n=0,i=0;n<t.length;n++,i+=4){var o=t[n];"big"===e?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r},j.rotr32=function rotr32$1(t,e){return t>>>e|t<<32-e},j.rotl32=function rotl32$2(t,e){return t<<e|t>>>32-e},j.sum32=function sum32$3(t,e){return t+e>>>0},j.sum32_3=function sum32_3$1(t,e,r){return t+e+r>>>0},j.sum32_4=function sum32_4$2(t,e,r,n){return t+e+r+n>>>0},j.sum32_5=function sum32_5$2(t,e,r,n,i){return t+e+r+n+i>>>0},j.sum64=function sum64$1(t,e,r,n){var i=t[e],o=n+t[e+1]>>>0,s=(o<n?1:0)+r+i;t[e]=s>>>0,t[e+1]=o},j.sum64_hi=function sum64_hi$1(t,e,r,n){return(e+n>>>0<e?1:0)+t+r>>>0},j.sum64_lo=function sum64_lo$1(t,e,r,n){return e+n>>>0},j.sum64_4_hi=function sum64_4_hi$1(t,e,r,n,i,o,s,a){var u=0,c=e;return u+=(c=c+n>>>0)<e?1:0,u+=(c=c+o>>>0)<o?1:0,t+r+i+s+(u+=(c=c+a>>>0)<a?1:0)>>>0},j.sum64_4_lo=function sum64_4_lo$1(t,e,r,n,i,o,s,a){return e+n+o+a>>>0},j.sum64_5_hi=function sum64_5_hi$1(t,e,r,n,i,o,s,a,u,c){var h=0,l=e;return h+=(l=l+n>>>0)<e?1:0,h+=(l=l+o>>>0)<o?1:0,h+=(l=l+a>>>0)<a?1:0,t+r+i+s+u+(h+=(l=l+c>>>0)<c?1:0)>>>0},j.sum64_5_lo=function sum64_5_lo$1(t,e,r,n,i,o,s,a,u,c){return e+n+o+a+c>>>0},j.rotr64_hi=function rotr64_hi$1(t,e,r){return(e<<32-r|t>>>r)>>>0},j.rotr64_lo=function rotr64_lo$1(t,e,r){return(t<<32-r|e>>>r)>>>0},j.shr64_hi=function shr64_hi$1(t,e,r){return t>>>r},j.shr64_lo=function shr64_lo$1(t,e,r){return(t<<32-r|e>>>r)>>>0};var P={},N=j,R=O;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}P.BlockHash=BlockHash$4,BlockHash$4.prototype.update=function update(t,e){if(t=N.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var r=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-r,t.length),0===this.pending.length&&(this.pending=null),t=N.join32(t,0,t.length-r,this.endian);for(var n=0;n<t.length;n+=this._delta32)this._update(t,n,n+this._delta32)}return this},BlockHash$4.prototype.digest=function digest(t){return this.update(this._pad()),R(null===this.pending),this._digest(t)},BlockHash$4.prototype._pad=function pad(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=t>>>24&255,n[i++]=t>>>16&255,n[i++]=t>>>8&255,n[i++]=255&t}else for(n[i++]=255&t,n[i++]=t>>>8&255,n[i++]=t>>>16&255,n[i++]=t>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n};var T={},L={},C=j.rotr32;function ch32$1(t,e,r){return t&e^~t&r}function maj32$1(t,e,r){return t&e^t&r^e&r}function p32(t,e,r){return t^e^r}L.ft_1=function ft_1$1(t,e,r,n){return 0===t?ch32$1(e,r,n):1===t||3===t?p32(e,r,n):2===t?maj32$1(e,r,n):void 0},L.ch32=ch32$1,L.maj32=maj32$1,L.p32=p32,L.s0_256=function s0_256$1(t){return C(t,2)^C(t,13)^C(t,22)},L.s1_256=function s1_256$1(t){return C(t,6)^C(t,11)^C(t,25)},L.g0_256=function g0_256$1(t){return C(t,7)^C(t,18)^t>>>3},L.g1_256=function g1_256$1(t){return C(t,17)^C(t,19)^t>>>10};var U=j,z=P,q=L,D=U.rotl32,W=U.sum32,H=U.sum32_5,$=q.ft_1,G=z.BlockHash,V=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;G.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}U.inherits(SHA1,G);var J=SHA1;SHA1.blockSize=512,SHA1.outSize=160,SHA1.hmacStrength=80,SHA1.padLength=64,SHA1.prototype._update=function _update(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=D(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],u=this.h[4];for(n=0;n<r.length;n++){var c=~~(n/20),h=H(D(i,5),$(c,o,s,a),u,r[n],V[c]);u=a,a=s,s=D(o,30),o=i,i=h}this.h[0]=W(this.h[0],i),this.h[1]=W(this.h[1],o),this.h[2]=W(this.h[2],s),this.h[3]=W(this.h[3],a),this.h[4]=W(this.h[4],u)},SHA1.prototype._digest=function digest(t){return"hex"===t?U.toHex32(this.h,"big"):U.split32(this.h,"big")};var Y=j,X=P,Q=L,tt=O,et=Y.sum32,rt=Y.sum32_4,nt=Y.sum32_5,it=Q.ch32,ot=Q.maj32,st=Q.s0_256,at=Q.s1_256,ut=Q.g0_256,ct=Q.g1_256,ht=X.BlockHash,dt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$1(){if(!(this instanceof SHA256$1))return new SHA256$1;ht.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=dt,this.W=new Array(64)}Y.inherits(SHA256$1,ht);var ft=SHA256$1;SHA256$1.blockSize=512,SHA256$1.outSize=256,SHA256$1.hmacStrength=192,SHA256$1.padLength=64,SHA256$1.prototype._update=function _update(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=rt(ct(r[n-2]),r[n-7],ut(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],u=this.h[4],c=this.h[5],h=this.h[6],l=this.h[7];for(tt(this.k.length===r.length),n=0;n<r.length;n++){var d=nt(l,at(u),it(u,c,h),this.k[n],r[n]),p=et(st(i),ot(i,o,s));l=h,h=c,c=u,u=et(a,d),a=s,s=o,o=i,i=et(d,p)}this.h[0]=et(this.h[0],i),this.h[1]=et(this.h[1],o),this.h[2]=et(this.h[2],s),this.h[3]=et(this.h[3],a),this.h[4]=et(this.h[4],u),this.h[5]=et(this.h[5],c),this.h[6]=et(this.h[6],h),this.h[7]=et(this.h[7],l)},SHA256$1.prototype._digest=function digest(t){return"hex"===t?Y.toHex32(this.h,"big"):Y.split32(this.h,"big")};var pt=j,mt=ft;function SHA224(){if(!(this instanceof SHA224))return new SHA224;mt.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}pt.inherits(SHA224,mt);var yt=SHA224;SHA224.blockSize=512,SHA224.outSize=224,SHA224.hmacStrength=192,SHA224.padLength=64,SHA224.prototype._digest=function digest(t){return"hex"===t?pt.toHex32(this.h.slice(0,7),"big"):pt.split32(this.h.slice(0,7),"big")};var bt=j,vt=P,wt=O,_t=bt.rotr64_hi,Mt=bt.rotr64_lo,kt=bt.shr64_hi,Bt=bt.shr64_lo,St=bt.sum64,jt=bt.sum64_hi,Ot=bt.sum64_lo,Et=bt.sum64_4_hi,At=bt.sum64_4_lo,xt=bt.sum64_5_hi,It=bt.sum64_5_lo,Pt=vt.BlockHash,Nt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$1(){if(!(this instanceof SHA512$1))return new SHA512$1;Pt.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Nt,this.W=new Array(160)}bt.inherits(SHA512$1,Pt);var Rt=SHA512$1;function ch64_hi(t,e,r,n,i){var o=t&r^~t&i;return o<0&&(o+=4294967296),o}function ch64_lo(t,e,r,n,i,o){var s=e&n^~e&o;return s<0&&(s+=4294967296),s}function maj64_hi(t,e,r,n,i){var o=t&r^t&i^r&i;return o<0&&(o+=4294967296),o}function maj64_lo(t,e,r,n,i,o){var s=e&n^e&o^n&o;return s<0&&(s+=4294967296),s}function s0_512_hi(t,e){var r=_t(t,e,28)^_t(e,t,2)^_t(e,t,7);return r<0&&(r+=4294967296),r}function s0_512_lo(t,e){var r=Mt(t,e,28)^Mt(e,t,2)^Mt(e,t,7);return r<0&&(r+=4294967296),r}function s1_512_hi(t,e){var r=_t(t,e,14)^_t(t,e,18)^_t(e,t,9);return r<0&&(r+=4294967296),r}function s1_512_lo(t,e){var r=Mt(t,e,14)^Mt(t,e,18)^Mt(e,t,9);return r<0&&(r+=4294967296),r}function g0_512_hi(t,e){var r=_t(t,e,1)^_t(t,e,8)^kt(t,e,7);return r<0&&(r+=4294967296),r}function g0_512_lo(t,e){var r=Mt(t,e,1)^Mt(t,e,8)^Bt(t,e,7);return r<0&&(r+=4294967296),r}function g1_512_hi(t,e){var r=_t(t,e,19)^_t(e,t,29)^kt(t,e,6);return r<0&&(r+=4294967296),r}function g1_512_lo(t,e){var r=Mt(t,e,19)^Mt(e,t,29)^Bt(t,e,6);return r<0&&(r+=4294967296),r}SHA512$1.blockSize=1024,SHA512$1.outSize=512,SHA512$1.hmacStrength=192,SHA512$1.padLength=128,SHA512$1.prototype._prepareBlock=function _prepareBlock(t,e){for(var r=this.W,n=0;n<32;n++)r[n]=t[e+n];for(;n<r.length;n+=2){var i=g1_512_hi(r[n-4],r[n-3]),o=g1_512_lo(r[n-4],r[n-3]),s=r[n-14],a=r[n-13],u=g0_512_hi(r[n-30],r[n-29]),c=g0_512_lo(r[n-30],r[n-29]),h=r[n-32],l=r[n-31];r[n]=Et(i,o,s,a,u,c,h,l),r[n+1]=At(i,o,s,a,u,c,h,l)}},SHA512$1.prototype._update=function _update(t,e){this._prepareBlock(t,e);var r=this.W,n=this.h[0],i=this.h[1],o=this.h[2],s=this.h[3],a=this.h[4],u=this.h[5],c=this.h[6],h=this.h[7],l=this.h[8],d=this.h[9],p=this.h[10],m=this.h[11],g=this.h[12],y=this.h[13],b=this.h[14],v=this.h[15];wt(this.k.length===r.length);for(var w=0;w<r.length;w+=2){var _=b,k=v,B=s1_512_hi(l,d),j=s1_512_lo(l,d),O=ch64_hi(l,d,p,m,g),E=ch64_lo(l,d,p,m,g,y),x=this.k[w],I=this.k[w+1],P=r[w],N=r[w+1],R=xt(_,k,B,j,O,E,x,I,P,N),T=It(_,k,B,j,O,E,x,I,P,N);_=s0_512_hi(n,i),k=s0_512_lo(n,i),B=maj64_hi(n,i,o,s,a),j=maj64_lo(n,i,o,s,a,u);var L=jt(_,k,B,j),C=Ot(_,k,B,j);b=g,v=y,g=p,y=m,p=l,m=d,l=jt(c,h,R,T),d=Ot(h,h,R,T),c=a,h=u,a=o,u=s,o=n,s=i,n=jt(R,T,L,C),i=Ot(R,T,L,C)}St(this.h,0,n,i),St(this.h,2,o,s),St(this.h,4,a,u),St(this.h,6,c,h),St(this.h,8,l,d),St(this.h,10,p,m),St(this.h,12,g,y),St(this.h,14,b,v)},SHA512$1.prototype._digest=function digest(t){return"hex"===t?bt.toHex32(this.h,"big"):bt.split32(this.h,"big")};var Tt=j,Lt=Rt;function SHA384(){if(!(this instanceof SHA384))return new SHA384;Lt.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Tt.inherits(SHA384,Lt);var Ct=SHA384;SHA384.blockSize=1024,SHA384.outSize=384,SHA384.hmacStrength=192,SHA384.padLength=128,SHA384.prototype._digest=function digest(t){return"hex"===t?Tt.toHex32(this.h.slice(0,12),"big"):Tt.split32(this.h.slice(0,12),"big")},T.sha1=J,T.sha224=yt,T.sha256=ft,T.sha384=Ct,T.sha512=Rt;var Ut={},zt=j,qt=P,Dt=zt.rotl32,Ft=zt.sum32,Kt=zt.sum32_3,Wt=zt.sum32_4,Ht=qt.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;Ht.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function f(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function K(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Kh(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}zt.inherits(RIPEMD160,Ht),Ut.ripemd160=RIPEMD160,RIPEMD160.blockSize=512,RIPEMD160.outSize=160,RIPEMD160.hmacStrength=192,RIPEMD160.padLength=64,RIPEMD160.prototype._update=function update(t,e){for(var r=this.h[0],n=this.h[1],i=this.h[2],o=this.h[3],s=this.h[4],a=r,u=n,c=i,h=o,l=s,d=0;d<80;d++){var p=Ft(Dt(Wt(r,f(d,n,i,o),t[$t[d]+e],K(d)),Vt[d]),s);r=s,s=o,o=Dt(i,10),i=n,n=p,p=Ft(Dt(Wt(a,f(79-d,u,c,h),t[Gt[d]+e],Kh(d)),Zt[d]),l),a=l,l=h,h=Dt(c,10),c=u,u=p}p=Kt(this.h[1],i,h),this.h[1]=Kt(this.h[2],o,l),this.h[2]=Kt(this.h[3],s,a),this.h[3]=Kt(this.h[4],r,u),this.h[4]=Kt(this.h[0],n,c),this.h[0]=p},RIPEMD160.prototype._digest=function digest(t){return"hex"===t?zt.toHex32(this.h,"little"):zt.split32(this.h,"little")};var $t=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Gt=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Vt=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Zt=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Jt=j,Yt=O;function Hmac(t,e,r){if(!(this instanceof Hmac))return new Hmac(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(Jt.toArray(e,r))}var Xt=Hmac;Hmac.prototype._init=function init(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),Yt(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},Hmac.prototype.update=function update(t,e){return this.inner.update(t,e),this},Hmac.prototype.digest=function digest(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)},function(t){var e=t;e.utils=j,e.common=P,e.sha=T,e.ripemd=Ut,e.hmac=Xt,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(B);var Qt=B;let te=!1,ee=!1;const re={debug:1,default:2,info:2,warning:3,error:4,off:5};let ne=re.default,ie=null;const oe=function _checkNormalize(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test"!=="test".normalize(e))throw new Error("bad normalize")}catch(r){t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();var se,ae;!function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"}(se||(se={})),function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED"}(ae||(ae={}));const ue="0123456789abcdef";class Logger{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,e){const r=t.toLowerCase();null==re[r]&&this.throwArgumentError("invalid log level name","logLevel",t),ne>re[r]||console.log.apply(console,e)}debug(...t){this._log(Logger.levels.DEBUG,t)}info(...t){this._log(Logger.levels.INFO,t)}warn(...t){this._log(Logger.levels.WARNING,t)}makeError(t,e,r){if(ee)return this.makeError("censored error",e,{});e||(e=Logger.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(t=>{const e=r[t];try{if(e instanceof Uint8Array){let r="";for(let t=0;t<e.length;t++)r+=ue[e[t]>>4],r+=ue[15&e[t]];n.push(t+"=Uint8Array(0x"+r+")")}else n.push(t+"="+JSON.stringify(e))}catch(e){n.push(t+"="+JSON.stringify(r[t].toString()))}}),n.push("code="+e),n.push("version="+this.version);const i=t;let o="";switch(e){case ae.NUMERIC_FAULT:{o="NUMERIC_FAULT";const e=t;switch(e){case"overflow":case"underflow":case"division-by-zero":o+="-"+e;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case ae.CALL_EXCEPTION:case ae.INSUFFICIENT_FUNDS:case ae.MISSING_NEW:case ae.NONCE_EXPIRED:case ae.REPLACEMENT_UNDERPRICED:case ae.TRANSACTION_REPLACED:case ae.UNPREDICTABLE_GAS_LIMIT:o=e}o&&(t+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(t+=" ("+n.join(", ")+")");const s=new Error(t);return s.reason=i,s.code=e,Object.keys(r).forEach((function(t){s[t]=r[t]})),s}throwError(t,e,r){throw this.makeError(t,e,r)}throwArgumentError(t,e,r){return this.throwError(t,Logger.errors.INVALID_ARGUMENT,{argument:e,value:r})}assert(t,e,r,n){t||this.throwError(e,r,n)}assertArgument(t,e,r,n){t||this.throwArgumentError(e,r,n)}checkNormalize(t){oe&&this.throwError("platform missing String.prototype.normalize",Logger.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:oe})}checkSafeUint53(t,e){"number"==typeof t&&(null==e&&(e="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(e,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(e,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,e,r){r=r?": "+r:"",t<e&&this.throwError("missing argument"+r,Logger.errors.MISSING_ARGUMENT,{count:t,expectedCount:e}),t>e&&this.throwError("too many arguments"+r,Logger.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:e})}checkNew(t,e){t!==Object&&null!=t||this.throwError("missing new",Logger.errors.MISSING_NEW,{name:e.name})}checkAbstract(t,e){t===e?this.throwError("cannot instantiate abstract class "+JSON.stringify(e.name)+" directly; use a sub-class",Logger.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",Logger.errors.MISSING_NEW,{name:e.name})}static globalLogger(){return ie||(ie=new Logger("logger/5.6.0")),ie}static setCensorship(t,e){if(!t&&e&&this.globalLogger().throwError("cannot permanently disable censorship",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),te){if(!t)return;this.globalLogger().throwError("error censorship permanent",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}ee=!!t,te=!!e}static setLogLevel(t){const e=re[t.toLowerCase()];null!=e?ne=e:Logger.globalLogger().warn("invalid log level - "+t)}static from(t){return new Logger(t)}}Logger.errors=ae,Logger.levels=se;const ce=new Logger("bytes/5.6.0");function addSlice(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return addSlice(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function isInteger(t){return"number"==typeof t&&t==t&&t%1==0}function arrayify(t,e){if(e||(e={}),"number"==typeof t){ce.checkSafeUint53(t,"invalid arrayify value");const e=[];for(;t;)e.unshift(255&t),t=parseInt(String(t/256));return 0===e.length&&e.push(0),addSlice(new Uint8Array(e))}if(e.allowMissingPrefix&&"string"==typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),function isHexable(t){return!!t.toHexString}(t)&&(t=t.toHexString()),function isHexString(t,e){if("string"!=typeof t||!t.match(/^0x[0-9A-Fa-f]*$/))return!1;if(e&&t.length!==2+2*e)return!1;return!0}(t)){let r=t.substring(2);r.length%2&&("left"===e.hexPad?r="0x0"+r.substring(2):"right"===e.hexPad?r+="0":ce.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let t=0;t<r.length;t+=2)n.push(parseInt(r.substring(t,t+2),16));return addSlice(new Uint8Array(n))}return function isBytes(t){if(null==t)return!1;if(t.constructor===Uint8Array)return!0;if("string"==typeof t)return!1;if(!isInteger(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!isInteger(r)||r<0||r>=256)return!1}return!0}(t)?addSlice(new Uint8Array(t)):ce.throwArgumentError("invalid arrayify value","value",t)}function sha256(t){return"0x"+Qt.sha256().update(arrayify(t)).digest("hex")}new Logger("sha2/5.6.0");class Struct{constructor(t){Object.assign(this,t)}encode(){return o.Buffer.from(Object(h.serialize)(he,this))}static decode(t){return Object(h.deserialize)(he,this,t)}static decodeUnchecked(t){return Object(h.deserializeUnchecked)(he,this,t)}}const he=new Map;class PublicKey extends Struct{constructor(t){if(super({}),this._bn=void 0,function isPublicKeyData(t){return void 0!==t._bn}(t))this._bn=t._bn;else{if("string"==typeof t){const e=c.a.decode(t);if(32!=e.length)throw new Error("Invalid public key input");this._bn=new a.a(e)}else this._bn=new a.a(t);if(this._bn.byteLength()>32)throw new Error("Invalid public key input")}}equals(t){return this._bn.eq(t._bn)}toBase58(){return c.a.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){return this.toBuffer()}toBuffer(){const t=this._bn.toArrayLike(o.Buffer);if(32===t.length)return t;const e=o.Buffer.alloc(32);return t.copy(e,32-t.length),e}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const n=o.Buffer.concat([t.toBuffer(),o.Buffer.from(e),r.toBuffer()]),i=sha256(new Uint8Array(n)).slice(2);return new PublicKey(o.Buffer.from(i,"hex"))}static createProgramAddressSync(t,e){let r=o.Buffer.alloc(0);t.forEach((function(t){if(t.length>32)throw new TypeError("Max seed length exceeded");r=o.Buffer.concat([r,toBuffer(t)])})),r=o.Buffer.concat([r,e.toBuffer(),o.Buffer.from("ProgramDerivedAddress")]);let n=sha256(new Uint8Array(r)).slice(2),i=new a.a(n,16).toArray(void 0,32);if(is_on_curve(i))throw new Error("Invalid seeds, address must fall off the curve");return new PublicKey(i)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r,n=255;for(;0!=n;){try{const i=t.concat(o.Buffer.from([n]));r=this.createProgramAddressSync(i,e)}catch(t){if(t instanceof TypeError)throw t;n--;continue}return[r,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){return 1==is_on_curve(new PublicKey(t).toBytes())}}PublicKey.default=new PublicKey("11111111111111111111111111111111"),he.set(PublicKey,{kind:"struct",fields:[["_bn","u256"]]});let le=i.a.lowlevel;function is_on_curve(t){var e=[le.gf(),le.gf(),le.gf(),le.gf()],r=le.gf(),n=le.gf(),i=le.gf(),o=le.gf(),s=le.gf(),a=le.gf(),u=le.gf();return le.set25519(e[2],de),le.unpack25519(e[1],t),le.S(i,e[1]),le.M(o,i,le.D),le.Z(i,i,e[2]),le.A(o,e[2],o),le.S(s,o),le.S(a,s),le.M(u,a,s),le.M(r,u,i),le.M(r,r,o),le.pow2523(r,r),le.M(r,r,i),le.M(r,r,o),le.M(r,r,o),le.M(e[0],r,o),le.S(n,e[0]),le.M(n,n,o),neq25519(n,i)&&le.M(e[0],e[0],fe),le.S(n,e[0]),le.M(n,n,o),neq25519(n,i)?0:1}let de=le.gf([1]),fe=le.gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function neq25519(t,e){var r=new Uint8Array(32),n=new Uint8Array(32);return le.pack25519(r,t),le.pack25519(n,e),le.crypto_verify_32(r,0,n,0)}new PublicKey("BPFLoader1111111111111111111111111111111111");const publicKey=(t="publicKey")=>l.blob(32,t),rustString=(t="string")=>{const e=l.struct([l.u32("length"),l.u32("lengthPadding"),l.blob(l.offset(l.u32(),-8),"chars")],t),r=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(t,e)=>r(t,e).chars.toString(),i.encode=(t,e,r)=>{const i={chars:o.Buffer.from(t,"utf8")};return n(i,e,r)},i.alloc=t=>l.u32().span+l.u32().span+o.Buffer.from(t,"utf8").length,i};function decodeLength(t){let e=0,r=0;for(;;){let n=t.shift();if(e|=(127&n)<<7*r,r+=1,0==(128&n))break}return e}function encodeLength(t,e){let r=e;for(;;){let e=127&r;if(r>>=7,0==r){t.push(e);break}e|=128,t.push(e)}}class Message{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(t=>new PublicKey(t)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){return t<this.header.numRequiredSignatures-this.header.numReadonlySignedAccounts||t>=this.header.numRequiredSignatures&&t<this.accountKeys.length-this.header.numReadonlyUnsignedAccounts}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];encodeLength(e,t);const r=this.instructions.map(t=>{const{accounts:e,programIdIndex:r}=t,n=Array.from(c.a.decode(t.data));let i=[];encodeLength(i,e.length);let s=[];return encodeLength(s,n.length),{programIdIndex:r,keyIndicesCount:o.Buffer.from(i),keyIndices:e,dataLength:o.Buffer.from(s),data:n}});let n=[];encodeLength(n,r.length);let i=o.Buffer.alloc(1232);o.Buffer.from(n).copy(i);let s=n.length;r.forEach(t=>{const e=l.struct([l.u8("programIdIndex"),l.blob(t.keyIndicesCount.length,"keyIndicesCount"),l.seq(l.u8("keyIndex"),t.keyIndices.length,"keyIndices"),l.blob(t.dataLength.length,"dataLength"),l.seq(l.u8("userdatum"),t.data.length,"data")]).encode(t,i,s);s+=e}),i=i.slice(0,s);const a=l.struct([l.blob(1,"numRequiredSignatures"),l.blob(1,"numReadonlySignedAccounts"),l.blob(1,"numReadonlyUnsignedAccounts"),l.blob(e.length,"keyCount"),l.seq(publicKey("key"),t,"keys"),publicKey("recentBlockhash")]),u={numRequiredSignatures:o.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:o.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:o.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:o.Buffer.from(e),keys:this.accountKeys.map(t=>toBuffer(t.toBytes())),recentBlockhash:c.a.decode(this.recentBlockhash)};let h=o.Buffer.alloc(2048);const d=a.encode(u,h);return i.copy(h,d),h.slice(0,d+i.length)}static from(t){let e=[...t];const r=e.shift(),n=e.shift(),i=e.shift(),s=decodeLength(e);let a=[];for(let t=0;t<s;t++){const t=e.slice(0,32);e=e.slice(32),a.push(c.a.encode(o.Buffer.from(t)))}const u=e.slice(0,32);e=e.slice(32);const h=decodeLength(e);let l=[];for(let t=0;t<h;t++){const t=e.shift(),r=decodeLength(e),n=e.slice(0,r);e=e.slice(r);const i=decodeLength(e),s=e.slice(0,i),a=c.a.encode(o.Buffer.from(s));e=e.slice(i),l.push({programIdIndex:t,accounts:n,data:a})}const d={header:{numRequiredSignatures:r,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:i},recentBlockhash:c.a.encode(o.Buffer.from(u)),accountKeys:a,instructions:l};return new Message(d)}}function assert(t,e){if(!t)throw new Error(e||"Assertion failed")}let pe;!function(t){t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT"}(pe||(pe={}));const me=o.Buffer.alloc(64).fill(0);class TransactionInstruction{constructor(t){this.keys=void 0,this.programId=void 0,this.data=o.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class Transaction{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this._message=void 0,this._json=void 0,t)if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const e=t;Object.assign(this,e),this.recentBlockhash=e.blockhash,this.lastValidBlockHeight=e.lastValidBlockHeight}else{const e=t;Object.assign(this,e),this.recentBlockhash=e.recentBlockhash}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(0===t.length)throw new Error("No instructions");return t.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new TransactionInstruction(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;const{nonceInfo:t}=this;t&&this.instructions[0]!=t.nonceInstruction&&(this.recentBlockhash=t.nonce,this.instructions.unshift(t.nonceInstruction));const{recentBlockhash:e}=this;if(!e)throw new Error("Transaction recentBlockhash required");let r;if(this.instructions.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let t=0;t<this.instructions.length;t++)if(void 0===this.instructions[t].programId)throw new Error(`Transaction instruction index ${t} has undefined program id`);const n=[],i=[];this.instructions.forEach(t=>{t.keys.forEach(t=>{i.push({...t})});const e=t.programId.toString();n.includes(e)||n.push(e)}),n.forEach(t=>{i.push({pubkey:new PublicKey(t),isSigner:!1,isWritable:!1})}),i.sort((function(t,e){const r=t.pubkey.toBase58().localeCompare(e.pubkey.toBase58()),n=t.isSigner===e.isSigner?0:t.isSigner?-1:1,i=t.isWritable===e.isWritable?r:t.isWritable?-1:1;return n||i}));const o=[];i.forEach(t=>{const e=t.pubkey.toString(),r=o.findIndex(t=>t.pubkey.toString()===e);r>-1?o[r].isWritable=o[r].isWritable||t.isWritable:o.push(t)});const s=o.findIndex(t=>t.pubkey.equals(r));if(s>-1){const[t]=o.splice(s,1);t.isSigner=!0,t.isWritable=!0,o.unshift(t)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const t of this.signatures){const e=o.findIndex(e=>e.pubkey.equals(t.publicKey));if(!(e>-1))throw new Error("unknown signer: "+t.publicKey.toString());o[e].isSigner||(o[e].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let a=0,u=0,h=0;const l=[],d=[];o.forEach(({pubkey:t,isSigner:e,isWritable:r})=>{e?(l.push(t.toString()),a+=1,r||(u+=1)):(d.push(t.toString()),r||(h+=1))});const p=l.concat(d),m=this.instructions.map(t=>{const{data:e,programId:r}=t;return{programIdIndex:p.indexOf(r.toString()),accounts:t.keys.map(t=>p.indexOf(t.pubkey.toString())),data:c.a.encode(e)}});return m.forEach(t=>{assert(t.programIdIndex>=0),t.accounts.forEach(t=>assert(t>=0))}),new Message({header:{numRequiredSignatures:a,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:h},accountKeys:p,recentBlockhash:e,instructions:m})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);if(this.signatures.length===e.length){if(this.signatures.every((t,r)=>e[r].equals(t.publicKey)))return t}return this.signatures=e.map(t=>({signature:null,publicKey:t})),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(0===t.length)throw new Error("No signers");const e=new Set;this.signatures=t.filter(t=>{const r=t.toString();return!e.has(r)&&(e.add(r),!0)}).map(t=>({signature:null,publicKey:t}))}sign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,r=[];for(const n of t){const t=n.publicKey.toString();e.has(t)||(e.add(t),r.push(n))}this.signatures=r.map(t=>({signature:null,publicKey:t.publicKey}));const n=this._compile();this._partialSign(n,...r)}partialSign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,r=[];for(const n of t){const t=n.publicKey.toString();e.has(t)||(e.add(t),r.push(n))}const n=this._compile();this._partialSign(n,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(t=>{const e=i.a.sign.detached(r,t.secretKey);this._addSignature(t.publicKey,toBuffer(e))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){assert(64===e.length);const r=this.signatures.findIndex(e=>t.equals(e.publicKey));if(r<0)throw new Error("unknown signer: "+t.toString());this.signatures[r].signature=o.Buffer.from(e)}verifySignatures(){return this._verifySignatures(this.serializeMessage(),!0)}_verifySignatures(t,e){for(const{signature:r,publicKey:n}of this.signatures)if(null===r){if(e)return!1}else if(!i.a.sign.detached.verify(t,r,n.toBuffer()))return!1;return!0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),n=this.serializeMessage();if(r&&!this._verifySignatures(n,e))throw new Error("Signature verification failed");return this._serialize(n)}_serialize(t){const{signatures:e}=this,r=[];encodeLength(r,e.length);const n=r.length+64*e.length+t.length,i=o.Buffer.alloc(n);return assert(e.length<256),o.Buffer.from(r).copy(i,0),e.forEach(({signature:t},e)=>{null!==t&&(assert(64===t.length,"signature has invalid length"),o.Buffer.from(t).copy(i,r.length+64*e))}),t.copy(i,r.length+64*e.length),assert(i.length<=1232,`Transaction too large: ${i.length} > 1232`),i}get keys(){return assert(1===this.instructions.length),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return assert(1===this.instructions.length),this.instructions[0].programId}get data(){return assert(1===this.instructions.length),this.instructions[0].data}static from(t){let e=[...t];const r=decodeLength(e);let n=[];for(let t=0;t<r;t++){const t=e.slice(0,64);e=e.slice(64),n.push(c.a.encode(o.Buffer.from(t)))}return Transaction.populate(Message.from(e),n)}static populate(t,e=[]){const r=new Transaction;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((e,n)=>{const i={signature:e==c.a.encode(me)?null:c.a.decode(e),publicKey:t.accountKeys[n]};r.signatures.push(i)}),t.instructions.forEach(e=>{const n=e.accounts.map(e=>{const n=t.accountKeys[e];return{pubkey:n,isSigner:r.signatures.some(t=>t.publicKey.toString()===n.toString())||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}});r.instructions.push(new TransactionInstruction({keys:n,programId:t.accountKeys[e.programIdIndex],data:c.a.decode(e.data)}))}),r._message=t,r._json=r.toJSON(),r}}const ge=new PublicKey("SysvarC1ock11111111111111111111111111111111"),ye=(new PublicKey("SysvarEpochSchedu1e111111111111111111111111"),new PublicKey("Sysvar1nstructions1111111111111111111111111"),new PublicKey("SysvarRecentB1ockHashes11111111111111111111")),be=new PublicKey("SysvarRent111111111111111111111111111111111"),ve=(new PublicKey("SysvarRewards111111111111111111111111111111"),new PublicKey("SysvarS1otHashes111111111111111111111111111"),new PublicKey("SysvarS1otHistory11111111111111111111111111"),new PublicKey("SysvarStakeHistory1111111111111111111111111"));async function sendAndConfirmTransaction(t,e,r,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries},o=await t.sendTransaction(e,r,i),s=null!=e.recentBlockhash&&null!=e.lastValidBlockHeight?(await t.confirmTransaction({signature:o,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value:(await t.confirmTransaction(o,n&&n.commitment)).value;if(s.err)throw new Error(`Transaction ${o} failed (${JSON.stringify(s)})`);return o}function sleep(t){return new Promise(e=>setTimeout(e,t))}function encodeData(t,e){const r=t.layout.span>=0?t.layout.span:function getAlloc(t,e){let r=0;return t.layout.fields.forEach(t=>{t.span>=0?r+=t.span:"function"==typeof t.alloc&&(r+=t.alloc(e[t.property]))}),r}(t,e),n=o.Buffer.alloc(r),i=Object.assign({instruction:t.index},e);return t.layout.encode(i,n),n}const we=l.nu64("lamportsPerSignature"),_e=l.struct([l.u32("version"),l.u32("state"),publicKey("authorizedPubkey"),publicKey("nonce"),l.struct([we],"feeCalculator")]),Me=_e.span;class NonceAccount{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=_e.decode(toBuffer(t),0);return new NonceAccount({authorizedPubkey:new PublicKey(e.authorizedPubkey),nonce:new PublicKey(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const ke=(Be=8,t=>{const e=Object(l.blob)(Be,t),{encode:r,decode:n}=(t=>({decode:t.decode.bind(t),encode:t.encode.bind(t)}))(e),i=e;return i.decode=(t,e)=>{const r=n(t,e);return Object(d.toBigIntLE)(o.Buffer.from(r))},i.encode=(t,e,n)=>{const i=Object(d.toBufferLE)(t,Be);return r(i,e,n)},i});var Be;const Se=Object.freeze({Create:{index:0,layout:l.struct([l.u32("instruction"),l.ns64("lamports"),l.ns64("space"),publicKey("programId")])},Assign:{index:1,layout:l.struct([l.u32("instruction"),publicKey("programId")])},Transfer:{index:2,layout:l.struct([l.u32("instruction"),ke("lamports")])},CreateWithSeed:{index:3,layout:l.struct([l.u32("instruction"),publicKey("base"),rustString("seed"),l.ns64("lamports"),l.ns64("space"),publicKey("programId")])},AdvanceNonceAccount:{index:4,layout:l.struct([l.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:l.struct([l.u32("instruction"),l.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:l.struct([l.u32("instruction"),publicKey("authorized")])},AuthorizeNonceAccount:{index:7,layout:l.struct([l.u32("instruction"),publicKey("authorized")])},Allocate:{index:8,layout:l.struct([l.u32("instruction"),l.ns64("space")])},AllocateWithSeed:{index:9,layout:l.struct([l.u32("instruction"),publicKey("base"),rustString("seed"),l.ns64("space"),publicKey("programId")])},AssignWithSeed:{index:10,layout:l.struct([l.u32("instruction"),publicKey("base"),rustString("seed"),publicKey("programId")])},TransferWithSeed:{index:11,layout:l.struct([l.u32("instruction"),ke("lamports"),rustString("seed"),publicKey("programId")])}});class SystemProgram{constructor(){}static createAccount(t){const e=encodeData(Se.Create,{lamports:t.lamports,space:t.space,programId:toBuffer(t.programId.toBuffer())});return new TransactionInstruction({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:e})}static transfer(t){let e,r;if("basePubkey"in t){e=encodeData(Se.TransferWithSeed,{lamports:BigInt(t.lamports),seed:t.seed,programId:toBuffer(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{e=encodeData(Se.Transfer,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new TransactionInstruction({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){e=encodeData(Se.AssignWithSeed,{base:toBuffer(t.basePubkey.toBuffer()),seed:t.seed,programId:toBuffer(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{e=encodeData(Se.Assign,{programId:toBuffer(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new TransactionInstruction({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=encodeData(Se.CreateWithSeed,{base:toBuffer(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:toBuffer(t.programId.toBuffer())});let r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey!=t.fromPubkey&&r.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new TransactionInstruction({keys:r,programId:this.programId,data:e})}static createNonceAccount(t){const e=new Transaction;"basePubkey"in t&&"seed"in t?e.add(SystemProgram.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Me,programId:this.programId})):e.add(SystemProgram.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Me,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=encodeData(Se.InitializeNonceAccount,{authorized:toBuffer(t.authorizedPubkey.toBuffer())}),r={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:ye,isSigner:!1,isWritable:!1},{pubkey:be,isSigner:!1,isWritable:!1}],programId:this.programId,data:e};return new TransactionInstruction(r)}static nonceAdvance(t){const e=encodeData(Se.AdvanceNonceAccount),r={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:ye,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:e};return new TransactionInstruction(r)}static nonceWithdraw(t){const e=encodeData(Se.WithdrawNonceAccount,{lamports:t.lamports});return new TransactionInstruction({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:ye,isSigner:!1,isWritable:!1},{pubkey:be,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:e})}static nonceAuthorize(t){const e=encodeData(Se.AuthorizeNonceAccount,{authorized:toBuffer(t.newAuthorizedPubkey.toBuffer())});return new TransactionInstruction({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:e})}static allocate(t){let e,r;if("basePubkey"in t){e=encodeData(Se.AllocateWithSeed,{base:toBuffer(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:toBuffer(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{e=encodeData(Se.Allocate,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new TransactionInstruction({keys:r,programId:this.programId,data:e})}}SystemProgram.programId=new PublicKey("11111111111111111111111111111111");class Loader{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Loader.chunkSize)+1+1)}static async load(t,e,r,n,i){{const o=await t.getMinimumBalanceForRentExemption(i.length),s=await t.getAccountInfo(r.publicKey,"confirmed");let a=null;if(null!==s){if(s.executable)return console.error("Program load failed, account is already executable"),!1;s.data.length!==i.length&&(a=a||new Transaction,a.add(SystemProgram.allocate({accountPubkey:r.publicKey,space:i.length}))),s.owner.equals(n)||(a=a||new Transaction,a.add(SystemProgram.assign({accountPubkey:r.publicKey,programId:n}))),s.lamports<o&&(a=a||new Transaction,a.add(SystemProgram.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:o-s.lamports})))}else a=(new Transaction).add(SystemProgram.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:o>0?o:1,space:i.length,programId:n}));null!==a&&await sendAndConfirmTransaction(t,a,[e,r],{commitment:"confirmed"})}const s=l.struct([l.u32("instruction"),l.u32("offset"),l.u32("bytesLength"),l.u32("bytesLengthPadding"),l.seq(l.u8("byte"),l.offset(l.u32(),-8),"bytes")]),a=Loader.chunkSize;let u=0,c=i,h=[];for(;c.length>0;){const i=c.slice(0,a),l=o.Buffer.alloc(a+16);s.encode({instruction:0,offset:u,bytes:i,bytesLength:0,bytesLengthPadding:0},l);const d=(new Transaction).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:n,data:l});if(h.push(sendAndConfirmTransaction(t,d,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")){const t=4;await sleep(1e3/t)}u+=a,c=c.slice(a)}await Promise.all(h);{const i=l.struct([l.u32("instruction")]),s=o.Buffer.alloc(i.span);i.encode({instruction:1},s);const a=(new Transaction).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:be,isSigner:!1,isWritable:!1}],programId:n,data:s});await sendAndConfirmTransaction(t,a,[e,r],{commitment:"confirmed"})}return!0}}Loader.chunkSize=932;new PublicKey("BPFLoader2111111111111111111111111111111111");const je=Object.freeze({RequestUnits:{index:0,layout:l.struct([l.u8("instruction"),l.u32("units"),l.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:l.struct([l.u8("instruction"),l.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:l.struct([l.u8("instruction"),l.u32("units")])},SetComputeUnitPrice:{index:3,layout:l.struct([l.u8("instruction"),ke("microLamports")])}});class ComputeBudgetProgram{constructor(){}static requestUnits(t){const e=encodeData(je.RequestUnits,t);return new TransactionInstruction({keys:[],programId:this.programId,data:e})}static requestHeapFrame(t){const e=encodeData(je.RequestHeapFrame,t);return new TransactionInstruction({keys:[],programId:this.programId,data:e})}static setComputeUnitLimit(t){const e=encodeData(je.SetComputeUnitLimit,t);return new TransactionInstruction({keys:[],programId:this.programId,data:e})}static setComputeUnitPrice(t){const e=encodeData(je.SetComputeUnitPrice,{microLamports:BigInt(t.microLamports)});return new TransactionInstruction({keys:[],programId:this.programId,data:e})}}ComputeBudgetProgram.programId=new PublicKey("ComputeBudget111111111111111111111111111111");var Oe={exports:{}};!function(t,e){var r="undefined"!=typeof self?self:k,n=function(){function F(){this.fetch=!1,this.DOMException=r.DOMException}return F.prototype=r,new F}();!function(t){!function(e){var r="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),o="FormData"in t,s="ArrayBuffer"in t;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function normalizeName(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function normalizeValue(t){return"string"!=typeof t&&(t=String(t)),t}function iteratorFor(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function Headers(t){this.map={},t instanceof Headers?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function consumed(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function fileReaderReady(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function readBlobAsArrayBuffer(t){var e=new FileReader,r=fileReaderReady(e);return e.readAsArrayBuffer(t),r}function bufferClone(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(t){this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:o&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():s&&i&&function isDataView(t){return t&&DataView.prototype.isPrototypeOf(t)}(t)?(this._bodyArrayBuffer=bufferClone(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(t)||u(t))?this._bodyArrayBuffer=bufferClone(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=consumed(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?consumed(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(readBlobAsArrayBuffer)}),this.text=function(){var t=consumed(this);if(t)return t;if(this._bodyBlob)return function readBlobAsText(t){var e=new FileReader,r=fileReaderReady(e);return e.readAsText(t),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function readArrayBufferAsText(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}Headers.prototype.append=function(t,e){t=normalizeName(t),e=normalizeValue(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},Headers.prototype.delete=function(t){delete this.map[normalizeName(t)]},Headers.prototype.get=function(t){return t=normalizeName(t),this.has(t)?this.map[t]:null},Headers.prototype.has=function(t){return this.map.hasOwnProperty(normalizeName(t))},Headers.prototype.set=function(t,e){this.map[normalizeName(t)]=normalizeValue(e)},Headers.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},Headers.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),iteratorFor(t)},Headers.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),iteratorFor(t)},Headers.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),iteratorFor(t)},n&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Request(t,e){var r=(e=e||{}).body;if(t instanceof Request){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new Headers(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new Headers(e.headers)),this.method=function normalizeMethod(t){var e=t.toUpperCase();return c.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function decode(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}})),e}function Response(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new Headers(e.headers),this.url=e.url||"",this._initBody(t)}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var t=new Response(null,{status:0,statusText:""});return t.type="error",t};var h=[301,302,303,307,308];Response.redirect=function(t,e){if(-1===h.indexOf(e))throw new RangeError("Invalid status code");return new Response(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function fetch(t,r){return new Promise((function(n,o){var s=new Request(t,r);if(s.signal&&s.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function abortXhr(){a.abort()}a.onload=function(){var t,e,r={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new Headers,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}})),e)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;n(new Response(i,r))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.onabort=function(){o(new e.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),s.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),s.signal&&(s.signal.addEventListener("abort",abortXhr),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",abortXhr)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}fetch.polyfill=!0,t.fetch||(t.fetch=fetch,t.Headers=Headers,t.Request=Request,t.Response=Response),e.Headers=Headers,e.Request=Request,e.Response=Response,e.fetch=fetch,Object.defineProperty(e,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e}(Oe,Oe.exports);var Ee=getDefaultExportFromCjs(Oe.exports),Ae=Object.prototype.toString,xe=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};var fastStableStringify$1=function(t){var e=function stringify(t,e){var r,n,i,o,s,a,u;if(!0===t)return"true";if(!1===t)return"false";switch(typeof t){case"object":if(null===t)return null;if(t.toJSON&&"function"==typeof t.toJSON)return stringify(t.toJSON(),e);if("[object Array]"===(u=Ae.call(t))){for(i="[",n=t.length-1,r=0;r<n;r++)i+=stringify(t[r],!0)+",";return n>-1&&(i+=stringify(t[r],!0)),i+"]"}if("[object Object]"===u){for(n=(o=xe(t).sort()).length,i="",r=0;r<n;)void 0!==(a=stringify(t[s=o[r]],!1))&&(i&&(i+=","),i+=JSON.stringify(s)+":"+a),r++;return"{"+i+"}"}return JSON.stringify(t);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(t);default:return isFinite(t)?t:null}}(t,!1);if(void 0!==e)return""+e};function trailingZeros(t){let e=0;for(;t>1;)t/=2,e++;return e}class EpochSchedule{constructor(t,e,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=trailingZeros(function nextPowerOfTwo(t){return 0===t?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,(t|=t>>32)+1)}(t+32+1))-trailingZeros(32)-1;return[e,t-(this.getSlotsInEpoch(e)-32)]}{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch);return[this.firstNormalEpoch+r,e%this.slotsPerEpoch]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?32*(Math.pow(2,t)-1):(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+trailingZeros(32)):this.slotsPerEpoch}}class SendTransactionError extends Error{constructor(t,e){super(t),this.logs=void 0,this.logs=e}}class TransactionExpiredBlockheightExceededError extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(TransactionExpiredBlockheightExceededError.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class TransactionExpiredTimeoutError extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature `+t+" using the Solana Explorer or CLI tools."),this.signature=void 0,this.signature=t}}Object.defineProperty(TransactionExpiredTimeoutError.prototype,"name",{value:"TransactionExpiredTimeoutError"});const Ie=Object(p.e)(Object(p.g)(PublicKey),Object(p.m)(),t=>new PublicKey(t)),Pe=Object(p.n)([Object(p.m)(),Object(p.h)("base64")]),Ne=Object(p.e)(Object(p.g)(o.Buffer),Pe,t=>o.Buffer.from(t[0],"base64"));function createRpcResult(t){return Object(p.p)([Object(p.o)({jsonrpc:Object(p.h)("2.0"),id:Object(p.m)(),result:t}),Object(p.o)({jsonrpc:Object(p.h)("2.0"),id:Object(p.m)(),error:Object(p.o)({code:Object(p.q)(),message:Object(p.m)(),data:Object(p.k)(Object(p.a)())})})])}const Re=createRpcResult(Object(p.q)());function jsonRpcResult(t){return Object(p.e)(createRpcResult(t),Re,e=>"error"in e?e:{...e,result:Object(p.f)(e.result,t)})}function jsonRpcResultAndContext(t){return jsonRpcResult(Object(p.o)({context:Object(p.o)({slot:Object(p.j)()}),value:t}))}function notificationResultAndContext(t){return Object(p.o)({context:Object(p.o)({slot:Object(p.j)()}),value:t})}const Te=Object(p.o)({foundation:Object(p.j)(),foundationTerm:Object(p.j)(),initial:Object(p.j)(),taper:Object(p.j)(),terminal:Object(p.j)()}),Le=jsonRpcResult(Object(p.b)(Object(p.i)(Object(p.o)({epoch:Object(p.j)(),effectiveSlot:Object(p.j)(),amount:Object(p.j)(),postBalance:Object(p.j)()})))),Ce=Object(p.o)({epoch:Object(p.j)(),slotIndex:Object(p.j)(),slotsInEpoch:Object(p.j)(),absoluteSlot:Object(p.j)(),blockHeight:Object(p.k)(Object(p.j)()),transactionCount:Object(p.k)(Object(p.j)())}),Ue=Object(p.o)({slotsPerEpoch:Object(p.j)(),leaderScheduleSlotOffset:Object(p.j)(),warmup:Object(p.d)(),firstNormalEpoch:Object(p.j)(),firstNormalSlot:Object(p.j)()}),ze=Object(p.l)(Object(p.m)(),Object(p.b)(Object(p.j)())),qe=Object(p.i)(Object(p.p)([Object(p.o)({}),Object(p.m)()])),De=Object(p.o)({err:qe}),Fe=Object(p.h)("receivedSignature"),Ke=Object(p.o)({"solana-core":Object(p.m)(),"feature-set":Object(p.k)(Object(p.j)())}),We=jsonRpcResultAndContext(Object(p.o)({err:Object(p.i)(Object(p.p)([Object(p.o)({}),Object(p.m)()])),logs:Object(p.i)(Object(p.b)(Object(p.m)())),accounts:Object(p.k)(Object(p.i)(Object(p.b)(Object(p.i)(Object(p.o)({executable:Object(p.d)(),owner:Object(p.m)(),lamports:Object(p.j)(),data:Object(p.b)(Object(p.m)()),rentEpoch:Object(p.k)(Object(p.j)())}))))),unitsConsumed:Object(p.k)(Object(p.j)())})),He=jsonRpcResultAndContext(Object(p.o)({byIdentity:Object(p.l)(Object(p.m)(),Object(p.b)(Object(p.j)())),range:Object(p.o)({firstSlot:Object(p.j)(),lastSlot:Object(p.j)()})}));const $e=jsonRpcResult(Te),Ge=jsonRpcResult(Ce),Ve=jsonRpcResult(Ue),Ze=jsonRpcResult(ze),Je=jsonRpcResult(Object(p.j)()),Ye=jsonRpcResultAndContext(Object(p.o)({total:Object(p.j)(),circulating:Object(p.j)(),nonCirculating:Object(p.j)(),nonCirculatingAccounts:Object(p.b)(Ie)})),Xe=Object(p.o)({amount:Object(p.m)(),uiAmount:Object(p.i)(Object(p.j)()),decimals:Object(p.j)(),uiAmountString:Object(p.k)(Object(p.m)())}),Qe=jsonRpcResultAndContext(Object(p.b)(Object(p.o)({address:Ie,amount:Object(p.m)(),uiAmount:Object(p.i)(Object(p.j)()),decimals:Object(p.j)(),uiAmountString:Object(p.k)(Object(p.m)())}))),tr=jsonRpcResultAndContext(Object(p.b)(Object(p.o)({pubkey:Ie,account:Object(p.o)({executable:Object(p.d)(),owner:Ie,lamports:Object(p.j)(),data:Ne,rentEpoch:Object(p.j)()})}))),er=Object(p.o)({program:Object(p.m)(),parsed:Object(p.q)(),space:Object(p.j)()}),rr=jsonRpcResultAndContext(Object(p.b)(Object(p.o)({pubkey:Ie,account:Object(p.o)({executable:Object(p.d)(),owner:Ie,lamports:Object(p.j)(),data:er,rentEpoch:Object(p.j)()})}))),nr=jsonRpcResultAndContext(Object(p.b)(Object(p.o)({lamports:Object(p.j)(),address:Ie}))),ir=Object(p.o)({executable:Object(p.d)(),owner:Ie,lamports:Object(p.j)(),data:Ne,rentEpoch:Object(p.j)()}),sr=Object(p.o)({pubkey:Ie,account:ir}),ar=Object(p.e)(Object(p.p)([Object(p.g)(o.Buffer),er]),Object(p.p)([Pe,er]),t=>Array.isArray(t)?Object(p.f)(t,Ne):t),ur=Object(p.o)({executable:Object(p.d)(),owner:Ie,lamports:Object(p.j)(),data:ar,rentEpoch:Object(p.j)()}),cr=Object(p.o)({pubkey:Ie,account:ur}),hr=Object(p.o)({state:Object(p.p)([Object(p.h)("active"),Object(p.h)("inactive"),Object(p.h)("activating"),Object(p.h)("deactivating")]),active:Object(p.j)(),inactive:Object(p.j)()}),lr=jsonRpcResult(Object(p.b)(Object(p.o)({signature:Object(p.m)(),slot:Object(p.j)(),err:qe,memo:Object(p.i)(Object(p.m)()),blockTime:Object(p.k)(Object(p.i)(Object(p.j)()))}))),dr=jsonRpcResult(Object(p.b)(Object(p.o)({signature:Object(p.m)(),slot:Object(p.j)(),err:qe,memo:Object(p.i)(Object(p.m)()),blockTime:Object(p.k)(Object(p.i)(Object(p.j)()))}))),fr=Object(p.o)({subscription:Object(p.j)(),result:notificationResultAndContext(ir)}),pr=Object(p.o)({pubkey:Ie,account:ir}),mr=Object(p.o)({subscription:Object(p.j)(),result:notificationResultAndContext(pr)}),gr=Object(p.o)({parent:Object(p.j)(),slot:Object(p.j)(),root:Object(p.j)()}),yr=Object(p.o)({subscription:Object(p.j)(),result:gr}),br=Object(p.p)([Object(p.o)({type:Object(p.p)([Object(p.h)("firstShredReceived"),Object(p.h)("completed"),Object(p.h)("optimisticConfirmation"),Object(p.h)("root")]),slot:Object(p.j)(),timestamp:Object(p.j)()}),Object(p.o)({type:Object(p.h)("createdBank"),parent:Object(p.j)(),slot:Object(p.j)(),timestamp:Object(p.j)()}),Object(p.o)({type:Object(p.h)("frozen"),slot:Object(p.j)(),timestamp:Object(p.j)(),stats:Object(p.o)({numTransactionEntries:Object(p.j)(),numSuccessfulTransactions:Object(p.j)(),numFailedTransactions:Object(p.j)(),maxTransactionsPerEntry:Object(p.j)()})}),Object(p.o)({type:Object(p.h)("dead"),slot:Object(p.j)(),timestamp:Object(p.j)(),err:Object(p.m)()})]),vr=Object(p.o)({subscription:Object(p.j)(),result:br}),wr=Object(p.o)({subscription:Object(p.j)(),result:notificationResultAndContext(Object(p.p)([De,Fe]))}),_r=Object(p.o)({subscription:Object(p.j)(),result:Object(p.j)()}),Mr=Object(p.o)({pubkey:Object(p.m)(),gossip:Object(p.i)(Object(p.m)()),tpu:Object(p.i)(Object(p.m)()),rpc:Object(p.i)(Object(p.m)()),version:Object(p.i)(Object(p.m)())}),kr=Object(p.o)({votePubkey:Object(p.m)(),nodePubkey:Object(p.m)(),activatedStake:Object(p.j)(),epochVoteAccount:Object(p.d)(),epochCredits:Object(p.b)(Object(p.n)([Object(p.j)(),Object(p.j)(),Object(p.j)()])),commission:Object(p.j)(),lastVote:Object(p.j)(),rootSlot:Object(p.i)(Object(p.j)())}),Br=jsonRpcResult(Object(p.o)({current:Object(p.b)(kr),delinquent:Object(p.b)(kr)})),Sr=Object(p.p)([Object(p.h)("processed"),Object(p.h)("confirmed"),Object(p.h)("finalized")]),jr=Object(p.o)({slot:Object(p.j)(),confirmations:Object(p.i)(Object(p.j)()),err:qe,confirmationStatus:Object(p.k)(Sr)}),Or=jsonRpcResultAndContext(Object(p.b)(Object(p.i)(jr))),Er=jsonRpcResult(Object(p.j)()),Ar=Object(p.o)({signatures:Object(p.b)(Object(p.m)()),message:Object(p.o)({accountKeys:Object(p.b)(Object(p.m)()),header:Object(p.o)({numRequiredSignatures:Object(p.j)(),numReadonlySignedAccounts:Object(p.j)(),numReadonlyUnsignedAccounts:Object(p.j)()}),instructions:Object(p.b)(Object(p.o)({accounts:Object(p.b)(Object(p.j)()),data:Object(p.m)(),programIdIndex:Object(p.j)()})),recentBlockhash:Object(p.m)()})}),xr=Object(p.o)({parsed:Object(p.q)(),program:Object(p.m)(),programId:Ie}),Ir=Object(p.o)({accounts:Object(p.b)(Ie),data:Object(p.m)(),programId:Ie}),Pr=Object(p.p)([Ir,xr]),Nr=Object(p.p)([Object(p.o)({parsed:Object(p.q)(),program:Object(p.m)(),programId:Object(p.m)()}),Object(p.o)({accounts:Object(p.b)(Object(p.m)()),data:Object(p.m)(),programId:Object(p.m)()})]),Rr=Object(p.e)(Pr,Nr,t=>"accounts"in t?Object(p.f)(t,Ir):Object(p.f)(t,xr)),Tr=Object(p.o)({signatures:Object(p.b)(Object(p.m)()),message:Object(p.o)({accountKeys:Object(p.b)(Object(p.o)({pubkey:Ie,signer:Object(p.d)(),writable:Object(p.d)()})),instructions:Object(p.b)(Rr),recentBlockhash:Object(p.m)()})}),Lr=Object(p.o)({accountIndex:Object(p.j)(),mint:Object(p.m)(),owner:Object(p.k)(Object(p.m)()),uiTokenAmount:Xe}),Cr=Object(p.o)({err:qe,fee:Object(p.j)(),innerInstructions:Object(p.k)(Object(p.i)(Object(p.b)(Object(p.o)({index:Object(p.j)(),instructions:Object(p.b)(Object(p.o)({accounts:Object(p.b)(Object(p.j)()),data:Object(p.m)(),programIdIndex:Object(p.j)()}))})))),preBalances:Object(p.b)(Object(p.j)()),postBalances:Object(p.b)(Object(p.j)()),logMessages:Object(p.k)(Object(p.i)(Object(p.b)(Object(p.m)()))),preTokenBalances:Object(p.k)(Object(p.i)(Object(p.b)(Lr))),postTokenBalances:Object(p.k)(Object(p.i)(Object(p.b)(Lr)))}),Ur=Object(p.o)({err:qe,fee:Object(p.j)(),innerInstructions:Object(p.k)(Object(p.i)(Object(p.b)(Object(p.o)({index:Object(p.j)(),instructions:Object(p.b)(Rr)})))),preBalances:Object(p.b)(Object(p.j)()),postBalances:Object(p.b)(Object(p.j)()),logMessages:Object(p.k)(Object(p.i)(Object(p.b)(Object(p.m)()))),preTokenBalances:Object(p.k)(Object(p.i)(Object(p.b)(Lr))),postTokenBalances:Object(p.k)(Object(p.i)(Object(p.b)(Lr)))}),zr=jsonRpcResult(Object(p.i)(Object(p.o)({blockhash:Object(p.m)(),previousBlockhash:Object(p.m)(),parentSlot:Object(p.j)(),transactions:Object(p.b)(Object(p.o)({transaction:Ar,meta:Object(p.i)(Cr)})),rewards:Object(p.k)(Object(p.b)(Object(p.o)({pubkey:Object(p.m)(),lamports:Object(p.j)(),postBalance:Object(p.i)(Object(p.j)()),rewardType:Object(p.i)(Object(p.m)())}))),blockTime:Object(p.i)(Object(p.j)()),blockHeight:Object(p.i)(Object(p.j)())}))),qr=jsonRpcResult(Object(p.i)(Object(p.o)({blockhash:Object(p.m)(),previousBlockhash:Object(p.m)(),parentSlot:Object(p.j)(),transactions:Object(p.b)(Object(p.o)({transaction:Ar,meta:Object(p.i)(Cr)})),rewards:Object(p.k)(Object(p.b)(Object(p.o)({pubkey:Object(p.m)(),lamports:Object(p.j)(),postBalance:Object(p.i)(Object(p.j)()),rewardType:Object(p.i)(Object(p.m)())}))),blockTime:Object(p.i)(Object(p.j)())}))),Dr=jsonRpcResult(Object(p.i)(Object(p.o)({blockhash:Object(p.m)(),previousBlockhash:Object(p.m)(),parentSlot:Object(p.j)(),signatures:Object(p.b)(Object(p.m)()),blockTime:Object(p.i)(Object(p.j)())}))),Fr=jsonRpcResult(Object(p.i)(Object(p.o)({slot:Object(p.j)(),meta:Cr,blockTime:Object(p.k)(Object(p.i)(Object(p.j)())),transaction:Ar}))),Kr=jsonRpcResult(Object(p.i)(Object(p.o)({slot:Object(p.j)(),transaction:Tr,meta:Object(p.i)(Ur),blockTime:Object(p.k)(Object(p.i)(Object(p.j)()))}))),Wr=jsonRpcResultAndContext(Object(p.o)({blockhash:Object(p.m)(),feeCalculator:Object(p.o)({lamportsPerSignature:Object(p.j)()})})),Hr=jsonRpcResultAndContext(Object(p.o)({blockhash:Object(p.m)(),lastValidBlockHeight:Object(p.j)()})),$r=Object(p.o)({slot:Object(p.j)(),numTransactions:Object(p.j)(),numSlots:Object(p.j)(),samplePeriodSecs:Object(p.j)()}),Gr=jsonRpcResult(Object(p.b)($r)),Vr=jsonRpcResultAndContext(Object(p.i)(Object(p.o)({feeCalculator:Object(p.o)({lamportsPerSignature:Object(p.j)()})}))),Zr=jsonRpcResult(Object(p.m)()),Jr=jsonRpcResult(Object(p.m)()),Yr=Object(p.o)({err:qe,logs:Object(p.b)(Object(p.m)()),signature:Object(p.m)()}),Xr=Object(p.o)({result:notificationResultAndContext(Yr),subscription:Object(p.j)()});class Connection{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set;let r=new URL(t);r.protocol;let n,i,o,s,a;e&&"string"==typeof e?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,n=e.wsEndpoint,i=e.httpHeaders,o=e.fetch,s=e.fetchMiddleware,a=e.disableRetryOnRateLimit),this._rpcEndpoint=t,this._rpcWsEndpoint=n||function makeWebsocketUrl(t){let e=new URL(t);const r="https:"===e.protocol;return e.protocol=r?"wss:":"ws:",e.host="",""!==e.port&&(e.port=String(Number(e.port)+1)),e.toString()}(t),this._rpcClient=function createRpcClient(t,e,r,n,i,o){const s=n||Ee;let a;return i&&(a=async(t,e)=>{const r=await new Promise((r,n)=>{try{i(t,e,(t,e)=>r([t,e]))}catch(t){n(t)}});return await s(...r)}),new y.a(async(e,n)=>{const i={method:"POST",body:e,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},r||{})};try{let e,r=5,u=500;for(;(e=a?await a(t,i):await s(t,i),429===e.status)&&!0!==o&&(r-=1,0!==r);)console.log(`Server responded with ${e.status} ${e.statusText}.  Retrying after ${u}ms delay...`),await sleep(u),u*=2;const c=await e.text();e.ok?n(null,c):n(new Error(`${e.status} ${e.statusText}: ${c}`))}catch(t){t instanceof Error&&n(t)}},{})}(r.toString(),0,i,o,s,a),this._rpcRequest=function createRpcRequest(t){return(e,r)=>new Promise((n,i)=>{t.request(e,r,(t,e)=>{t?i(t):n(e)})})}(this._rpcClient),this._rpcBatchRequest=function createRpcBatchRequest(t){return e=>new Promise((r,n)=>{0===e.length&&r([]);const i=e.map(e=>t.request(e.methodName,e.args));t.request(i,(t,e)=>{t?n(t):r(e)})})}(this._rpcClient),this._rpcWebSocket=new m.Client(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getBalance",r),i=Object(p.f)(n,jsonRpcResultAndContext(Object(p.j)()));if("error"in i)throw new Error("failed to get balance for "+t.toBase58()+": "+i.error.message);return i.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(t=>t.value).catch(e=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+e)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=Object(p.f)(e,jsonRpcResult(Object(p.i)(Object(p.j)())));if("error"in r)throw new Error("failed to get block time for slot "+t+": "+r.error.message);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=Object(p.f)(t,jsonRpcResult(Object(p.j)()));if("error"in e)throw new Error("failed to get minimum ledger slot: "+e.error.message);return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=Object(p.f)(t,Je);if("error"in e)throw new Error("failed to get first available block: "+e.error.message);return e.result}async getSupply(t){let e={};e="string"==typeof t?{commitment:t}:t?{...t,commitment:t&&t.commitment||this.commitment}:{commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),n=Object(p.f)(r,Ye);if("error"in n)throw new Error("failed to get supply: "+n.error.message);return n.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenSupply",r),i=Object(p.f)(n,jsonRpcResultAndContext(Xe));if("error"in i)throw new Error("failed to get token supply: "+i.error.message);return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenAccountBalance",r),i=Object(p.f)(n,jsonRpcResultAndContext(Xe));if("error"in i)throw new Error("failed to get token account balance: "+i.error.message);return i.result}async getTokenAccountsByOwner(t,e,r){let n=[t.toBase58()];"mint"in e?n.push({mint:e.mint.toBase58()}):n.push({programId:e.programId.toBase58()});const i=this._buildArgs(n,r,"base64"),o=await this._rpcRequest("getTokenAccountsByOwner",i),s=Object(p.f)(o,tr);if("error"in s)throw new Error("failed to get token accounts owned by account "+t.toBase58()+": "+s.error.message);return s.result}async getParsedTokenAccountsByOwner(t,e,r){let n=[t.toBase58()];"mint"in e?n.push({mint:e.mint.toBase58()}):n.push({programId:e.programId.toBase58()});const i=this._buildArgs(n,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),s=Object(p.f)(o,rr);if("error"in s)throw new Error("failed to get token accounts owned by account "+t.toBase58()+": "+s.error.message);return s.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],n=await this._rpcRequest("getLargestAccounts",r),i=Object(p.f)(n,nr);if("error"in i)throw new Error("failed to get largest accounts: "+i.error.message);return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenLargestAccounts",r),i=Object(p.f)(n,Qe);if("error"in i)throw new Error("failed to get token largest accounts: "+i.error.message);return i.result}async getAccountInfoAndContext(t,e){const r=this._buildArgs([t.toBase58()],e,"base64"),n=await this._rpcRequest("getAccountInfo",r),i=Object(p.f)(n,jsonRpcResultAndContext(Object(p.i)(ir)));if("error"in i)throw new Error("failed to get info about account "+t.toBase58()+": "+i.error.message);return i.result}async getParsedAccountInfo(t,e){const r=this._buildArgs([t.toBase58()],e,"jsonParsed"),n=await this._rpcRequest("getAccountInfo",r),i=Object(p.f)(n,jsonRpcResultAndContext(Object(p.i)(ur)));if("error"in i)throw new Error("failed to get info about account "+t.toBase58()+": "+i.error.message);return i.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(e){throw new Error("failed to get info about account "+t.toBase58()+": "+e)}}async getMultipleAccountsInfoAndContext(t,e){const r=t.map(t=>t.toBase58()),n=this._buildArgs([r],e,"base64"),i=await this._rpcRequest("getMultipleAccounts",n),o=Object(p.f)(i,jsonRpcResultAndContext(Object(p.b)(Object(p.i)(ir))));if("error"in o)throw new Error("failed to get info for accounts "+r+": "+o.error.message);return o.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const n=this._buildArgs([t.toBase58()],e,void 0,void 0!==r?{epoch:r}:void 0),i=await this._rpcRequest("getStakeActivation",n),o=Object(p.f)(i,jsonRpcResult(hr));if("error"in o)throw new Error(`failed to get Stake Activation ${t.toBase58()}: ${o.error.message}`);return o.result}async getProgramAccounts(t,e){const r={};let n,i;e&&("string"==typeof e?n=e:(n=e.commitment,i=e.encoding,e.dataSlice&&(r.dataSlice=e.dataSlice),e.filters&&(r.filters=e.filters)));const o=this._buildArgs([t.toBase58()],n,i||"base64",r),s=await this._rpcRequest("getProgramAccounts",o),a=Object(p.f)(s,jsonRpcResult(Object(p.b)(sr)));if("error"in a)throw new Error("failed to get accounts owned by program "+t.toBase58()+": "+a.error.message);return a.result}async getParsedProgramAccounts(t,e){const r={};let n;e&&("string"==typeof e?n=e:(n=e.commitment,e.filters&&(r.filters=e.filters)));const i=this._buildArgs([t.toBase58()],n,"jsonParsed",r),o=await this._rpcRequest("getProgramAccounts",i),s=Object(p.f)(o,jsonRpcResult(Object(p.b)(cr)));if("error"in s)throw new Error("failed to get accounts owned by program "+t.toBase58()+": "+s.error.message);return s.result}async confirmTransaction(t,e){let r,n;if("string"==typeof t)r=t;else{r=t.signature}try{n=c.a.decode(r)}catch(t){throw new Error("signature must be base58 encoded: "+r)}assert(64===n.length,"signature has invalid length");const i=e||this.commitment;let o,s,a=!1;const u=new Promise((t,e)=>{try{s=this.onSignature(r,(e,r)=>{s=void 0;const n={context:r,value:e};a=!0,t({__type:pe.PROCESSED,response:n})},i)}catch(t){e(t)}}),checkBlockHeight=async()=>{try{return await this.getBlockHeight(e)}catch(t){return-1}},h=new Promise(e=>{if("string"==typeof t){let t=this._confirmTransactionInitialTimeout||6e4;switch(i){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":t=this._confirmTransactionInitialTimeout||3e4}o=setTimeout(()=>e({__type:pe.TIMED_OUT,timeoutMs:t}),t)}else{let r=t;(async()=>{let t=await checkBlockHeight();if(!a){for(;t<=r.lastValidBlockHeight;){if(await sleep(1e3),a)return;if(t=await checkBlockHeight(),a)return}e({__type:pe.BLOCKHEIGHT_EXCEEDED})}})()}});let l;try{const t=await Promise.race([u,h]);switch(t.__type){case pe.BLOCKHEIGHT_EXCEEDED:throw new TransactionExpiredBlockheightExceededError(r);case pe.PROCESSED:l=t.response;break;case pe.TIMED_OUT:throw new TransactionExpiredTimeoutError(r,t.timeoutMs/1e3)}}finally{clearTimeout(o),s&&this.removeSignatureListener(s)}return l}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=Object(p.f)(t,jsonRpcResult(Object(p.b)(Mr)));if("error"in e)throw new Error("failed to get cluster nodes: "+e.error.message);return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),n=Object(p.f)(r,Br);if("error"in n)throw new Error("failed to get vote accounts: "+n.error.message);return n.result}async getSlot(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getSlot",e),n=Object(p.f)(r,jsonRpcResult(Object(p.j)()));if("error"in n)throw new Error("failed to get slot: "+n.error.message);return n.result}async getSlotLeader(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getSlotLeader",e),n=Object(p.f)(r,jsonRpcResult(Object(p.m)()));if("error"in n)throw new Error("failed to get slot leader: "+n.error.message);return n.result}async getSlotLeaders(t,e){const r=[t,e],n=await this._rpcRequest("getSlotLeaders",r),i=Object(p.f)(n,jsonRpcResult(Object(p.b)(Ie)));if("error"in i)throw new Error("failed to get slot leaders: "+i.error.message);return i.result}async getSignatureStatus(t,e){const{context:r,value:n}=await this.getSignatureStatuses([t],e);return assert(1===n.length),{context:r,value:n[0]}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const n=await this._rpcRequest("getSignatureStatuses",r),i=Object(p.f)(n,Or);if("error"in i)throw new Error("failed to get signature status: "+i.error.message);return i.result}async getTransactionCount(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getTransactionCount",e),n=Object(p.f)(r,jsonRpcResult(Object(p.j)()));if("error"in n)throw new Error("failed to get transaction count: "+n.error.message);return n.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),n=Object(p.f)(r,$e);if("error"in n)throw new Error("failed to get inflation: "+n.error.message);return n.result}async getInflationReward(t,e,r){const n=this._buildArgs([t.map(t=>t.toBase58())],r,void 0,{epoch:e}),i=await this._rpcRequest("getInflationReward",n),o=Object(p.f)(i,Le);if("error"in o)throw new Error("failed to get inflation reward: "+o.error.message);return o.result}async getEpochInfo(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getEpochInfo",e),n=Object(p.f)(r,Ge);if("error"in n)throw new Error("failed to get epoch info: "+n.error.message);return n.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=Object(p.f)(t,Ve);if("error"in e)throw new Error("failed to get epoch schedule: "+e.error.message);const r=e.result;return new EpochSchedule(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=Object(p.f)(t,Ze);if("error"in e)throw new Error("failed to get leader schedule: "+e.error.message);return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),n=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=Object(p.f)(n,Er);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),n=Object(p.f)(r,Wr);if("error"in n)throw new Error("failed to get recent blockhash: "+n.error.message);return n.result}async getRecentPerformanceSamples(t){const e=this._buildArgs(t?[t]:[]),r=await this._rpcRequest("getRecentPerformanceSamples",e),n=Object(p.f)(r,Gr);if("error"in n)throw new Error("failed to get recent performance samples: "+n.error.message);return n.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),n=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=Object(p.f)(n,Vr);if("error"in i)throw new Error("failed to get fee calculator: "+i.error.message);const{context:o,value:s}=i.result;return{context:o,value:null!==s?s.feeCalculator:null}}async getFeeForMessage(t,e){const r=t.serialize().toString("base64"),n=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",n),o=Object(p.f)(i,jsonRpcResultAndContext(Object(p.i)(Object(p.j)())));if("error"in o)throw new Error("failed to get slot: "+o.error.message);if(null===o.result)throw new Error("invalid blockhash");return o.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getLatestBlockhash",e),n=Object(p.f)(r,Hr);if("error"in n)throw new Error("failed to get latest blockhash: "+n.error.message);return n.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=Object(p.f)(t,jsonRpcResult(Ke));if("error"in e)throw new Error("failed to get version: "+e.error.message);return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=Object(p.f)(t,jsonRpcResult(Object(p.m)()));if("error"in e)throw new Error("failed to get genesis hash: "+e.error.message);return e.result}async getBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e&&e.commitment),n=await this._rpcRequest("getBlock",r),i=Object(p.f)(n,zr);if("error"in i)throw new Error("failed to get confirmed block: "+i.error.message);const o=i.result;return o?{...o,transactions:o.transactions.map(({transaction:t,meta:e})=>{const r=new Message(t.message);return{meta:e,transaction:{...t,message:r}}})}:o}async getBlockHeight(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getBlockHeight",e),n=Object(p.f)(r,jsonRpcResult(Object(p.j)()));if("error"in n)throw new Error("failed to get block height information: "+n.error.message);return n.result}async getBlockProduction(t){let e,r;if("string"==typeof t)r=t;else if(t){const{commitment:n,...i}=t;r=n,e=i}const n=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",n),o=Object(p.f)(i,He);if("error"in o)throw new Error("failed to get block production information: "+o.error.message);return o.result}async getTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e&&e.commitment),n=await this._rpcRequest("getTransaction",r),i=Object(p.f)(n,Fr);if("error"in i)throw new Error("failed to get transaction: "+i.error.message);const o=i.result;return o?{...o,transaction:{...o.transaction,message:new Message(o.transaction.message)}}:o}async getParsedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),n=await this._rpcRequest("getTransaction",r),i=Object(p.f)(n,Kr);if("error"in i)throw new Error("failed to get transaction: "+i.error.message);return i.result}async getParsedTransactions(t,e){const r=t.map(t=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([t],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(t=>{const e=Object(p.f)(t,Kr);if("error"in e)throw new Error("failed to get transactions: "+e.error.message);return e.result})}async getTransactions(t,e){const r=t.map(t=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([t],e)}));return(await this._rpcBatchRequest(r)).map(t=>{const e=Object(p.f)(t,Fr);if("error"in e)throw new Error("failed to get transactions: "+e.error.message);return e.result})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),n=await this._rpcRequest("getConfirmedBlock",r),i=Object(p.f)(n,qr);if("error"in i)throw new Error("failed to get confirmed block: "+i.error.message);const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const s={...o,transactions:o.transactions.map(({transaction:t,meta:e})=>{const r=new Message(t.message);return{meta:e,transaction:{...t,message:r}}})};return{...s,transactions:s.transactions.map(({transaction:t,meta:e})=>({meta:e,transaction:Transaction.populate(t.message,t.signatures)}))}}async getBlocks(t,e,r){const n=this._buildArgsAtLeastConfirmed(void 0!==e?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",n),o=Object(p.f)(i,jsonRpcResult(Object(p.b)(Object(p.j)())));if("error"in o)throw new Error("failed to get blocks: "+o.error.message);return o.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getBlock",r),i=Object(p.f)(n,Dr);if("error"in i)throw new Error("failed to get block: "+i.error.message);const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getConfirmedBlock",r),i=Object(p.f)(n,Dr);if("error"in i)throw new Error("failed to get confirmed block: "+i.error.message);const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),n=await this._rpcRequest("getConfirmedTransaction",r),i=Object(p.f)(n,Fr);if("error"in i)throw new Error("failed to get transaction: "+i.error.message);const o=i.result;if(!o)return o;const s=new Message(o.transaction.message),a=o.transaction.signatures;return{...o,transaction:Transaction.populate(s,a)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),n=await this._rpcRequest("getConfirmedTransaction",r),i=Object(p.f)(n,Kr);if("error"in i)throw new Error("failed to get confirmed transaction: "+i.error.message);return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(t=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([t],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(t=>{const e=Object(p.f)(t,Kr);if("error"in e)throw new Error("failed to get confirmed transactions: "+e.error.message);return e.result})}async getConfirmedSignaturesForAddress(t,e,r){let n={},i=await this.getFirstAvailableBlock();for(;!("until"in n)&&!(--e<=0||e<i);)try{const t=await this.getConfirmedBlockSignatures(e,"finalized");t.signatures.length>0&&(n.until=t.signatures[t.signatures.length-1].toString())}catch(t){if(t instanceof Error&&t.message.includes("skipped"))continue;throw t}let o=await this.getSlot("finalized");for(;!("before"in n||++r>o);)try{const t=await this.getConfirmedBlockSignatures(r);t.signatures.length>0&&(n.before=t.signatures[t.signatures.length-1].toString())}catch(t){if(t instanceof Error&&t.message.includes("skipped"))continue;throw t}return(await this.getConfirmedSignaturesForAddress2(t,n)).map(t=>t.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",n),o=Object(p.f)(i,lr);if("error"in o)throw new Error("failed to get confirmed signatures for address: "+o.error.message);return o.result}async getSignaturesForAddress(t,e,r){const n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",n),o=Object(p.f)(i,dr);if("error"in o)throw new Error("failed to get signatures for address: "+o.error.message);return o.result}async getNonceAndContext(t,e){const{context:r,value:n}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==n&&(i=NonceAccount.fromAccountData(n.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(t=>t.value).catch(e=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),n=Object(p.f)(r,Zr);if("error"in n)throw new Error("airdrop to "+t.toBase58()+" failed: "+n.error.message);return n.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await sleep(100);const t=Date.now()-this._blockhashInfo.lastFetch>=3e4;if(null!==this._blockhashInfo.latestBlockhash&&!t)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let t=0;t<50;t++){const t=await this.getLatestBlockhash("finalized");if(r!==t.blockhash)return this._blockhashInfo={latestBlockhash:t,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},t;await sleep(200)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async simulateTransaction(t,e,r){let n;if(t instanceof Transaction){let e=t;n=new Transaction,n.feePayer=e.feePayer,n.instructions=t.instructions,n.nonceInfo=e.nonceInfo,n.signatures=e.signatures}else n=Transaction.populate(t),n._message=n._json=void 0;if(n.nonceInfo&&e)n.sign(...e);else{let t=this._disableBlockhashCaching;for(;;){const r=await this._blockhashWithExpiryBlockHeight(t);if(n.lastValidBlockHeight=r.lastValidBlockHeight,n.recentBlockhash=r.blockhash,!e)break;if(n.sign(...e),!n.signature)throw new Error("!signature");const i=n.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(i)&&!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.simulatedSignatures.push(i);break}t=!0}}const i=n._compile(),o=i.serialize(),s=n._serialize(o).toString("base64"),a={encoding:"base64",commitment:this.commitment};if(r){const t=(Array.isArray(r)?r:i.nonProgramIds()).map(t=>t.toBase58());a.accounts={encoding:"base64",addresses:t}}e&&(a.sigVerify=!0);const u=[s,a],c=await this._rpcRequest("simulateTransaction",u),h=Object(p.f)(c,We);if("error"in h){let t;if("data"in h.error&&(t=h.error.data.logs,t&&Array.isArray(t))){const e="\n    ",r=e+t.join(e);console.error(h.error.message,r)}throw new SendTransactionError("failed to simulate transaction: "+h.error.message,t)}return h.result}async sendTransaction(t,e,r){if(t.nonceInfo)t.sign(...e);else{let r=this._disableBlockhashCaching;for(;;){const n=await this._blockhashWithExpiryBlockHeight(r);if(t.lastValidBlockHeight=n.lastValidBlockHeight,t.recentBlockhash=n.blockhash,t.sign(...e),!t.signature)throw new Error("!signature");const i=t.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.transactionSignatures.push(i);break}r=!0}}const n=t.serialize();return await this.sendRawTransaction(n,r)}async sendRawTransaction(t,e){const r=toBuffer(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},n=e&&e.skipPreflight,i=e&&e.preflightCommitment||this.commitment;e&&e.maxRetries&&(r.maxRetries=e.maxRetries),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);const o=[t,r],s=await this._rpcRequest("sendTransaction",o),a=Object(p.f)(s,Jr);if("error"in a){let t;throw"data"in a.error&&(t=a.error.data.logs),new SendTransactionError("failed to send transaction: "+a.error.message,t)}return a.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{this._rpcWebSocket.notify("ping").catch(()=>{})},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration++,this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==t?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,e])=>{this._subscriptionsByHash[t]={...e,state:"pending"}})):this._updateSubscriptions()}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(t){t instanceof Error&&console.log("Error when closing socket connection: "+t.message)}},500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const t=this._rpcWebSocketGeneration,isCurrentConnectionStillActive=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async t=>{const e=this._subscriptionsByHash[t];if(void 0!==e)switch(e.state){case"pending":case"unsubscribed":if(0===e.callbacks.size)return delete this._subscriptionsByHash[t],"unsubscribed"===e.state&&delete this._subscriptionCallbacksByServerSubscriptionId[e.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{const{args:r,method:n}=e;try{this._subscriptionsByHash[t]={...e,state:"subscribing"};const i=await this._rpcWebSocket.call(n,r);this._subscriptionsByHash[t]={...e,serverSubscriptionId:i,state:"subscribed"},this._subscriptionCallbacksByServerSubscriptionId[i]=e.callbacks,await this._updateSubscriptions()}catch(i){if(i instanceof Error&&console.error(n+" error for argument",r,i.message),!isCurrentConnectionStillActive())return;this._subscriptionsByHash[t]={...e,state:"pending"},await this._updateSubscriptions()}})();break;case"subscribed":0===e.callbacks.size&&await(async()=>{const{serverSubscriptionId:r,unsubscribeMethod:n}=e;if(this._subscriptionsAutoDisposedByRpc.has(r))this._subscriptionsAutoDisposedByRpc.delete(r);else{this._subscriptionsByHash[t]={...e,state:"unsubscribing"};try{await this._rpcWebSocket.call(n,[r])}catch(r){if(r instanceof Error&&console.error(n+" error:",r.message),!isCurrentConnectionStillActive())return;return this._subscriptionsByHash[t]={...e,state:"subscribed"},void await this._updateSubscriptions()}}this._subscriptionsByHash[t]={...e,state:"unsubscribed"},await this._updateSubscriptions()})()}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];void 0!==r&&r.forEach(t=>{try{t(...e)}catch(t){console.error(t)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=Object(p.f)(t,fr);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,n=fastStableStringify$1([t.method,e],!0),i=this._subscriptionsByHash[n];return void 0===i?this._subscriptionsByHash[n]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r];const e=this._subscriptionsByHash[n];assert(void 0!==e,"Could not find a `Subscription` when tearing down client subscription #"+r),e.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const n=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},n)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=Object(p.f)(t,mr);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,n){const i=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",n?{filters:n}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const n=this._buildArgs(["object"==typeof t?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=Object(p.f)(t,Xr);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=Object(p.f)(t,yr);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=Object(p.f)(t,vr);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,n){const i=e||this._commitment;if(i||r||n){let e={};r&&(e.encoding=r),i&&(e.commitment=i),n&&(e=Object.assign(e,n)),t.push(e)}return t}_buildArgsAtLeastConfirmed(t,e,r,n){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,n)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=Object(p.f)(t,wr);"receivedSignature"!==e.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===e.value?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const n=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(t,r)=>{if("status"===t.type){e(t.result,r);try{this.removeSignatureListener(i)}catch(t){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(t,e,r){const{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([t],n,void 0,i),s=this._makeSubscription({callback:(t,r)=>{e(t,r);try{this.removeSignatureListener(s)}catch(t){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return s}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=Object(p.f)(t,_r);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class Keypair{constructor(t){this._keypair=void 0,this._keypair=t||i.a.sign.keyPair()}static generate(){return new Keypair(i.a.sign.keyPair())}static fromSecretKey(t,e){const r=i.a.sign.keyPair.fromSecretKey(t);if(!e||!e.skipValidation){const t=(new TextEncoder).encode("@solana/web3.js-validation-v1"),e=i.a.sign.detached(t,r.secretKey);if(!i.a.sign.detached.verify(t,e,r.publicKey))throw new Error("provided secretKey is invalid")}return new Keypair(r)}static fromSeed(t){return new Keypair(i.a.sign.keyPair.fromSeed(t))}get publicKey(){return new PublicKey(this._keypair.publicKey)}get secretKey(){return this._keypair.secretKey}}const Qr=l.struct([l.u8("numSignatures"),l.u8("padding"),l.u16("signatureOffset"),l.u16("signatureInstructionIndex"),l.u16("publicKeyOffset"),l.u16("publicKeyInstructionIndex"),l.u16("messageDataOffset"),l.u16("messageDataSize"),l.u16("messageInstructionIndex")]);class Ed25519Program{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:n,instructionIndex:i}=t;assert(32===e.length,`Public Key must be 32 bytes but received ${e.length} bytes`),assert(64===n.length,`Signature must be 64 bytes but received ${n.length} bytes`);const s=Qr.span,a=s+e.length,u=a+n.length,c=o.Buffer.alloc(u+r.length),h=null==i?65535:i;return Qr.encode({numSignatures:1,padding:0,signatureOffset:a,signatureInstructionIndex:h,publicKeyOffset:s,publicKeyInstructionIndex:h,messageDataOffset:u,messageDataSize:r.length,messageInstructionIndex:h},c),c.fill(e,s),c.fill(n,a),c.fill(r,u),new TransactionInstruction({keys:[],programId:Ed25519Program.programId,data:c})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:n}=t;assert(64===e.length,`Private key must be 64 bytes but received ${e.length} bytes`);try{const t=Keypair.fromSecretKey(e),o=t.publicKey.toBytes(),s=i.a.sign.detached(r,t.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:s,instructionIndex:n})}catch(t){throw new Error("Error creating instruction; "+t)}}}Ed25519Program.programId=new PublicKey("Ed25519SigVerify111111111111111111111111111");const tn=new PublicKey("StakeConfig11111111111111111111111111111111");class Lockup{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}Lockup.default=new Lockup(0,0,PublicKey.default);const en=Object.freeze({Initialize:{index:0,layout:l.struct([l.u32("instruction"),((t="authorized")=>l.struct([publicKey("staker"),publicKey("withdrawer")],t))(),((t="lockup")=>l.struct([l.ns64("unixTimestamp"),l.ns64("epoch"),publicKey("custodian")],t))()])},Authorize:{index:1,layout:l.struct([l.u32("instruction"),publicKey("newAuthorized"),l.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:l.struct([l.u32("instruction")])},Split:{index:3,layout:l.struct([l.u32("instruction"),l.ns64("lamports")])},Withdraw:{index:4,layout:l.struct([l.u32("instruction"),l.ns64("lamports")])},Deactivate:{index:5,layout:l.struct([l.u32("instruction")])},Merge:{index:7,layout:l.struct([l.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:l.struct([l.u32("instruction"),publicKey("newAuthorized"),l.u32("stakeAuthorizationType"),rustString("authoritySeed"),publicKey("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class StakeProgram{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:n}=t,i=n||Lockup.default,o=encodeData(en.Initialize,{authorized:{staker:toBuffer(r.staker.toBuffer()),withdrawer:toBuffer(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:toBuffer(i.custodian.toBuffer())}}),s={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:be,isSigner:!1,isWritable:!1}],programId:this.programId,data:o};return new TransactionInstruction(s)}static createAccountWithSeed(t){const e=new Transaction;e.add(SystemProgram.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(t){const e=new Transaction;e.add(SystemProgram.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:n}=t,i=encodeData(en.Delegate);return(new Transaction).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:ge,isSigner:!1,isWritable:!1},{pubkey:ve,isSigner:!1,isWritable:!1},{pubkey:tn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:o}=t,s=encodeData(en.Authorize,{newAuthorized:toBuffer(n.toBuffer()),stakeAuthorizationType:i.index}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ge,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&a.push({pubkey:o,isSigner:!1,isWritable:!1}),(new Transaction).add({keys:a,programId:this.programId,data:s})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:s,custodianPubkey:a}=t,u=encodeData(en.AuthorizeWithSeed,{newAuthorized:toBuffer(o.toBuffer()),stakeAuthorizationType:s.index,authoritySeed:n,authorityOwner:toBuffer(i.toBuffer())}),c=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:ge,isSigner:!1,isWritable:!1}];return a&&c.push({pubkey:a,isSigner:!1,isWritable:!1}),(new Transaction).add({keys:c,programId:this.programId,data:u})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=t,o=encodeData(en.Split,{lamports:i});return new TransactionInstruction({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static split(t){const e=new Transaction;return e.add(SystemProgram.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),e.add(this.splitInstruction(t))}static splitWithSeed(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,basePubkey:i,seed:o,lamports:s}=t,a=new Transaction;return a.add(SystemProgram.allocate({accountPubkey:n,basePubkey:i,seed:o,space:this.space,programId:this.programId})),a.add(this.splitInstruction({stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,lamports:s}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:n}=t,i=encodeData(en.Merge);return(new Transaction).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:ge,isSigner:!1,isWritable:!1},{pubkey:ve,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:o}=t,s=encodeData(en.Withdraw,{lamports:i}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:ge,isSigner:!1,isWritable:!1},{pubkey:ve,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&a.push({pubkey:o,isSigner:!1,isWritable:!1}),(new Transaction).add({keys:a,programId:this.programId,data:s})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,n=encodeData(en.Deactivate);return(new Transaction).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ge,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}StakeProgram.programId=new PublicKey("Stake11111111111111111111111111111111111111"),StakeProgram.space=200;const{publicKeyCreate:rn,ecdsaSign:nn}=v.a,sn=l.struct([l.u8("numSignatures"),l.u16("signatureOffset"),l.u8("signatureInstructionIndex"),l.u16("ethAddressOffset"),l.u8("ethAddressInstructionIndex"),l.u16("messageDataOffset"),l.u16("messageDataSize"),l.u8("messageInstructionIndex"),l.blob(20,"ethAddress"),l.blob(64,"signature"),l.u8("recoveryId")]);class Secp256k1Program{constructor(){}static publicKeyToEthAddress(t){assert(64===t.length,`Public key must be 64 bytes but received ${t.length} bytes`);try{return o.Buffer.from(_.a.keccak_256.update(toBuffer(t)).digest()).slice(-20)}catch(t){throw new Error("Error constructing Ethereum address: "+t)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:n,recoveryId:i,instructionIndex:o}=t;return Secp256k1Program.createInstructionWithEthAddress({ethAddress:Secp256k1Program.publicKeyToEthAddress(e),message:r,signature:n,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:n,recoveryId:i,instructionIndex:s=0}=t;let a;a="string"==typeof e?e.startsWith("0x")?o.Buffer.from(e.substr(2),"hex"):o.Buffer.from(e,"hex"):e,assert(20===a.length,`Address must be 20 bytes but received ${a.length} bytes`);const u=12+a.length,c=u+n.length+1,h=o.Buffer.alloc(sn.span+r.length);return sn.encode({numSignatures:1,signatureOffset:u,signatureInstructionIndex:s,ethAddressOffset:12,ethAddressInstructionIndex:s,messageDataOffset:c,messageDataSize:r.length,messageInstructionIndex:s,signature:toBuffer(n),ethAddress:toBuffer(a),recoveryId:i},h),h.fill(toBuffer(r),sn.span),new TransactionInstruction({keys:[],programId:Secp256k1Program.programId,data:h})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:n}=t;assert(32===e.length,`Private key must be 32 bytes but received ${e.length} bytes`);try{const t=toBuffer(e),i=rn(t,!1).slice(1),s=o.Buffer.from(_.a.keccak_256.update(toBuffer(r)).digest()),{signature:a,recid:u}=nn(s,t);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:a,recoveryId:u,instructionIndex:n})}catch(t){throw new Error("Error creating instruction; "+t)}}}Secp256k1Program.programId=new PublicKey("KeccakSecp256k11111111111111111111111111111");new PublicKey("Va1idator1nfo111111111111111111111111111111"),Object(p.o)({name:Object(p.m)(),website:Object(p.k)(Object(p.m)()),details:Object(p.k)(Object(p.m)()),keybaseUsername:Object(p.k)(Object(p.m)())});new PublicKey("Vote111111111111111111111111111111111111111"),l.struct([publicKey("nodePubkey"),publicKey("authorizedWithdrawer"),l.u8("commission"),l.nu64(),l.seq(l.struct([l.nu64("slot"),l.u32("confirmationCount")]),l.offset(l.u32(),-8),"votes"),l.u8("rootSlotValid"),l.nu64("rootSlot"),l.nu64(),l.seq(l.struct([l.nu64("epoch"),publicKey("authorizedVoter")]),l.offset(l.u32(),-8),"authorizedVoters"),l.struct([l.seq(l.struct([publicKey("authorizedPubkey"),l.nu64("epochOfLastAuthorizedSwitch"),l.nu64("targetEpoch")]),32,"buf"),l.nu64("idx"),l.u8("isEmpty")],"priorVoters"),l.nu64(),l.seq(l.struct([l.nu64("epoch"),l.nu64("credits"),l.nu64("prevCredits")]),l.offset(l.u32(),-8),"epochCredits"),l.struct([l.nu64("slot"),l.nu64("timestamp")],"lastTimestamp")]);const an=Object.freeze({InitializeAccount:{index:0,layout:l.struct([l.u32("instruction"),((t="voteInit")=>l.struct([publicKey("nodePubkey"),publicKey("authorizedVoter"),publicKey("authorizedWithdrawer"),l.u8("commission")],t))()])},Authorize:{index:1,layout:l.struct([l.u32("instruction"),publicKey("newAuthorized"),l.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:l.struct([l.u32("instruction"),l.ns64("lamports")])}});Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class VoteProgram{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:n}=t,i=encodeData(an.InitializeAccount,{voteInit:{nodePubkey:toBuffer(n.nodePubkey.toBuffer()),authorizedVoter:toBuffer(n.authorizedVoter.toBuffer()),authorizedWithdrawer:toBuffer(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),o={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:be,isSigner:!1,isWritable:!1},{pubkey:ge,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i};return new TransactionInstruction(o)}static createAccount(t){const e=new Transaction;return e.add(SystemProgram.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=t,o=encodeData(an.Authorize,{newAuthorized:toBuffer(n.toBuffer()),voteAuthorizationType:i.index}),s=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ge,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Transaction).add({keys:s,programId:this.programId,data:o})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=t,o=encodeData(an.Withdraw,{lamports:n}),s=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Transaction).add({keys:s,programId:this.programId,data:o})}}VoteProgram.programId=new PublicKey("Vote111111111111111111111111111111111111111"),VoteProgram.space=3731}).call(this,r(22))},1491:function(t,e,r){"use strict";
/**
 * Support for translating between Uint8Array instances and JavaScript
 * native types.
 *
 * {@link module:Layout~Layout|Layout} is the basis of a class
 * hierarchy that associates property names with sequences of encoded
 * bytes.
 *
 * Layouts are supported for these scalar (numeric) types:
 * * {@link module:Layout~UInt|Unsigned integers in little-endian
 *   format} with {@link module:Layout.u8|8-bit}, {@link
 *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
 *   {@link module:Layout.u32|32-bit}, {@link
 *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
 *   representation ranges;
 * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
 *   format} with {@link module:Layout.u16be|16-bit}, {@link
 *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
 *   {@link module:Layout.u40be|40-bit}, and {@link
 *   module:Layout.u48be|48-bit} representation ranges;
 * * {@link module:Layout~Int|Signed integers in little-endian
 *   format} with {@link module:Layout.s8|8-bit}, {@link
 *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
 *   {@link module:Layout.s32|32-bit}, {@link
 *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
 *   representation ranges;
 * * {@link module:Layout~IntBE|Signed integers in big-endian format}
 *   with {@link module:Layout.s16be|16-bit}, {@link
 *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
 *   {@link module:Layout.s40be|40-bit}, and {@link
 *   module:Layout.s48be|48-bit} representation ranges;
 * * 64-bit integral values that decode to an exact (if magnitude is
 *   less than 2^53) or nearby integral Number in {@link
 *   module:Layout.nu64|unsigned little-endian}, {@link
 *   module:Layout.nu64be|unsigned big-endian}, {@link
 *   module:Layout.ns64|signed little-endian}, and {@link
 *   module:Layout.ns64be|unsigned big-endian} encodings;
 * * 32-bit floating point values with {@link
 *   module:Layout.f32|little-endian} and {@link
 *   module:Layout.f32be|big-endian} representations;
 * * 64-bit floating point values with {@link
 *   module:Layout.f64|little-endian} and {@link
 *   module:Layout.f64be|big-endian} representations;
 * * {@link module:Layout.const|Constants} that take no space in the
 *   encoded expression.
 *
 * and for these aggregate types:
 * * {@link module:Layout.seq|Sequence}s of instances of a {@link
 *   module:Layout~Layout|Layout}, with JavaScript representation as
 *   an Array and constant or data-dependent {@link
 *   module:Layout~Sequence#count|length};
 * * {@link module:Layout.struct|Structure}s that aggregate a
 *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
 *   instances, with JavaScript representation as an Object;
 * * {@link module:Layout.union|Union}s that support multiple {@link
 *   module:Layout~VariantLayout|variant layouts} over a fixed
 *   (padded) or variable (not padded) span of bytes, using an
 *   unsigned integer at the start of the data or a separate {@link
 *   module:Layout.unionLayoutDiscriminator|layout element} to
 *   determine which layout to use when interpreting the buffer
 *   contents;
 * * {@link module:Layout.bits|BitStructure}s that contain a sequence
 *   of individual {@link
 *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
 *   16, 24, or 32-bit unsigned integer starting at the least- or
 *   most-significant bit;
 * * {@link module:Layout.cstr|C strings} of varying length;
 * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
 *   module:Layout~Blob#length|length} raw data.
 *
 * All {@link module:Layout~Layout|Layout} instances are immutable
 * after construction, to prevent internal state from becoming
 * inconsistent.
 *
 * @local Layout
 * @local ExternalLayout
 * @local GreedyCount
 * @local OffsetLayout
 * @local UInt
 * @local UIntBE
 * @local Int
 * @local IntBE
 * @local NearUInt64
 * @local NearUInt64BE
 * @local NearInt64
 * @local NearInt64BE
 * @local Float
 * @local FloatBE
 * @local Double
 * @local DoubleBE
 * @local Sequence
 * @local Structure
 * @local UnionDiscriminator
 * @local UnionLayoutDiscriminator
 * @local Union
 * @local VariantLayout
 * @local BitStructure
 * @local BitField
 * @local Boolean
 * @local Blob
 * @local CString
 * @local Constant
 * @local bindConstructorLayout
 * @module Layout
 * @license MIT
 * @author Peter A. Bigot
 * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
 */Object.defineProperty(e,"__esModule",{value:!0}),e.s16=e.s8=e.nu64be=e.u48be=e.u40be=e.u32be=e.u24be=e.u16be=e.nu64=e.u48=e.u40=e.u32=e.u24=e.u16=e.u8=e.offset=e.greedy=e.Constant=e.UTF8=e.CString=e.Blob=e.Boolean=e.BitField=e.BitStructure=e.VariantLayout=e.Union=e.UnionLayoutDiscriminator=e.UnionDiscriminator=e.Structure=e.Sequence=e.DoubleBE=e.Double=e.FloatBE=e.Float=e.NearInt64BE=e.NearInt64=e.NearUInt64BE=e.NearUInt64=e.IntBE=e.Int=e.UIntBE=e.UInt=e.OffsetLayout=e.GreedyCount=e.ExternalLayout=e.bindConstructorLayout=e.nameWithProperty=e.Layout=e.uint8ArrayToBuffer=e.checkUint8Array=void 0,e.constant=e.utf8=e.cstr=e.blob=e.unionLayoutDiscriminator=e.union=e.seq=e.bits=e.struct=e.f64be=e.f64=e.f32be=e.f32=e.ns64be=e.s48be=e.s40be=e.s32be=e.s24be=e.s16be=e.ns64=e.s48=e.s40=e.s32=e.s24=void 0;const n=r(15);function checkUint8Array(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function uint8ArrayToBuffer(t){return checkUint8Array(t),n.Buffer.from(t.buffer,t.byteOffset,t.length)}e.checkUint8Array=checkUint8Array,e.uint8ArrayToBuffer=uint8ArrayToBuffer;class Layout{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}function nameWithProperty(t,e){return e.property?t+"["+e.property+"]":t}e.Layout=Layout,e.nameWithProperty=nameWithProperty,e.bindConstructorLayout=function bindConstructorLayout(t,e){if("function"!=typeof t)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof Layout))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(t,r){return e.encode(this,t,r)},writable:!0}),Object.defineProperty(t,"decode",{value:(t,r)=>e.decode(t,r),writable:!0})};class ExternalLayout extends Layout{isCount(){throw new Error("ExternalLayout is abstract")}}e.ExternalLayout=ExternalLayout;class GreedyCount extends ExternalLayout{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){checkUint8Array(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}e.GreedyCount=GreedyCount;class OffsetLayout extends ExternalLayout{constructor(t,e=0,r){if(!(t instanceof Layout))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof UInt||this.layout instanceof UIntBE}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}e.OffsetLayout=OffsetLayout;class UInt extends Layout{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return uint8ArrayToBuffer(t).readUIntLE(e,this.span)}encode(t,e,r=0){return uint8ArrayToBuffer(e).writeUIntLE(t,r,this.span),this.span}}e.UInt=UInt;class UIntBE extends Layout{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return uint8ArrayToBuffer(t).readUIntBE(e,this.span)}encode(t,e,r=0){return uint8ArrayToBuffer(e).writeUIntBE(t,r,this.span),this.span}}e.UIntBE=UIntBE;class Int extends Layout{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return uint8ArrayToBuffer(t).readIntLE(e,this.span)}encode(t,e,r=0){return uint8ArrayToBuffer(e).writeIntLE(t,r,this.span),this.span}}e.Int=Int;class IntBE extends Layout{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return uint8ArrayToBuffer(t).readIntBE(e,this.span)}encode(t,e,r=0){return uint8ArrayToBuffer(e).writeIntBE(t,r,this.span),this.span}}e.IntBE=IntBE;const i=Math.pow(2,32);function divmodInt64(t){const e=Math.floor(t/i);return{hi32:e,lo32:t-e*i}}function roundedInt64(t,e){return t*i+e}class NearUInt64 extends Layout{constructor(t){super(8,t)}decode(t,e=0){const r=uint8ArrayToBuffer(t),n=r.readUInt32LE(e);return roundedInt64(r.readUInt32LE(e+4),n)}encode(t,e,r=0){const n=divmodInt64(t),i=uint8ArrayToBuffer(e);return i.writeUInt32LE(n.lo32,r),i.writeUInt32LE(n.hi32,r+4),8}}e.NearUInt64=NearUInt64;class NearUInt64BE extends Layout{constructor(t){super(8,t)}decode(t,e=0){const r=uint8ArrayToBuffer(t);return roundedInt64(r.readUInt32BE(e),r.readUInt32BE(e+4))}encode(t,e,r=0){const n=divmodInt64(t),i=uint8ArrayToBuffer(e);return i.writeUInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}e.NearUInt64BE=NearUInt64BE;class NearInt64 extends Layout{constructor(t){super(8,t)}decode(t,e=0){const r=uint8ArrayToBuffer(t),n=r.readUInt32LE(e);return roundedInt64(r.readInt32LE(e+4),n)}encode(t,e,r=0){const n=divmodInt64(t),i=uint8ArrayToBuffer(e);return i.writeUInt32LE(n.lo32,r),i.writeInt32LE(n.hi32,r+4),8}}e.NearInt64=NearInt64;class NearInt64BE extends Layout{constructor(t){super(8,t)}decode(t,e=0){const r=uint8ArrayToBuffer(t);return roundedInt64(r.readInt32BE(e),r.readUInt32BE(e+4))}encode(t,e,r=0){const n=divmodInt64(t),i=uint8ArrayToBuffer(e);return i.writeInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}e.NearInt64BE=NearInt64BE;class Float extends Layout{constructor(t){super(4,t)}decode(t,e=0){return uint8ArrayToBuffer(t).readFloatLE(e)}encode(t,e,r=0){return uint8ArrayToBuffer(e).writeFloatLE(t,r),4}}e.Float=Float;class FloatBE extends Layout{constructor(t){super(4,t)}decode(t,e=0){return uint8ArrayToBuffer(t).readFloatBE(e)}encode(t,e,r=0){return uint8ArrayToBuffer(e).writeFloatBE(t,r),4}}e.FloatBE=FloatBE;class Double extends Layout{constructor(t){super(8,t)}decode(t,e=0){return uint8ArrayToBuffer(t).readDoubleLE(e)}encode(t,e,r=0){return uint8ArrayToBuffer(e).writeDoubleLE(t,r),8}}e.Double=Double;class DoubleBE extends Layout{constructor(t){super(8,t)}decode(t,e=0){return uint8ArrayToBuffer(t).readDoubleBE(e)}encode(t,e,r=0){return uint8ArrayToBuffer(e).writeDoubleBE(t,r),8}}e.DoubleBE=DoubleBE;class Sequence extends Layout{constructor(t,e,r){if(!(t instanceof Layout))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof ExternalLayout&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(e instanceof ExternalLayout)&&0<t.span&&(n=e*t.span),super(n,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof ExternalLayout&&(n=n.decode(t,e)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;for(;i<n;)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e=0){const r=[];let n=0,i=this.count;for(i instanceof ExternalLayout&&(i=i.decode(t,e));n<i;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),n+=1;return r}encode(t,e,r=0){const n=this.elementLayout,i=t.reduce((t,i)=>t+n.encode(i,e,r+t),0);return this.count instanceof ExternalLayout&&this.count.encode(t.length,e,r),i}}e.Sequence=Sequence;class Structure extends Layout{constructor(t,e,r){if(!Array.isArray(t)||!t.reduce((t,e)=>t&&e instanceof Layout,!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof e&&void 0===r&&(r=e,e=void 0);for(const e of t)if(0>e.span&&void 0===e.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=t.reduce((t,e)=>t+e.getSpan(),0)}catch(t){}super(n,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((r,n)=>{const i=n.getSpan(t,e);return e+=i,r+i},0)}catch(t){throw new RangeError("indeterminate span")}return r}decode(t,e=0){checkUint8Array(t);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(t,e)),e+=n.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const n=r;let i=0,o=0;for(const n of this.fields){let s=n.span;if(o=0<s?s:0,void 0!==n.property){const i=t[n.property];void 0!==i&&(o=n.encode(i,e,r),0>s&&(s=n.getSpan(e,r)))}i=r,r+=s}return i+o-n}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if("string"!=typeof t)throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}e.Structure=Structure;class UnionDiscriminator{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}e.UnionDiscriminator=UnionDiscriminator;class UnionLayoutDiscriminator extends UnionDiscriminator{constructor(t,e){if(!(t instanceof ExternalLayout&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}e.UnionLayoutDiscriminator=UnionLayoutDiscriminator;class Union extends Layout{constructor(t,e,r){let n;if(t instanceof UInt||t instanceof UIntBE)n=new UnionLayoutDiscriminator(new OffsetLayout(t));else if(t instanceof ExternalLayout&&t.isCount())n=new UnionLayoutDiscriminator(t);else{if(!(t instanceof UnionDiscriminator))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");n=t}if(void 0===e&&(e=null),!(null===e||e instanceof Layout))throw new TypeError("defaultLayout must be null or a Layout");if(null!==e){if(0>e.span)throw new Error("defaultLayout must have constant span");void 0===e.property&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof UInt||t instanceof UIntBE)&&(i+=n.layout.span)),super(i,r),this.discriminator=n,this.usesPrefixDiscriminator=t instanceof UInt||t instanceof UIntBE,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(t){return o(t)},this.configGetSourceVariant=function(t){o=t.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const n=this.discriminator,i=n.decode(t,e),o=this.registry[i];if(void 0===o){const o=this.defaultLayout;let s=0;this.usesPrefixDiscriminator&&(s=n.layout.span),r=this.makeDestinationObject(),r[n.property]=i,r[o.property]=o.decode(t,e+s)}else r=o.decode(t,e);return r}encode(t,e,r=0){const n=this.getSourceVariant(t);if(void 0===n){const n=this.discriminator,i=this.defaultLayout;let o=0;return this.usesPrefixDiscriminator&&(o=n.layout.span),n.encode(t[n.property],e,r),o+i.encode(t[i.property],e,r+o)}return n.encode(t,e,r)}addVariant(t,e,r){const n=new VariantLayout(this,t,e,r);return this.registry[t]=n,n}getVariant(t,e=0){let r;return r=t instanceof Uint8Array?this.discriminator.decode(t,e):t,this.registry[r]}}e.Union=Union;class VariantLayout extends Layout{constructor(t,e,r,n){if(!(t instanceof Union))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof Layout))throw new TypeError("layout must be a Layout");if(null!==t.defaultLayout&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof n)throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,n),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let n=0;return this.layout&&(n=this.layout.getSpan(t,e+r)),r+n}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=n;if(this.layout&&(this.layout.encode(t[this.property],e,r+n),i+=this.layout.getSpan(e,r+n),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}function fixBitwiseResult(t){return 0>t&&(t+=4294967296),t}e.VariantLayout=VariantLayout;class BitStructure extends Layout{constructor(t,e,r){if(!(t instanceof UInt||t instanceof UIntBE))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof e&&void 0===r&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let n=0;this._packedSetValue=function(t){return n=fixBitwiseResult(t),this},this._packedGetValue=function(){return n}}decode(t,e=0){const r=this.makeDestinationObject(),n=this.word.decode(t,e);this._packedSetValue(n);for(const e of this.fields)void 0!==e.property&&(r[e.property]=e.decode(t));return r}encode(t,e,r=0){const n=this.word.decode(e,r);this._packedSetValue(n);for(const e of this.fields)if(void 0!==e.property){const r=t[e.property];void 0!==r&&e.encode(r)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new BitField(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new Boolean(this,t);return this.fields.push(e),e}fieldFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}e.BitStructure=BitStructure;class BitField{constructor(t,e,r){if(!(t instanceof BitStructure))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const n=8*t.span,i=t.fields.reduce((t,e)=>t+e.bits,0);if(e+i>n)throw new Error("bits too long for span remainder ("+(n-i)+" of "+n+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,32===e&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=n-i-e),this.wordMask=fixBitwiseResult(this.valueMask<<this.start),this.property=r}decode(t,e){return fixBitwiseResult(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(t){if("number"!=typeof t||!Number.isInteger(t)||t!==fixBitwiseResult(t&this.valueMask))throw new TypeError(nameWithProperty("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=fixBitwiseResult(t<<this.start);this.container._packedSetValue(fixBitwiseResult(e&~this.wordMask)|r)}}e.BitField=BitField;class Boolean extends BitField{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){"boolean"==typeof t&&(t=+t),super.encode(t)}}e.Boolean=Boolean;class Blob extends Layout{constructor(t,e){if(!(t instanceof ExternalLayout&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof ExternalLayout||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),uint8ArrayToBuffer(t).slice(e,e+r)}encode(t,e,r){let n=this.length;if(this.length instanceof ExternalLayout&&(n=t.length),!(t instanceof Uint8Array&&n===t.length))throw new TypeError(nameWithProperty("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>e.length)throw new RangeError("encoding overruns Uint8Array");const i=uint8ArrayToBuffer(t);return uint8ArrayToBuffer(e).write(i.toString("hex"),r,n,"hex"),this.length instanceof ExternalLayout&&this.length.encode(n,e,r),n}}e.Blob=Blob;class CString extends Layout{constructor(t){super(-1,t)}getSpan(t,e=0){checkUint8Array(t);let r=e;for(;r<t.length&&0!==t[r];)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return uint8ArrayToBuffer(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){"string"!=typeof t&&(t=String(t));const i=n.Buffer.from(t,"utf8"),o=i.length;if(r+o>e.length)throw new RangeError("encoding overruns Buffer");const s=uint8ArrayToBuffer(e);return i.copy(s,r),s[r+o]=0,o+1}}e.CString=CString;class UTF8 extends Layout{constructor(t,e){if("string"==typeof t&&void 0===e&&(e=t,t=void 0),void 0===t)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return checkUint8Array(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return uint8ArrayToBuffer(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){"string"!=typeof t&&(t=String(t));const i=n.Buffer.from(t,"utf8"),o=i.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(r+o>e.length)throw new RangeError("encoding overruns Buffer");return i.copy(uint8ArrayToBuffer(e),r),o}}e.UTF8=UTF8;class Constant extends Layout{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}e.Constant=Constant,e.greedy=(t,e)=>new GreedyCount(t,e),e.offset=(t,e,r)=>new OffsetLayout(t,e,r),e.u8=t=>new UInt(1,t),e.u16=t=>new UInt(2,t),e.u24=t=>new UInt(3,t),e.u32=t=>new UInt(4,t),e.u40=t=>new UInt(5,t),e.u48=t=>new UInt(6,t),e.nu64=t=>new NearUInt64(t),e.u16be=t=>new UIntBE(2,t),e.u24be=t=>new UIntBE(3,t),e.u32be=t=>new UIntBE(4,t),e.u40be=t=>new UIntBE(5,t),e.u48be=t=>new UIntBE(6,t),e.nu64be=t=>new NearUInt64BE(t),e.s8=t=>new Int(1,t),e.s16=t=>new Int(2,t),e.s24=t=>new Int(3,t),e.s32=t=>new Int(4,t),e.s40=t=>new Int(5,t),e.s48=t=>new Int(6,t),e.ns64=t=>new NearInt64(t),e.s16be=t=>new IntBE(2,t),e.s24be=t=>new IntBE(3,t),e.s32be=t=>new IntBE(4,t),e.s40be=t=>new IntBE(5,t),e.s48be=t=>new IntBE(6,t),e.ns64be=t=>new NearInt64BE(t),e.f32=t=>new Float(t),e.f32be=t=>new FloatBE(t),e.f64=t=>new Double(t),e.f64be=t=>new DoubleBE(t),e.struct=(t,e,r)=>new Structure(t,e,r),e.bits=(t,e,r)=>new BitStructure(t,e,r),e.seq=(t,e,r)=>new Sequence(t,e,r),e.union=(t,e,r)=>new Union(t,e,r),e.unionLayoutDiscriminator=(t,e)=>new UnionLayoutDiscriminator(t,e),e.blob=(t,e)=>new Blob(t,e),e.cstr=t=>new CString(t),e.utf8=(t,e)=>new UTF8(t,e),e.constant=(t,e)=>new Constant(t,e)},1492:function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,i="~";function Events(){}function EE(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function addListener(t,e,r,n,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new EE(r,n||t,o),a=i?i+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],s]:t._events[a].push(s):(t._events[a]=s,t._eventsCount++),t}function clearEvent(t,e){0==--t._eventsCount?t._events=new Events:delete t._events[e]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(i=!1)),EventEmitter.prototype.eventNames=function eventNames(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)n.call(t,e)&&r.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},EventEmitter.prototype.listeners=function listeners(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,s=new Array(o);n<o;n++)s[n]=r[n].fn;return s},EventEmitter.prototype.listenerCount=function listenerCount(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},EventEmitter.prototype.emit=function emit(t,e,r,n,o,s){var a=i?i+t:t;if(!this._events[a])return!1;var u,c,h=this._events[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,r),!0;case 4:return h.fn.call(h.context,e,r,n),!0;case 5:return h.fn.call(h.context,e,r,n,o),!0;case 6:return h.fn.call(h.context,e,r,n,o,s),!0}for(c=1,u=new Array(l-1);c<l;c++)u[c-1]=arguments[c];h.fn.apply(h.context,u)}else{var d,p=h.length;for(c=0;c<p;c++)switch(h[c].once&&this.removeListener(t,h[c].fn,void 0,!0),l){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,e);break;case 3:h[c].fn.call(h[c].context,e,r);break;case 4:h[c].fn.call(h[c].context,e,r,n);break;default:if(!u)for(d=1,u=new Array(l-1);d<l;d++)u[d-1]=arguments[d];h[c].fn.apply(h[c].context,u)}}return!0},EventEmitter.prototype.on=function on(t,e,r){return addListener(this,t,e,r,!1)},EventEmitter.prototype.once=function once(t,e,r){return addListener(this,t,e,r,!0)},EventEmitter.prototype.removeListener=function removeListener(t,e,r,n){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return clearEvent(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||n&&!s.once||r&&s.context!==r||clearEvent(this,o);else{for(var a=0,u=[],c=s.length;a<c;a++)(s[a].fn!==e||n&&!s[a].once||r&&s[a].context!==r)&&u.push(s[a]);u.length?this._events[o]=1===u.length?u[0]:u:clearEvent(this,o)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(t){var e;return t?(e=i?i+t:t,this._events[e]&&clearEvent(this,e)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=i,EventEmitter.EventEmitter=EventEmitter,t.exports=EventEmitter},1512:function(t,e,r){"use strict";var n;r.r(e);var i=new Uint8Array(16);function rng(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=function validate(t){return"string"==typeof t&&o.test(t)},a=[],u=0;u<256;++u)a.push((u+256).toString(16).substr(1));var c,h,l=function stringify(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(a[t[e+0]]+a[t[e+1]]+a[t[e+2]]+a[t[e+3]]+"-"+a[t[e+4]]+a[t[e+5]]+"-"+a[t[e+6]]+a[t[e+7]]+"-"+a[t[e+8]]+a[t[e+9]]+"-"+a[t[e+10]]+a[t[e+11]]+a[t[e+12]]+a[t[e+13]]+a[t[e+14]]+a[t[e+15]]).toLowerCase();if(!s(r))throw TypeError("Stringified UUID is invalid");return r},d=0,p=0;var m=function v1(t,e,r){var n=e&&r||0,i=e||new Array(16),o=(t=t||{}).node||c,s=void 0!==t.clockseq?t.clockseq:h;if(null==o||null==s){var a=t.random||(t.rng||rng)();null==o&&(o=c=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==s&&(s=h=16383&(a[6]<<8|a[7]))}var u=void 0!==t.msecs?t.msecs:Date.now(),m=void 0!==t.nsecs?t.nsecs:p+1,g=u-d+(m-p)/1e4;if(g<0&&void 0===t.clockseq&&(s=s+1&16383),(g<0||u>d)&&void 0===t.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=u,p=m,h=s;var y=(1e4*(268435455&(u+=122192928e5))+m)%4294967296;i[n++]=y>>>24&255,i[n++]=y>>>16&255,i[n++]=y>>>8&255,i[n++]=255&y;var b=u/4294967296*1e4&268435455;i[n++]=b>>>8&255,i[n++]=255&b,i[n++]=b>>>24&15|16,i[n++]=b>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(var v=0;v<6;++v)i[n+v]=o[v];return e||l(i)};var g=function parse(t){if(!s(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=255&e,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=255&e,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=255&e,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=255&e,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=255&e,r};var v35=function(t,e,r){function generateUUID(t,n,i,o){if("string"==typeof t&&(t=function stringToBytes(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}(t)),"string"==typeof n&&(n=g(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+t.length);if(s.set(n),s.set(t,n.length),(s=r(s))[6]=15&s[6]|e,s[8]=63&s[8]|128,i){o=o||0;for(var a=0;a<16;++a)i[o+a]=s[a];return i}return l(s)}try{generateUUID.name=t}catch(t){}return generateUUID.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",generateUUID.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",generateUUID};function getOutputLength(t){return 14+(t+64>>>9<<4)+1}function safeAdd(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}function md5cmn(t,e,r,n,i,o){return safeAdd(function bitRotateLeft(t,e){return t<<e|t>>>32-e}(safeAdd(safeAdd(e,t),safeAdd(n,o)),i),r)}function md5ff(t,e,r,n,i,o,s){return md5cmn(e&r|~e&n,t,e,i,o,s)}function md5gg(t,e,r,n,i,o,s){return md5cmn(e&n|r&~n,t,e,i,o,s)}function md5hh(t,e,r,n,i,o,s){return md5cmn(e^r^n,t,e,i,o,s)}function md5ii(t,e,r,n,i,o,s){return md5cmn(r^(e|~n),t,e,i,o,s)}var y=v35("v3",48,(function md5(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return function md5ToHexEncodedArray(t){for(var e=[],r=32*t.length,n=0;n<r;n+=8){var i=t[n>>5]>>>n%32&255,o=parseInt("0123456789abcdef".charAt(i>>>4&15)+"0123456789abcdef".charAt(15&i),16);e.push(o)}return e}(function wordsToMd5(t,e){t[e>>5]|=128<<e%32,t[getOutputLength(e)-1]=e;for(var r=1732584193,n=-271733879,i=-1732584194,o=271733878,s=0;s<t.length;s+=16){var a=r,u=n,c=i,h=o;r=md5ff(r,n,i,o,t[s],7,-680876936),o=md5ff(o,r,n,i,t[s+1],12,-389564586),i=md5ff(i,o,r,n,t[s+2],17,606105819),n=md5ff(n,i,o,r,t[s+3],22,-1044525330),r=md5ff(r,n,i,o,t[s+4],7,-176418897),o=md5ff(o,r,n,i,t[s+5],12,1200080426),i=md5ff(i,o,r,n,t[s+6],17,-1473231341),n=md5ff(n,i,o,r,t[s+7],22,-45705983),r=md5ff(r,n,i,o,t[s+8],7,1770035416),o=md5ff(o,r,n,i,t[s+9],12,-1958414417),i=md5ff(i,o,r,n,t[s+10],17,-42063),n=md5ff(n,i,o,r,t[s+11],22,-1990404162),r=md5ff(r,n,i,o,t[s+12],7,1804603682),o=md5ff(o,r,n,i,t[s+13],12,-40341101),i=md5ff(i,o,r,n,t[s+14],17,-1502002290),n=md5ff(n,i,o,r,t[s+15],22,1236535329),r=md5gg(r,n,i,o,t[s+1],5,-165796510),o=md5gg(o,r,n,i,t[s+6],9,-1069501632),i=md5gg(i,o,r,n,t[s+11],14,643717713),n=md5gg(n,i,o,r,t[s],20,-373897302),r=md5gg(r,n,i,o,t[s+5],5,-701558691),o=md5gg(o,r,n,i,t[s+10],9,38016083),i=md5gg(i,o,r,n,t[s+15],14,-660478335),n=md5gg(n,i,o,r,t[s+4],20,-405537848),r=md5gg(r,n,i,o,t[s+9],5,568446438),o=md5gg(o,r,n,i,t[s+14],9,-1019803690),i=md5gg(i,o,r,n,t[s+3],14,-187363961),n=md5gg(n,i,o,r,t[s+8],20,1163531501),r=md5gg(r,n,i,o,t[s+13],5,-1444681467),o=md5gg(o,r,n,i,t[s+2],9,-51403784),i=md5gg(i,o,r,n,t[s+7],14,1735328473),n=md5gg(n,i,o,r,t[s+12],20,-1926607734),r=md5hh(r,n,i,o,t[s+5],4,-378558),o=md5hh(o,r,n,i,t[s+8],11,-2022574463),i=md5hh(i,o,r,n,t[s+11],16,1839030562),n=md5hh(n,i,o,r,t[s+14],23,-35309556),r=md5hh(r,n,i,o,t[s+1],4,-1530992060),o=md5hh(o,r,n,i,t[s+4],11,1272893353),i=md5hh(i,o,r,n,t[s+7],16,-155497632),n=md5hh(n,i,o,r,t[s+10],23,-1094730640),r=md5hh(r,n,i,o,t[s+13],4,681279174),o=md5hh(o,r,n,i,t[s],11,-358537222),i=md5hh(i,o,r,n,t[s+3],16,-722521979),n=md5hh(n,i,o,r,t[s+6],23,76029189),r=md5hh(r,n,i,o,t[s+9],4,-640364487),o=md5hh(o,r,n,i,t[s+12],11,-421815835),i=md5hh(i,o,r,n,t[s+15],16,530742520),n=md5hh(n,i,o,r,t[s+2],23,-995338651),r=md5ii(r,n,i,o,t[s],6,-198630844),o=md5ii(o,r,n,i,t[s+7],10,1126891415),i=md5ii(i,o,r,n,t[s+14],15,-1416354905),n=md5ii(n,i,o,r,t[s+5],21,-57434055),r=md5ii(r,n,i,o,t[s+12],6,1700485571),o=md5ii(o,r,n,i,t[s+3],10,-1894986606),i=md5ii(i,o,r,n,t[s+10],15,-1051523),n=md5ii(n,i,o,r,t[s+1],21,-2054922799),r=md5ii(r,n,i,o,t[s+8],6,1873313359),o=md5ii(o,r,n,i,t[s+15],10,-30611744),i=md5ii(i,o,r,n,t[s+6],15,-1560198380),n=md5ii(n,i,o,r,t[s+13],21,1309151649),r=md5ii(r,n,i,o,t[s+4],6,-145523070),o=md5ii(o,r,n,i,t[s+11],10,-1120210379),i=md5ii(i,o,r,n,t[s+2],15,718787259),n=md5ii(n,i,o,r,t[s+9],21,-343485551),r=safeAdd(r,a),n=safeAdd(n,u),i=safeAdd(i,c),o=safeAdd(o,h)}return[r,n,i,o]}(function bytesToWords(t){if(0===t.length)return[];for(var e=8*t.length,r=new Uint32Array(getOutputLength(e)),n=0;n<e;n+=8)r[n>>5]|=(255&t[n/8])<<n%32;return r}(t),8*t.length))}));var b=function v4(t,e,r){var n=(t=t||{}).random||(t.rng||rng)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(var i=0;i<16;++i)e[r+i]=n[i];return e}return l(n)};function f(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function ROTL(t,e){return t<<e|t>>>32-e}var v=v35("v5",80,(function sha1(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var n=unescape(encodeURIComponent(t));t=[];for(var i=0;i<n.length;++i)t.push(n.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var o=t.length/4+2,s=Math.ceil(o/16),a=new Array(s),u=0;u<s;++u){for(var c=new Uint32Array(16),h=0;h<16;++h)c[h]=t[64*u+4*h]<<24|t[64*u+4*h+1]<<16|t[64*u+4*h+2]<<8|t[64*u+4*h+3];a[u]=c}a[s-1][14]=8*(t.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(t.length-1)&4294967295;for(var l=0;l<s;++l){for(var d=new Uint32Array(80),p=0;p<16;++p)d[p]=a[l][p];for(var m=16;m<80;++m)d[m]=ROTL(d[m-3]^d[m-8]^d[m-14]^d[m-16],1);for(var g=r[0],y=r[1],b=r[2],v=r[3],w=r[4],_=0;_<80;++_){var k=Math.floor(_/20),B=ROTL(g,5)+f(k,y,b,v)+w+e[k]+d[_]>>>0;w=v,v=b,b=ROTL(y,30)>>>0,y=g,g=B}r[0]=r[0]+g>>>0,r[1]=r[1]+y>>>0,r[2]=r[2]+b>>>0,r[3]=r[3]+v>>>0,r[4]=r[4]+w>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}));var w=function version_version(t){if(!s(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)};r.d(e,"v1",(function(){return m})),r.d(e,"v3",(function(){return y})),r.d(e,"v4",(function(){return b})),r.d(e,"v5",(function(){return v})),r.d(e,"NIL",(function(){return"00000000-0000-0000-0000-000000000000"})),r.d(e,"version",(function(){return w})),r.d(e,"validate",(function(){return s})),r.d(e,"stringify",(function(){return l})),r.d(e,"parse",(function(){return g}))},1575:function(t,e,r){!function(t){"use strict";var gf=function(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;e++)r[e]=t[e];return r},randombytes=function(){throw new Error("no PRNG")},e=new Uint8Array(16),n=new Uint8Array(32);n[0]=9;var i=gf(),o=gf([1]),s=gf([56129,1]),a=gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),c=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),l=gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ts64(t,e,r,n){t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r,t[e+4]=n>>24&255,t[e+5]=n>>16&255,t[e+6]=n>>8&255,t[e+7]=255&n}function vn(t,e,r,n,i){var o,s=0;for(o=0;o<i;o++)s|=t[e+o]^r[n+o];return(1&s-1>>>8)-1}function crypto_verify_16(t,e,r,n){return vn(t,e,r,n,16)}function crypto_verify_32(t,e,r,n){return vn(t,e,r,n,32)}function crypto_core_salsa20(t,e,r,n){!function core_salsa20(t,e,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,u=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,c=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,h=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,d=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,p=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,m=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,b=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,w=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,_=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,k=o,B=s,j=a,O=u,E=c,x=h,I=l,P=d,N=p,R=m,T=g,L=y,C=b,U=v,z=w,q=_,D=0;D<20;D+=2)k^=(i=(C^=(i=(N^=(i=(E^=(i=k+C|0)<<7|i>>>25)+k|0)<<9|i>>>23)+E|0)<<13|i>>>19)+N|0)<<18|i>>>14,x^=(i=(B^=(i=(U^=(i=(R^=(i=x+B|0)<<7|i>>>25)+x|0)<<9|i>>>23)+R|0)<<13|i>>>19)+U|0)<<18|i>>>14,T^=(i=(I^=(i=(j^=(i=(z^=(i=T+I|0)<<7|i>>>25)+T|0)<<9|i>>>23)+z|0)<<13|i>>>19)+j|0)<<18|i>>>14,q^=(i=(L^=(i=(P^=(i=(O^=(i=q+L|0)<<7|i>>>25)+q|0)<<9|i>>>23)+O|0)<<13|i>>>19)+P|0)<<18|i>>>14,k^=(i=(O^=(i=(j^=(i=(B^=(i=k+O|0)<<7|i>>>25)+k|0)<<9|i>>>23)+B|0)<<13|i>>>19)+j|0)<<18|i>>>14,x^=(i=(E^=(i=(P^=(i=(I^=(i=x+E|0)<<7|i>>>25)+x|0)<<9|i>>>23)+I|0)<<13|i>>>19)+P|0)<<18|i>>>14,T^=(i=(R^=(i=(N^=(i=(L^=(i=T+R|0)<<7|i>>>25)+T|0)<<9|i>>>23)+L|0)<<13|i>>>19)+N|0)<<18|i>>>14,q^=(i=(z^=(i=(U^=(i=(C^=(i=q+z|0)<<7|i>>>25)+q|0)<<9|i>>>23)+C|0)<<13|i>>>19)+U|0)<<18|i>>>14;k=k+o|0,B=B+s|0,j=j+a|0,O=O+u|0,E=E+c|0,x=x+h|0,I=I+l|0,P=P+d|0,N=N+p|0,R=R+m|0,T=T+g|0,L=L+y|0,C=C+b|0,U=U+v|0,z=z+w|0,q=q+_|0,t[0]=k>>>0&255,t[1]=k>>>8&255,t[2]=k>>>16&255,t[3]=k>>>24&255,t[4]=B>>>0&255,t[5]=B>>>8&255,t[6]=B>>>16&255,t[7]=B>>>24&255,t[8]=j>>>0&255,t[9]=j>>>8&255,t[10]=j>>>16&255,t[11]=j>>>24&255,t[12]=O>>>0&255,t[13]=O>>>8&255,t[14]=O>>>16&255,t[15]=O>>>24&255,t[16]=E>>>0&255,t[17]=E>>>8&255,t[18]=E>>>16&255,t[19]=E>>>24&255,t[20]=x>>>0&255,t[21]=x>>>8&255,t[22]=x>>>16&255,t[23]=x>>>24&255,t[24]=I>>>0&255,t[25]=I>>>8&255,t[26]=I>>>16&255,t[27]=I>>>24&255,t[28]=P>>>0&255,t[29]=P>>>8&255,t[30]=P>>>16&255,t[31]=P>>>24&255,t[32]=N>>>0&255,t[33]=N>>>8&255,t[34]=N>>>16&255,t[35]=N>>>24&255,t[36]=R>>>0&255,t[37]=R>>>8&255,t[38]=R>>>16&255,t[39]=R>>>24&255,t[40]=T>>>0&255,t[41]=T>>>8&255,t[42]=T>>>16&255,t[43]=T>>>24&255,t[44]=L>>>0&255,t[45]=L>>>8&255,t[46]=L>>>16&255,t[47]=L>>>24&255,t[48]=C>>>0&255,t[49]=C>>>8&255,t[50]=C>>>16&255,t[51]=C>>>24&255,t[52]=U>>>0&255,t[53]=U>>>8&255,t[54]=U>>>16&255,t[55]=U>>>24&255,t[56]=z>>>0&255,t[57]=z>>>8&255,t[58]=z>>>16&255,t[59]=z>>>24&255,t[60]=q>>>0&255,t[61]=q>>>8&255,t[62]=q>>>16&255,t[63]=q>>>24&255}(t,e,r,n)}function crypto_core_hsalsa20(t,e,r,n){!function core_hsalsa20(t,e,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,u=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,c=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,h=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,d=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,p=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,m=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,b=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,w=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,_=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,k=0;k<20;k+=2)o^=(i=(b^=(i=(p^=(i=(c^=(i=o+b|0)<<7|i>>>25)+o|0)<<9|i>>>23)+c|0)<<13|i>>>19)+p|0)<<18|i>>>14,h^=(i=(s^=(i=(v^=(i=(m^=(i=h+s|0)<<7|i>>>25)+h|0)<<9|i>>>23)+m|0)<<13|i>>>19)+v|0)<<18|i>>>14,g^=(i=(l^=(i=(a^=(i=(w^=(i=g+l|0)<<7|i>>>25)+g|0)<<9|i>>>23)+w|0)<<13|i>>>19)+a|0)<<18|i>>>14,_^=(i=(y^=(i=(d^=(i=(u^=(i=_+y|0)<<7|i>>>25)+_|0)<<9|i>>>23)+u|0)<<13|i>>>19)+d|0)<<18|i>>>14,o^=(i=(u^=(i=(a^=(i=(s^=(i=o+u|0)<<7|i>>>25)+o|0)<<9|i>>>23)+s|0)<<13|i>>>19)+a|0)<<18|i>>>14,h^=(i=(c^=(i=(d^=(i=(l^=(i=h+c|0)<<7|i>>>25)+h|0)<<9|i>>>23)+l|0)<<13|i>>>19)+d|0)<<18|i>>>14,g^=(i=(m^=(i=(p^=(i=(y^=(i=g+m|0)<<7|i>>>25)+g|0)<<9|i>>>23)+y|0)<<13|i>>>19)+p|0)<<18|i>>>14,_^=(i=(w^=(i=(v^=(i=(b^=(i=_+w|0)<<7|i>>>25)+_|0)<<9|i>>>23)+b|0)<<13|i>>>19)+v|0)<<18|i>>>14;t[0]=o>>>0&255,t[1]=o>>>8&255,t[2]=o>>>16&255,t[3]=o>>>24&255,t[4]=h>>>0&255,t[5]=h>>>8&255,t[6]=h>>>16&255,t[7]=h>>>24&255,t[8]=g>>>0&255,t[9]=g>>>8&255,t[10]=g>>>16&255,t[11]=g>>>24&255,t[12]=_>>>0&255,t[13]=_>>>8&255,t[14]=_>>>16&255,t[15]=_>>>24&255,t[16]=l>>>0&255,t[17]=l>>>8&255,t[18]=l>>>16&255,t[19]=l>>>24&255,t[20]=d>>>0&255,t[21]=d>>>8&255,t[22]=d>>>16&255,t[23]=d>>>24&255,t[24]=p>>>0&255,t[25]=p>>>8&255,t[26]=p>>>16&255,t[27]=p>>>24&255,t[28]=m>>>0&255,t[29]=m>>>8&255,t[30]=m>>>16&255,t[31]=m>>>24&255}(t,e,r,n)}var d=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function crypto_stream_salsa20_xor(t,e,r,n,i,o,s){var a,u,c=new Uint8Array(16),h=new Uint8Array(64);for(u=0;u<16;u++)c[u]=0;for(u=0;u<8;u++)c[u]=o[u];for(;i>=64;){for(crypto_core_salsa20(h,c,s,d),u=0;u<64;u++)t[e+u]=r[n+u]^h[u];for(a=1,u=8;u<16;u++)a=a+(255&c[u])|0,c[u]=255&a,a>>>=8;i-=64,e+=64,n+=64}if(i>0)for(crypto_core_salsa20(h,c,s,d),u=0;u<i;u++)t[e+u]=r[n+u]^h[u];return 0}function crypto_stream_salsa20(t,e,r,n,i){var o,s,a=new Uint8Array(16),u=new Uint8Array(64);for(s=0;s<16;s++)a[s]=0;for(s=0;s<8;s++)a[s]=n[s];for(;r>=64;){for(crypto_core_salsa20(u,a,i,d),s=0;s<64;s++)t[e+s]=u[s];for(o=1,s=8;s<16;s++)o=o+(255&a[s])|0,a[s]=255&o,o>>>=8;r-=64,e+=64}if(r>0)for(crypto_core_salsa20(u,a,i,d),s=0;s<r;s++)t[e+s]=u[s];return 0}function crypto_stream(t,e,r,n,i){var o=new Uint8Array(32);crypto_core_hsalsa20(o,n,i,d);for(var s=new Uint8Array(8),a=0;a<8;a++)s[a]=n[a+16];return crypto_stream_salsa20(t,e,r,s,o)}function crypto_stream_xor(t,e,r,n,i,o,s){var a=new Uint8Array(32);crypto_core_hsalsa20(a,o,s,d);for(var u=new Uint8Array(8),c=0;c<8;c++)u[c]=o[c+16];return crypto_stream_salsa20_xor(t,e,r,n,i,u,a)}var poly1305=function(t){var e,r,n,i,o,s,a,u;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,e=255&t[0]|(255&t[1])<<8,this.r[0]=8191&e,r=255&t[2]|(255&t[3])<<8,this.r[1]=8191&(e>>>13|r<<3),n=255&t[4]|(255&t[5])<<8,this.r[2]=7939&(r>>>10|n<<6),i=255&t[6]|(255&t[7])<<8,this.r[3]=8191&(n>>>7|i<<9),o=255&t[8]|(255&t[9])<<8,this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,s=255&t[10]|(255&t[11])<<8,this.r[6]=8191&(o>>>14|s<<2),a=255&t[12]|(255&t[13])<<8,this.r[7]=8065&(s>>>11|a<<5),u=255&t[14]|(255&t[15])<<8,this.r[8]=8191&(a>>>8|u<<8),this.r[9]=u>>>5&127,this.pad[0]=255&t[16]|(255&t[17])<<8,this.pad[1]=255&t[18]|(255&t[19])<<8,this.pad[2]=255&t[20]|(255&t[21])<<8,this.pad[3]=255&t[22]|(255&t[23])<<8,this.pad[4]=255&t[24]|(255&t[25])<<8,this.pad[5]=255&t[26]|(255&t[27])<<8,this.pad[6]=255&t[28]|(255&t[29])<<8,this.pad[7]=255&t[30]|(255&t[31])<<8};function crypto_onetimeauth(t,e,r,n,i,o){var s=new poly1305(o);return s.update(r,n,i),s.finish(t,e),0}function crypto_onetimeauth_verify(t,e,r,n,i,o){var s=new Uint8Array(16);return crypto_onetimeauth(s,0,r,n,i,o),crypto_verify_16(t,e,s,0)}function crypto_secretbox(t,e,r,n,i){var o;if(r<32)return-1;for(crypto_stream_xor(t,0,e,0,r,n,i),crypto_onetimeauth(t,16,t,32,r-32,t),o=0;o<16;o++)t[o]=0;return 0}function crypto_secretbox_open(t,e,r,n,i){var o,s=new Uint8Array(32);if(r<32)return-1;if(crypto_stream(s,0,32,n,i),0!==crypto_onetimeauth_verify(e,16,e,32,r-32,s))return-1;for(crypto_stream_xor(t,0,e,0,r,n,i),o=0;o<32;o++)t[o]=0;return 0}function set25519(t,e){var r;for(r=0;r<16;r++)t[r]=0|e[r]}function car25519(t){var e,r,n=1;for(e=0;e<16;e++)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-65536*n;t[0]+=n-1+37*(n-1)}function sel25519(t,e,r){for(var n,i=~(r-1),o=0;o<16;o++)n=i&(t[o]^e[o]),t[o]^=n,e[o]^=n}function pack25519(t,e){var r,n,i,o=gf(),s=gf();for(r=0;r<16;r++)s[r]=e[r];for(car25519(s),car25519(s),car25519(s),n=0;n<2;n++){for(o[0]=s[0]-65517,r=1;r<15;r++)o[r]=s[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=s[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,sel25519(s,o,1-i)}for(r=0;r<16;r++)t[2*r]=255&s[r],t[2*r+1]=s[r]>>8}function neq25519(t,e){var r=new Uint8Array(32),n=new Uint8Array(32);return pack25519(r,t),pack25519(n,e),crypto_verify_32(r,0,n,0)}function par25519(t){var e=new Uint8Array(32);return pack25519(e,t),1&e[0]}function unpack25519(t,e){var r;for(r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function A(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]+r[n]}function Z(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]-r[n]}function M(t,e,r){var n,i,o=0,s=0,a=0,u=0,c=0,h=0,l=0,d=0,p=0,m=0,g=0,y=0,b=0,v=0,w=0,_=0,k=0,B=0,j=0,O=0,E=0,x=0,I=0,P=0,N=0,R=0,T=0,L=0,C=0,U=0,z=0,q=r[0],D=r[1],W=r[2],H=r[3],$=r[4],G=r[5],V=r[6],J=r[7],Y=r[8],X=r[9],Q=r[10],tt=r[11],et=r[12],rt=r[13],nt=r[14],it=r[15];o+=(n=e[0])*q,s+=n*D,a+=n*W,u+=n*H,c+=n*$,h+=n*G,l+=n*V,d+=n*J,p+=n*Y,m+=n*X,g+=n*Q,y+=n*tt,b+=n*et,v+=n*rt,w+=n*nt,_+=n*it,s+=(n=e[1])*q,a+=n*D,u+=n*W,c+=n*H,h+=n*$,l+=n*G,d+=n*V,p+=n*J,m+=n*Y,g+=n*X,y+=n*Q,b+=n*tt,v+=n*et,w+=n*rt,_+=n*nt,k+=n*it,a+=(n=e[2])*q,u+=n*D,c+=n*W,h+=n*H,l+=n*$,d+=n*G,p+=n*V,m+=n*J,g+=n*Y,y+=n*X,b+=n*Q,v+=n*tt,w+=n*et,_+=n*rt,k+=n*nt,B+=n*it,u+=(n=e[3])*q,c+=n*D,h+=n*W,l+=n*H,d+=n*$,p+=n*G,m+=n*V,g+=n*J,y+=n*Y,b+=n*X,v+=n*Q,w+=n*tt,_+=n*et,k+=n*rt,B+=n*nt,j+=n*it,c+=(n=e[4])*q,h+=n*D,l+=n*W,d+=n*H,p+=n*$,m+=n*G,g+=n*V,y+=n*J,b+=n*Y,v+=n*X,w+=n*Q,_+=n*tt,k+=n*et,B+=n*rt,j+=n*nt,O+=n*it,h+=(n=e[5])*q,l+=n*D,d+=n*W,p+=n*H,m+=n*$,g+=n*G,y+=n*V,b+=n*J,v+=n*Y,w+=n*X,_+=n*Q,k+=n*tt,B+=n*et,j+=n*rt,O+=n*nt,E+=n*it,l+=(n=e[6])*q,d+=n*D,p+=n*W,m+=n*H,g+=n*$,y+=n*G,b+=n*V,v+=n*J,w+=n*Y,_+=n*X,k+=n*Q,B+=n*tt,j+=n*et,O+=n*rt,E+=n*nt,x+=n*it,d+=(n=e[7])*q,p+=n*D,m+=n*W,g+=n*H,y+=n*$,b+=n*G,v+=n*V,w+=n*J,_+=n*Y,k+=n*X,B+=n*Q,j+=n*tt,O+=n*et,E+=n*rt,x+=n*nt,I+=n*it,p+=(n=e[8])*q,m+=n*D,g+=n*W,y+=n*H,b+=n*$,v+=n*G,w+=n*V,_+=n*J,k+=n*Y,B+=n*X,j+=n*Q,O+=n*tt,E+=n*et,x+=n*rt,I+=n*nt,P+=n*it,m+=(n=e[9])*q,g+=n*D,y+=n*W,b+=n*H,v+=n*$,w+=n*G,_+=n*V,k+=n*J,B+=n*Y,j+=n*X,O+=n*Q,E+=n*tt,x+=n*et,I+=n*rt,P+=n*nt,N+=n*it,g+=(n=e[10])*q,y+=n*D,b+=n*W,v+=n*H,w+=n*$,_+=n*G,k+=n*V,B+=n*J,j+=n*Y,O+=n*X,E+=n*Q,x+=n*tt,I+=n*et,P+=n*rt,N+=n*nt,R+=n*it,y+=(n=e[11])*q,b+=n*D,v+=n*W,w+=n*H,_+=n*$,k+=n*G,B+=n*V,j+=n*J,O+=n*Y,E+=n*X,x+=n*Q,I+=n*tt,P+=n*et,N+=n*rt,R+=n*nt,T+=n*it,b+=(n=e[12])*q,v+=n*D,w+=n*W,_+=n*H,k+=n*$,B+=n*G,j+=n*V,O+=n*J,E+=n*Y,x+=n*X,I+=n*Q,P+=n*tt,N+=n*et,R+=n*rt,T+=n*nt,L+=n*it,v+=(n=e[13])*q,w+=n*D,_+=n*W,k+=n*H,B+=n*$,j+=n*G,O+=n*V,E+=n*J,x+=n*Y,I+=n*X,P+=n*Q,N+=n*tt,R+=n*et,T+=n*rt,L+=n*nt,C+=n*it,w+=(n=e[14])*q,_+=n*D,k+=n*W,B+=n*H,j+=n*$,O+=n*G,E+=n*V,x+=n*J,I+=n*Y,P+=n*X,N+=n*Q,R+=n*tt,T+=n*et,L+=n*rt,C+=n*nt,U+=n*it,_+=(n=e[15])*q,s+=38*(B+=n*W),a+=38*(j+=n*H),u+=38*(O+=n*$),c+=38*(E+=n*G),h+=38*(x+=n*V),l+=38*(I+=n*J),d+=38*(P+=n*Y),p+=38*(N+=n*X),m+=38*(R+=n*Q),g+=38*(T+=n*tt),y+=38*(L+=n*et),b+=38*(C+=n*rt),v+=38*(U+=n*nt),w+=38*(z+=n*it),o=(n=(o+=38*(k+=n*D))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),w=(n=w+i+65535)-65536*(i=Math.floor(n/65536)),_=(n=_+i+65535)-65536*(i=Math.floor(n/65536)),o=(n=(o+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),w=(n=w+i+65535)-65536*(i=Math.floor(n/65536)),_=(n=_+i+65535)-65536*(i=Math.floor(n/65536)),o+=i-1+37*(i-1),t[0]=o,t[1]=s,t[2]=a,t[3]=u,t[4]=c,t[5]=h,t[6]=l,t[7]=d,t[8]=p,t[9]=m,t[10]=g,t[11]=y,t[12]=b,t[13]=v,t[14]=w,t[15]=_}function S(t,e){M(t,e,e)}function inv25519(t,e){var r,n=gf();for(r=0;r<16;r++)n[r]=e[r];for(r=253;r>=0;r--)S(n,n),2!==r&&4!==r&&M(n,n,e);for(r=0;r<16;r++)t[r]=n[r]}function pow2523(t,e){var r,n=gf();for(r=0;r<16;r++)n[r]=e[r];for(r=250;r>=0;r--)S(n,n),1!==r&&M(n,n,e);for(r=0;r<16;r++)t[r]=n[r]}function crypto_scalarmult(t,e,r){var n,i,o=new Uint8Array(32),a=new Float64Array(80),u=gf(),c=gf(),h=gf(),l=gf(),d=gf(),p=gf();for(i=0;i<31;i++)o[i]=e[i];for(o[31]=127&e[31]|64,o[0]&=248,unpack25519(a,r),i=0;i<16;i++)c[i]=a[i],l[i]=u[i]=h[i]=0;for(u[0]=l[0]=1,i=254;i>=0;--i)sel25519(u,c,n=o[i>>>3]>>>(7&i)&1),sel25519(h,l,n),A(d,u,h),Z(u,u,h),A(h,c,l),Z(c,c,l),S(l,d),S(p,u),M(u,h,u),M(h,c,d),A(d,u,h),Z(u,u,h),S(c,u),Z(h,l,p),M(u,h,s),A(u,u,l),M(h,h,u),M(u,l,p),M(l,c,a),S(c,d),sel25519(u,c,n),sel25519(h,l,n);for(i=0;i<16;i++)a[i+16]=u[i],a[i+32]=h[i],a[i+48]=c[i],a[i+64]=l[i];var m=a.subarray(32),g=a.subarray(16);return inv25519(m,m),M(g,g,m),pack25519(t,g),0}function crypto_scalarmult_base(t,e){return crypto_scalarmult(t,e,n)}function crypto_box_keypair(t,e){return randombytes(e,32),crypto_scalarmult_base(t,e)}function crypto_box_beforenm(t,r,n){var i=new Uint8Array(32);return crypto_scalarmult(i,n,r),crypto_core_hsalsa20(t,e,i,d)}poly1305.prototype.blocks=function(t,e,r){for(var n,i,o,s,a,u,c,h,l,d,p,m,g,y,b,v,w,_,k,B=this.fin?0:2048,j=this.h[0],O=this.h[1],E=this.h[2],x=this.h[3],I=this.h[4],P=this.h[5],N=this.h[6],R=this.h[7],T=this.h[8],L=this.h[9],C=this.r[0],U=this.r[1],z=this.r[2],q=this.r[3],D=this.r[4],W=this.r[5],H=this.r[6],$=this.r[7],G=this.r[8],V=this.r[9];r>=16;)d=l=0,d+=(j+=8191&(n=255&t[e+0]|(255&t[e+1])<<8))*C,d+=(O+=8191&(n>>>13|(i=255&t[e+2]|(255&t[e+3])<<8)<<3))*(5*V),d+=(E+=8191&(i>>>10|(o=255&t[e+4]|(255&t[e+5])<<8)<<6))*(5*G),d+=(x+=8191&(o>>>7|(s=255&t[e+6]|(255&t[e+7])<<8)<<9))*(5*$),l=(d+=(I+=8191&(s>>>4|(a=255&t[e+8]|(255&t[e+9])<<8)<<12))*(5*H))>>>13,d&=8191,d+=(P+=a>>>1&8191)*(5*W),d+=(N+=8191&(a>>>14|(u=255&t[e+10]|(255&t[e+11])<<8)<<2))*(5*D),d+=(R+=8191&(u>>>11|(c=255&t[e+12]|(255&t[e+13])<<8)<<5))*(5*q),d+=(T+=8191&(c>>>8|(h=255&t[e+14]|(255&t[e+15])<<8)<<8))*(5*z),p=l+=(d+=(L+=h>>>5|B)*(5*U))>>>13,p+=j*U,p+=O*C,p+=E*(5*V),p+=x*(5*G),l=(p+=I*(5*$))>>>13,p&=8191,p+=P*(5*H),p+=N*(5*W),p+=R*(5*D),p+=T*(5*q),l+=(p+=L*(5*z))>>>13,p&=8191,m=l,m+=j*z,m+=O*U,m+=E*C,m+=x*(5*V),l=(m+=I*(5*G))>>>13,m&=8191,m+=P*(5*$),m+=N*(5*H),m+=R*(5*W),m+=T*(5*D),g=l+=(m+=L*(5*q))>>>13,g+=j*q,g+=O*z,g+=E*U,g+=x*C,l=(g+=I*(5*V))>>>13,g&=8191,g+=P*(5*G),g+=N*(5*$),g+=R*(5*H),g+=T*(5*W),y=l+=(g+=L*(5*D))>>>13,y+=j*D,y+=O*q,y+=E*z,y+=x*U,l=(y+=I*C)>>>13,y&=8191,y+=P*(5*V),y+=N*(5*G),y+=R*(5*$),y+=T*(5*H),b=l+=(y+=L*(5*W))>>>13,b+=j*W,b+=O*D,b+=E*q,b+=x*z,l=(b+=I*U)>>>13,b&=8191,b+=P*C,b+=N*(5*V),b+=R*(5*G),b+=T*(5*$),v=l+=(b+=L*(5*H))>>>13,v+=j*H,v+=O*W,v+=E*D,v+=x*q,l=(v+=I*z)>>>13,v&=8191,v+=P*U,v+=N*C,v+=R*(5*V),v+=T*(5*G),w=l+=(v+=L*(5*$))>>>13,w+=j*$,w+=O*H,w+=E*W,w+=x*D,l=(w+=I*q)>>>13,w&=8191,w+=P*z,w+=N*U,w+=R*C,w+=T*(5*V),_=l+=(w+=L*(5*G))>>>13,_+=j*G,_+=O*$,_+=E*H,_+=x*W,l=(_+=I*D)>>>13,_&=8191,_+=P*q,_+=N*z,_+=R*U,_+=T*C,k=l+=(_+=L*(5*V))>>>13,k+=j*V,k+=O*G,k+=E*$,k+=x*H,l=(k+=I*W)>>>13,k&=8191,k+=P*D,k+=N*q,k+=R*z,k+=T*U,j=d=8191&(l=(l=((l+=(k+=L*C)>>>13)<<2)+l|0)+(d&=8191)|0),O=p+=l>>>=13,E=m&=8191,x=g&=8191,I=y&=8191,P=b&=8191,N=v&=8191,R=w&=8191,T=_&=8191,L=k&=8191,e+=16,r-=16;this.h[0]=j,this.h[1]=O,this.h[2]=E,this.h[3]=x,this.h[4]=I,this.h[5]=P,this.h[6]=N,this.h[7]=R,this.h[8]=T,this.h[9]=L},poly1305.prototype.finish=function(t,e){var r,n,i,o,s=new Uint16Array(10);if(this.leftover){for(o=this.leftover,this.buffer[o++]=1;o<16;o++)this.buffer[o]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,o=2;o<10;o++)this.h[o]+=r,r=this.h[o]>>>13,this.h[o]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,s[0]=this.h[0]+5,r=s[0]>>>13,s[0]&=8191,o=1;o<10;o++)s[o]=this.h[o]+r,r=s[o]>>>13,s[o]&=8191;for(s[9]-=8192,n=(1^r)-1,o=0;o<10;o++)s[o]&=n;for(n=~n,o=0;o<10;o++)this.h[o]=this.h[o]&n|s[o];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),i=this.h[0]+this.pad[0],this.h[0]=65535&i,o=1;o<8;o++)i=(this.h[o]+this.pad[o]|0)+(i>>>16)|0,this.h[o]=65535&i;t[e+0]=this.h[0]>>>0&255,t[e+1]=this.h[0]>>>8&255,t[e+2]=this.h[1]>>>0&255,t[e+3]=this.h[1]>>>8&255,t[e+4]=this.h[2]>>>0&255,t[e+5]=this.h[2]>>>8&255,t[e+6]=this.h[3]>>>0&255,t[e+7]=this.h[3]>>>8&255,t[e+8]=this.h[4]>>>0&255,t[e+9]=this.h[4]>>>8&255,t[e+10]=this.h[5]>>>0&255,t[e+11]=this.h[5]>>>8&255,t[e+12]=this.h[6]>>>0&255,t[e+13]=this.h[6]>>>8&255,t[e+14]=this.h[7]>>>0&255,t[e+15]=this.h[7]>>>8&255},poly1305.prototype.update=function(t,e,r){var n,i;if(this.leftover){for((i=16-this.leftover)>r&&(i=r),n=0;n<i;n++)this.buffer[this.leftover+n]=t[e+n];if(r-=i,e+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(i=r-r%16,this.blocks(t,e,i),e+=i,r-=i),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=t[e+n];this.leftover+=r}};var p=crypto_secretbox,m=crypto_secretbox_open;var g=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function crypto_hashblocks_hl(t,e,r,n){for(var i,o,s,a,u,c,h,l,d,p,m,y,b,v,w,_,k,B,j,O,E,x,I,P,N,R,T=new Int32Array(16),L=new Int32Array(16),C=t[0],U=t[1],z=t[2],q=t[3],D=t[4],W=t[5],H=t[6],$=t[7],G=e[0],V=e[1],J=e[2],Y=e[3],X=e[4],Q=e[5],tt=e[6],et=e[7],rt=0;n>=128;){for(j=0;j<16;j++)O=8*j+rt,T[j]=r[O+0]<<24|r[O+1]<<16|r[O+2]<<8|r[O+3],L[j]=r[O+4]<<24|r[O+5]<<16|r[O+6]<<8|r[O+7];for(j=0;j<80;j++)if(i=C,o=U,s=z,a=q,u=D,c=W,h=H,$,d=G,p=V,m=J,y=Y,b=X,v=Q,w=tt,et,I=65535&(x=et),P=x>>>16,N=65535&(E=$),R=E>>>16,I+=65535&(x=(X>>>14|D<<18)^(X>>>18|D<<14)^(D>>>9|X<<23)),P+=x>>>16,N+=65535&(E=(D>>>14|X<<18)^(D>>>18|X<<14)^(X>>>9|D<<23)),R+=E>>>16,I+=65535&(x=X&Q^~X&tt),P+=x>>>16,N+=65535&(E=D&W^~D&H),R+=E>>>16,I+=65535&(x=g[2*j+1]),P+=x>>>16,N+=65535&(E=g[2*j]),R+=E>>>16,E=T[j%16],P+=(x=L[j%16])>>>16,N+=65535&E,R+=E>>>16,N+=(P+=(I+=65535&x)>>>16)>>>16,I=65535&(x=B=65535&I|P<<16),P=x>>>16,N=65535&(E=k=65535&N|(R+=N>>>16)<<16),R=E>>>16,I+=65535&(x=(G>>>28|C<<4)^(C>>>2|G<<30)^(C>>>7|G<<25)),P+=x>>>16,N+=65535&(E=(C>>>28|G<<4)^(G>>>2|C<<30)^(G>>>7|C<<25)),R+=E>>>16,P+=(x=G&V^G&J^V&J)>>>16,N+=65535&(E=C&U^C&z^U&z),R+=E>>>16,l=65535&(N+=(P+=(I+=65535&x)>>>16)>>>16)|(R+=N>>>16)<<16,_=65535&I|P<<16,I=65535&(x=y),P=x>>>16,N=65535&(E=a),R=E>>>16,P+=(x=B)>>>16,N+=65535&(E=k),R+=E>>>16,U=i,z=o,q=s,D=a=65535&(N+=(P+=(I+=65535&x)>>>16)>>>16)|(R+=N>>>16)<<16,W=u,H=c,$=h,C=l,V=d,J=p,Y=m,X=y=65535&I|P<<16,Q=b,tt=v,et=w,G=_,j%16==15)for(O=0;O<16;O++)E=T[O],I=65535&(x=L[O]),P=x>>>16,N=65535&E,R=E>>>16,E=T[(O+9)%16],I+=65535&(x=L[(O+9)%16]),P+=x>>>16,N+=65535&E,R+=E>>>16,k=T[(O+1)%16],I+=65535&(x=((B=L[(O+1)%16])>>>1|k<<31)^(B>>>8|k<<24)^(B>>>7|k<<25)),P+=x>>>16,N+=65535&(E=(k>>>1|B<<31)^(k>>>8|B<<24)^k>>>7),R+=E>>>16,k=T[(O+14)%16],P+=(x=((B=L[(O+14)%16])>>>19|k<<13)^(k>>>29|B<<3)^(B>>>6|k<<26))>>>16,N+=65535&(E=(k>>>19|B<<13)^(B>>>29|k<<3)^k>>>6),R+=E>>>16,R+=(N+=(P+=(I+=65535&x)>>>16)>>>16)>>>16,T[O]=65535&N|R<<16,L[O]=65535&I|P<<16;I=65535&(x=G),P=x>>>16,N=65535&(E=C),R=E>>>16,E=t[0],P+=(x=e[0])>>>16,N+=65535&E,R+=E>>>16,R+=(N+=(P+=(I+=65535&x)>>>16)>>>16)>>>16,t[0]=C=65535&N|R<<16,e[0]=G=65535&I|P<<16,I=65535&(x=V),P=x>>>16,N=65535&(E=U),R=E>>>16,E=t[1],P+=(x=e[1])>>>16,N+=65535&E,R+=E>>>16,R+=(N+=(P+=(I+=65535&x)>>>16)>>>16)>>>16,t[1]=U=65535&N|R<<16,e[1]=V=65535&I|P<<16,I=65535&(x=J),P=x>>>16,N=65535&(E=z),R=E>>>16,E=t[2],P+=(x=e[2])>>>16,N+=65535&E,R+=E>>>16,R+=(N+=(P+=(I+=65535&x)>>>16)>>>16)>>>16,t[2]=z=65535&N|R<<16,e[2]=J=65535&I|P<<16,I=65535&(x=Y),P=x>>>16,N=65535&(E=q),R=E>>>16,E=t[3],P+=(x=e[3])>>>16,N+=65535&E,R+=E>>>16,R+=(N+=(P+=(I+=65535&x)>>>16)>>>16)>>>16,t[3]=q=65535&N|R<<16,e[3]=Y=65535&I|P<<16,I=65535&(x=X),P=x>>>16,N=65535&(E=D),R=E>>>16,E=t[4],P+=(x=e[4])>>>16,N+=65535&E,R+=E>>>16,R+=(N+=(P+=(I+=65535&x)>>>16)>>>16)>>>16,t[4]=D=65535&N|R<<16,e[4]=X=65535&I|P<<16,I=65535&(x=Q),P=x>>>16,N=65535&(E=W),R=E>>>16,E=t[5],P+=(x=e[5])>>>16,N+=65535&E,R+=E>>>16,R+=(N+=(P+=(I+=65535&x)>>>16)>>>16)>>>16,t[5]=W=65535&N|R<<16,e[5]=Q=65535&I|P<<16,I=65535&(x=tt),P=x>>>16,N=65535&(E=H),R=E>>>16,E=t[6],P+=(x=e[6])>>>16,N+=65535&E,R+=E>>>16,R+=(N+=(P+=(I+=65535&x)>>>16)>>>16)>>>16,t[6]=H=65535&N|R<<16,e[6]=tt=65535&I|P<<16,I=65535&(x=et),P=x>>>16,N=65535&(E=$),R=E>>>16,E=t[7],P+=(x=e[7])>>>16,N+=65535&E,R+=E>>>16,R+=(N+=(P+=(I+=65535&x)>>>16)>>>16)>>>16,t[7]=$=65535&N|R<<16,e[7]=et=65535&I|P<<16,rt+=128,n-=128}return n}function crypto_hash(t,e,r){var n,i=new Int32Array(8),o=new Int32Array(8),s=new Uint8Array(256),a=r;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,o[0]=4089235720,o[1]=2227873595,o[2]=4271175723,o[3]=1595750129,o[4]=2917565137,o[5]=725511199,o[6]=4215389547,o[7]=327033209,crypto_hashblocks_hl(i,o,e,r),r%=128,n=0;n<r;n++)s[n]=e[a-r+n];for(s[r]=128,s[(r=256-128*(r<112?1:0))-9]=0,ts64(s,r-8,a/536870912|0,a<<3),crypto_hashblocks_hl(i,o,s,r),n=0;n<8;n++)ts64(t,8*n,i[n],o[n]);return 0}function add(t,e){var r=gf(),n=gf(),i=gf(),o=gf(),s=gf(),a=gf(),c=gf(),h=gf(),l=gf();Z(r,t[1],t[0]),Z(l,e[1],e[0]),M(r,r,l),A(n,t[0],t[1]),A(l,e[0],e[1]),M(n,n,l),M(i,t[3],e[3]),M(i,i,u),M(o,t[2],e[2]),A(o,o,o),Z(s,n,r),Z(a,o,i),A(c,o,i),A(h,n,r),M(t[0],s,a),M(t[1],h,c),M(t[2],c,a),M(t[3],s,h)}function cswap(t,e,r){var n;for(n=0;n<4;n++)sel25519(t[n],e[n],r)}function pack(t,e){var r=gf(),n=gf(),i=gf();inv25519(i,e[2]),M(r,e[0],i),M(n,e[1],i),pack25519(t,n),t[31]^=par25519(r)<<7}function scalarmult(t,e,r){var n,s;for(set25519(t[0],i),set25519(t[1],o),set25519(t[2],o),set25519(t[3],i),s=255;s>=0;--s)cswap(t,e,n=r[s/8|0]>>(7&s)&1),add(e,t),add(t,t),cswap(t,e,n)}function scalarbase(t,e){var r=[gf(),gf(),gf(),gf()];set25519(r[0],c),set25519(r[1],h),set25519(r[2],o),M(r[3],c,h),scalarmult(t,r,e)}function crypto_sign_keypair(t,e,r){var n,i=new Uint8Array(64),o=[gf(),gf(),gf(),gf()];for(r||randombytes(e,32),crypto_hash(i,e,32),i[0]&=248,i[31]&=127,i[31]|=64,scalarbase(o,i),pack(t,o),n=0;n<32;n++)e[n+32]=t[n];return 0}var y=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function modL(t,e){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)e[i]+=r-16*e[n]*y[i-(n-32)],r=Math.floor((e[i]+128)/256),e[i]-=256*r;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;i++)e[i]+=r-(e[31]>>4)*y[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;i++)e[i]-=r*y[i];for(n=0;n<32;n++)e[n+1]+=e[n]>>8,t[n]=255&e[n]}function reduce(t){var e,r=new Float64Array(64);for(e=0;e<64;e++)r[e]=t[e];for(e=0;e<64;e++)t[e]=0;modL(t,r)}function crypto_sign(t,e,r,n){var i,o,s=new Uint8Array(64),a=new Uint8Array(64),u=new Uint8Array(64),c=new Float64Array(64),h=[gf(),gf(),gf(),gf()];crypto_hash(s,n,32),s[0]&=248,s[31]&=127,s[31]|=64;var l=r+64;for(i=0;i<r;i++)t[64+i]=e[i];for(i=0;i<32;i++)t[32+i]=s[32+i];for(crypto_hash(u,t.subarray(32),r+32),reduce(u),scalarbase(h,u),pack(t,h),i=32;i<64;i++)t[i]=n[i];for(crypto_hash(a,t,r+64),reduce(a),i=0;i<64;i++)c[i]=0;for(i=0;i<32;i++)c[i]=u[i];for(i=0;i<32;i++)for(o=0;o<32;o++)c[i+o]+=a[i]*s[o];return modL(t.subarray(32),c),l}function crypto_sign_open(t,e,r,n){var s,u=new Uint8Array(32),c=new Uint8Array(64),h=[gf(),gf(),gf(),gf()],d=[gf(),gf(),gf(),gf()];if(r<64)return-1;if(function unpackneg(t,e){var r=gf(),n=gf(),s=gf(),u=gf(),c=gf(),h=gf(),d=gf();return set25519(t[2],o),unpack25519(t[1],e),S(s,t[1]),M(u,s,a),Z(s,s,t[2]),A(u,t[2],u),S(c,u),S(h,c),M(d,h,c),M(r,d,s),M(r,r,u),pow2523(r,r),M(r,r,s),M(r,r,u),M(r,r,u),M(t[0],r,u),S(n,t[0]),M(n,n,u),neq25519(n,s)&&M(t[0],t[0],l),S(n,t[0]),M(n,n,u),neq25519(n,s)?-1:(par25519(t[0])===e[31]>>7&&Z(t[0],i,t[0]),M(t[3],t[0],t[1]),0)}(d,n))return-1;for(s=0;s<r;s++)t[s]=e[s];for(s=0;s<32;s++)t[s+32]=n[s];if(crypto_hash(c,t,r),reduce(c),scalarmult(h,d,c),scalarbase(d,e.subarray(32)),add(h,d),pack(u,h),r-=64,crypto_verify_32(e,0,u,0)){for(s=0;s<r;s++)t[s]=0;return-1}for(s=0;s<r;s++)t[s]=e[s+64];return r}function checkLengths(t,e){if(32!==t.length)throw new Error("bad key size");if(24!==e.length)throw new Error("bad nonce size")}function checkArrayTypes(){for(var t=0;t<arguments.length;t++)if(!(arguments[t]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function cleanup(t){for(var e=0;e<t.length;e++)t[e]=0}t.lowlevel={crypto_core_hsalsa20:crypto_core_hsalsa20,crypto_stream_xor:crypto_stream_xor,crypto_stream:crypto_stream,crypto_stream_salsa20_xor:crypto_stream_salsa20_xor,crypto_stream_salsa20:crypto_stream_salsa20,crypto_onetimeauth:crypto_onetimeauth,crypto_onetimeauth_verify:crypto_onetimeauth_verify,crypto_verify_16:crypto_verify_16,crypto_verify_32:crypto_verify_32,crypto_secretbox:crypto_secretbox,crypto_secretbox_open:crypto_secretbox_open,crypto_scalarmult:crypto_scalarmult,crypto_scalarmult_base:crypto_scalarmult_base,crypto_box_beforenm:crypto_box_beforenm,crypto_box_afternm:p,crypto_box:function crypto_box(t,e,r,n,i,o){var s=new Uint8Array(32);return crypto_box_beforenm(s,i,o),p(t,e,r,n,s)},crypto_box_open:function crypto_box_open(t,e,r,n,i,o){var s=new Uint8Array(32);return crypto_box_beforenm(s,i,o),m(t,e,r,n,s)},crypto_box_keypair:crypto_box_keypair,crypto_hash:crypto_hash,crypto_sign:crypto_sign,crypto_sign_keypair:crypto_sign_keypair,crypto_sign_open:crypto_sign_open,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:gf,D:a,L:y,pack25519:pack25519,unpack25519:unpack25519,M:M,A:A,S:S,Z:Z,pow2523:pow2523,add:add,set25519:set25519,modL:modL,scalarmult:scalarmult,scalarbase:scalarbase},t.randomBytes=function(t){var e=new Uint8Array(t);return randombytes(e,t),e},t.secretbox=function(t,e,r){checkArrayTypes(t,e,r),checkLengths(r,e);for(var n=new Uint8Array(32+t.length),i=new Uint8Array(n.length),o=0;o<t.length;o++)n[o+32]=t[o];return crypto_secretbox(i,n,n.length,e,r),i.subarray(16)},t.secretbox.open=function(t,e,r){checkArrayTypes(t,e,r),checkLengths(r,e);for(var n=new Uint8Array(16+t.length),i=new Uint8Array(n.length),o=0;o<t.length;o++)n[o+16]=t[o];return n.length<32||0!==crypto_secretbox_open(i,n,n.length,e,r)?null:i.subarray(32)},t.secretbox.keyLength=32,t.secretbox.nonceLength=24,t.secretbox.overheadLength=16,t.scalarMult=function(t,e){if(checkArrayTypes(t,e),32!==t.length)throw new Error("bad n size");if(32!==e.length)throw new Error("bad p size");var r=new Uint8Array(32);return crypto_scalarmult(r,t,e),r},t.scalarMult.base=function(t){if(checkArrayTypes(t),32!==t.length)throw new Error("bad n size");var e=new Uint8Array(32);return crypto_scalarmult_base(e,t),e},t.scalarMult.scalarLength=32,t.scalarMult.groupElementLength=32,t.box=function(e,r,n,i){var o=t.box.before(n,i);return t.secretbox(e,r,o)},t.box.before=function(t,e){checkArrayTypes(t,e),function checkBoxLengths(t,e){if(32!==t.length)throw new Error("bad public key size");if(32!==e.length)throw new Error("bad secret key size")}(t,e);var r=new Uint8Array(32);return crypto_box_beforenm(r,t,e),r},t.box.after=t.secretbox,t.box.open=function(e,r,n,i){var o=t.box.before(n,i);return t.secretbox.open(e,r,o)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var t=new Uint8Array(32),e=new Uint8Array(32);return crypto_box_keypair(t,e),{publicKey:t,secretKey:e}},t.box.keyPair.fromSecretKey=function(t){if(checkArrayTypes(t),32!==t.length)throw new Error("bad secret key size");var e=new Uint8Array(32);return crypto_scalarmult_base(e,t),{publicKey:e,secretKey:new Uint8Array(t)}},t.box.publicKeyLength=32,t.box.secretKeyLength=32,t.box.sharedKeyLength=32,t.box.nonceLength=24,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(t,e){if(checkArrayTypes(t,e),64!==e.length)throw new Error("bad secret key size");var r=new Uint8Array(64+t.length);return crypto_sign(r,t,t.length,e),r},t.sign.open=function(t,e){if(checkArrayTypes(t,e),32!==e.length)throw new Error("bad public key size");var r=new Uint8Array(t.length),n=crypto_sign_open(r,t,t.length,e);if(n<0)return null;for(var i=new Uint8Array(n),o=0;o<i.length;o++)i[o]=r[o];return i},t.sign.detached=function(e,r){for(var n=t.sign(e,r),i=new Uint8Array(64),o=0;o<i.length;o++)i[o]=n[o];return i},t.sign.detached.verify=function(t,e,r){if(checkArrayTypes(t,e,r),64!==e.length)throw new Error("bad signature size");if(32!==r.length)throw new Error("bad public key size");var n,i=new Uint8Array(64+t.length),o=new Uint8Array(64+t.length);for(n=0;n<64;n++)i[n]=e[n];for(n=0;n<t.length;n++)i[n+64]=t[n];return crypto_sign_open(o,i,i.length,r)>=0},t.sign.keyPair=function(){var t=new Uint8Array(32),e=new Uint8Array(64);return crypto_sign_keypair(t,e),{publicKey:t,secretKey:e}},t.sign.keyPair.fromSecretKey=function(t){if(checkArrayTypes(t),64!==t.length)throw new Error("bad secret key size");for(var e=new Uint8Array(32),r=0;r<e.length;r++)e[r]=t[32+r];return{publicKey:e,secretKey:new Uint8Array(t)}},t.sign.keyPair.fromSeed=function(t){if(checkArrayTypes(t),32!==t.length)throw new Error("bad seed size");for(var e=new Uint8Array(32),r=new Uint8Array(64),n=0;n<32;n++)r[n]=t[n];return crypto_sign_keypair(e,r,!0),{publicKey:e,secretKey:r}},t.sign.publicKeyLength=32,t.sign.secretKeyLength=64,t.sign.seedLength=32,t.sign.signatureLength=64,t.hash=function(t){checkArrayTypes(t);var e=new Uint8Array(64);return crypto_hash(e,t,t.length),e},t.hash.hashLength=64,t.verify=function(t,e){return checkArrayTypes(t,e),0!==t.length&&0!==e.length&&(t.length===e.length&&0===vn(t,0,e,0,t.length))},t.setPRNG=function(t){randombytes=t},function(){var e="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(e&&e.getRandomValues){t.setPRNG((function(t,r){var n,i=new Uint8Array(r);for(n=0;n<r;n+=65536)e.getRandomValues(i.subarray(n,n+Math.min(r-n,65536)));for(n=0;n<r;n++)t[n]=i[n];cleanup(i)}))}else(e=r(1450))&&e.randomBytes&&t.setPRNG((function(t,r){var n,i=e.randomBytes(r);for(n=0;n<r;n++)t[n]=i[n];cleanup(i)}))}()}(t.exports?t.exports:self.nacl=self.nacl||{})},1576:function(t,e,r){(function(t){!function(t,e){"use strict";function assert(t,e){if(!t)throw new Error(e||"Assertion failed")}function inherits(t,e){t.super_=e;var TempCtor=function(){};TempCtor.prototype=e.prototype,t.prototype=new TempCtor,t.prototype.constructor=t}function BN(t,e,r){if(BN.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var n;"object"==typeof t?t.exports=BN:e.BN=BN,BN.BN=BN,BN.wordSize=26;try{n="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(1451).Buffer}catch(t){}function parseHex4Bits(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void assert(!1,"Invalid character in "+t)}function parseHexByte(t,e,r){var n=parseHex4Bits(t,r);return r-1>=e&&(n|=parseHex4Bits(t,r-1)<<4),n}function parseBase(t,e,r,n){for(var i=0,o=0,s=Math.min(t.length,r),a=e;a<s;a++){var u=t.charCodeAt(a)-48;i*=n,o=u>=49?u-49+10:u>=17?u-17+10:u,assert(u>=0&&o<n,"Invalid character"),i+=o}return i}function move(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(BN.isBN=function isBN(t){return t instanceof BN||null!==t&&"object"==typeof t&&t.constructor.wordSize===BN.wordSize&&Array.isArray(t.words)},BN.max=function max(t,e){return t.cmp(e)>0?t:e},BN.min=function min(t,e){return t.cmp(e)<0?t:e},BN.prototype._init=function init(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),assert(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,r):(this._parseBase(t,e,n),"le"===r&&this._initArray(this.toArray(),e,r)))},BN.prototype._initNumber=function _initNumber(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(assert(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},BN.prototype._initArray=function _initArray(t,e,r){if(assert("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o,s=0;if("be"===r)for(n=t.length-1,i=0;n>=0;n-=3)o=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[i]|=o<<s&67108863,this.words[i+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,i++);else if("le"===r)for(n=0,i=0;n<t.length;n+=3)o=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[i]|=o<<s&67108863,this.words[i+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,i++);return this._strip()},BN.prototype._parseHex=function _parseHex(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=parseHexByte(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=parseHexByte(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this._strip()},BN.prototype._parseBase=function _parseBase(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,u=0,c=r;c<a;c+=n)u=parseBase(t,c,c+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var h=1;for(u=parseBase(t,c,t.length,e),c=0;c<s;c++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},BN.prototype.copy=function copy(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},BN.prototype._move=function _move(t){move(t,this)},BN.prototype.clone=function clone(){var t=new BN(null);return this.copy(t),t},BN.prototype._expand=function _expand(t){for(;this.length<t;)this.words[this.length++]=0;return this},BN.prototype._strip=function strip(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function _normSign(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{BN.prototype[Symbol.for("nodejs.util.inspect.custom")]=inspect}catch(t){BN.prototype.inspect=inspect}else BN.prototype.inspect=inspect;function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var i=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],o=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],s=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];BN.prototype.toString=function toString(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var n=0,a=0,u=0;u<this.length;u++){var c=this.words[u],h=(16777215&(c<<n|a)).toString(16);r=0!==(a=c>>>24-n&16777215)||u!==this.length-1?i[6-h.length]+h+r:h+r,(n+=2)>=26&&(n-=26,u--)}for(0!==a&&(r=a.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var l=o[t],d=s[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modrn(d).toString(t);r=(p=p.idivn(d)).isZero()?m+r:i[l-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function toNumber(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},BN.prototype.toJSON=function toJSON(){return this.toString(16,2)},n&&(BN.prototype.toBuffer=function toBuffer(t,e){return this.toArrayLike(n,t,e)}),BN.prototype.toArray=function toArray(t,e){return this.toArrayLike(Array,t,e)};function smallMulTo(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var h=u>>>26,l=67108863&u,d=Math.min(c,e.length-1),p=Math.max(0,c-t.length+1);p<=d;p++){var m=c-p|0;h+=(s=(i=0|t.words[m])*(o=0|e.words[p])+l)/67108864|0,l=67108863&s}r.words[c]=0|l,u=0|h}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}BN.prototype.toArrayLike=function toArrayLike(t,e,r){this._strip();var n=this.byteLength(),i=r||Math.max(1,n);assert(n<=i,"byte array longer than desired length"),assert(i>0,"Requested array length <= 0");var o=function allocate(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,i);return this["_toArrayLike"+("le"===e?"LE":"BE")](o,n),o},BN.prototype._toArrayLikeLE=function _toArrayLikeLE(t,e){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r++]=255&s,r<t.length&&(t[r++]=s>>8&255),r<t.length&&(t[r++]=s>>16&255),6===o?(r<t.length&&(t[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<t.length)for(t[r++]=n;r<t.length;)t[r++]=0},BN.prototype._toArrayLikeBE=function _toArrayLikeBE(t,e){for(var r=t.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r--]=255&s,r>=0&&(t[r--]=s>>8&255),r>=0&&(t[r--]=s>>16&255),6===o?(r>=0&&(t[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0)for(t[r--]=n;r>=0;)t[r--]=0},Math.clz32?BN.prototype._countBits=function _countBits(t){return 32-Math.clz32(t)}:BN.prototype._countBits=function _countBits(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},BN.prototype._zeroBits=function _zeroBits(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},BN.prototype.bitLength=function bitLength(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function toTwos(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},BN.prototype.fromTwos=function fromTwos(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function isNeg(){return 0!==this.negative},BN.prototype.neg=function neg(){return this.clone().ineg()},BN.prototype.ineg=function ineg(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function iuor(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},BN.prototype.ior=function ior(t){return assert(0==(this.negative|t.negative)),this.iuor(t)},BN.prototype.or=function or(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},BN.prototype.uor=function uor(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},BN.prototype.iuand=function iuand(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},BN.prototype.iand=function iand(t){return assert(0==(this.negative|t.negative)),this.iuand(t)},BN.prototype.and=function and(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},BN.prototype.uand=function uand(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},BN.prototype.iuxor=function iuxor(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},BN.prototype.ixor=function ixor(t){return assert(0==(this.negative|t.negative)),this.iuxor(t)},BN.prototype.xor=function xor(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},BN.prototype.uxor=function uxor(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},BN.prototype.inotn=function inotn(t){assert("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this._strip()},BN.prototype.notn=function notn(t){return this.clone().inotn(t)},BN.prototype.setn=function setn(t,e){assert("number"==typeof t&&t>=0);var r=t/26|0,n=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<n:this.words[r]&~(1<<n),this._strip()},BN.prototype.iadd=function iadd(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},BN.prototype.add=function add(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},BN.prototype.isub=function isub(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this._strip()},BN.prototype.sub=function sub(t){return this.clone().isub(t)};var a=function comb10MulTo(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,c=0,h=0|s[0],l=8191&h,d=h>>>13,p=0|s[1],m=8191&p,g=p>>>13,y=0|s[2],b=8191&y,v=y>>>13,w=0|s[3],_=8191&w,k=w>>>13,B=0|s[4],j=8191&B,O=B>>>13,E=0|s[5],x=8191&E,I=E>>>13,P=0|s[6],N=8191&P,R=P>>>13,T=0|s[7],L=8191&T,C=T>>>13,U=0|s[8],z=8191&U,q=U>>>13,D=0|s[9],W=8191&D,H=D>>>13,$=0|a[0],G=8191&$,V=$>>>13,J=0|a[1],Y=8191&J,X=J>>>13,Q=0|a[2],tt=8191&Q,et=Q>>>13,rt=0|a[3],nt=8191&rt,it=rt>>>13,ot=0|a[4],st=8191&ot,at=ot>>>13,ut=0|a[5],ct=8191&ut,ht=ut>>>13,dt=0|a[6],ft=8191&dt,pt=dt>>>13,mt=0|a[7],yt=8191&mt,bt=mt>>>13,vt=0|a[8],wt=8191&vt,_t=vt>>>13,Mt=0|a[9],kt=8191&Mt,Bt=Mt>>>13;r.negative=t.negative^e.negative,r.length=19;var St=(c+(n=Math.imul(l,G))|0)+((8191&(i=(i=Math.imul(l,V))+Math.imul(d,G)|0))<<13)|0;c=((o=Math.imul(d,V))+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(m,G),i=(i=Math.imul(m,V))+Math.imul(g,G)|0,o=Math.imul(g,V);var jt=(c+(n=n+Math.imul(l,Y)|0)|0)+((8191&(i=(i=i+Math.imul(l,X)|0)+Math.imul(d,Y)|0))<<13)|0;c=((o=o+Math.imul(d,X)|0)+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,n=Math.imul(b,G),i=(i=Math.imul(b,V))+Math.imul(v,G)|0,o=Math.imul(v,V),n=n+Math.imul(m,Y)|0,i=(i=i+Math.imul(m,X)|0)+Math.imul(g,Y)|0,o=o+Math.imul(g,X)|0;var Ot=(c+(n=n+Math.imul(l,tt)|0)|0)+((8191&(i=(i=i+Math.imul(l,et)|0)+Math.imul(d,tt)|0))<<13)|0;c=((o=o+Math.imul(d,et)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(_,G),i=(i=Math.imul(_,V))+Math.imul(k,G)|0,o=Math.imul(k,V),n=n+Math.imul(b,Y)|0,i=(i=i+Math.imul(b,X)|0)+Math.imul(v,Y)|0,o=o+Math.imul(v,X)|0,n=n+Math.imul(m,tt)|0,i=(i=i+Math.imul(m,et)|0)+Math.imul(g,tt)|0,o=o+Math.imul(g,et)|0;var Et=(c+(n=n+Math.imul(l,nt)|0)|0)+((8191&(i=(i=i+Math.imul(l,it)|0)+Math.imul(d,nt)|0))<<13)|0;c=((o=o+Math.imul(d,it)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(j,G),i=(i=Math.imul(j,V))+Math.imul(O,G)|0,o=Math.imul(O,V),n=n+Math.imul(_,Y)|0,i=(i=i+Math.imul(_,X)|0)+Math.imul(k,Y)|0,o=o+Math.imul(k,X)|0,n=n+Math.imul(b,tt)|0,i=(i=i+Math.imul(b,et)|0)+Math.imul(v,tt)|0,o=o+Math.imul(v,et)|0,n=n+Math.imul(m,nt)|0,i=(i=i+Math.imul(m,it)|0)+Math.imul(g,nt)|0,o=o+Math.imul(g,it)|0;var At=(c+(n=n+Math.imul(l,st)|0)|0)+((8191&(i=(i=i+Math.imul(l,at)|0)+Math.imul(d,st)|0))<<13)|0;c=((o=o+Math.imul(d,at)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(x,G),i=(i=Math.imul(x,V))+Math.imul(I,G)|0,o=Math.imul(I,V),n=n+Math.imul(j,Y)|0,i=(i=i+Math.imul(j,X)|0)+Math.imul(O,Y)|0,o=o+Math.imul(O,X)|0,n=n+Math.imul(_,tt)|0,i=(i=i+Math.imul(_,et)|0)+Math.imul(k,tt)|0,o=o+Math.imul(k,et)|0,n=n+Math.imul(b,nt)|0,i=(i=i+Math.imul(b,it)|0)+Math.imul(v,nt)|0,o=o+Math.imul(v,it)|0,n=n+Math.imul(m,st)|0,i=(i=i+Math.imul(m,at)|0)+Math.imul(g,st)|0,o=o+Math.imul(g,at)|0;var xt=(c+(n=n+Math.imul(l,ct)|0)|0)+((8191&(i=(i=i+Math.imul(l,ht)|0)+Math.imul(d,ct)|0))<<13)|0;c=((o=o+Math.imul(d,ht)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(N,G),i=(i=Math.imul(N,V))+Math.imul(R,G)|0,o=Math.imul(R,V),n=n+Math.imul(x,Y)|0,i=(i=i+Math.imul(x,X)|0)+Math.imul(I,Y)|0,o=o+Math.imul(I,X)|0,n=n+Math.imul(j,tt)|0,i=(i=i+Math.imul(j,et)|0)+Math.imul(O,tt)|0,o=o+Math.imul(O,et)|0,n=n+Math.imul(_,nt)|0,i=(i=i+Math.imul(_,it)|0)+Math.imul(k,nt)|0,o=o+Math.imul(k,it)|0,n=n+Math.imul(b,st)|0,i=(i=i+Math.imul(b,at)|0)+Math.imul(v,st)|0,o=o+Math.imul(v,at)|0,n=n+Math.imul(m,ct)|0,i=(i=i+Math.imul(m,ht)|0)+Math.imul(g,ct)|0,o=o+Math.imul(g,ht)|0;var It=(c+(n=n+Math.imul(l,ft)|0)|0)+((8191&(i=(i=i+Math.imul(l,pt)|0)+Math.imul(d,ft)|0))<<13)|0;c=((o=o+Math.imul(d,pt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(L,G),i=(i=Math.imul(L,V))+Math.imul(C,G)|0,o=Math.imul(C,V),n=n+Math.imul(N,Y)|0,i=(i=i+Math.imul(N,X)|0)+Math.imul(R,Y)|0,o=o+Math.imul(R,X)|0,n=n+Math.imul(x,tt)|0,i=(i=i+Math.imul(x,et)|0)+Math.imul(I,tt)|0,o=o+Math.imul(I,et)|0,n=n+Math.imul(j,nt)|0,i=(i=i+Math.imul(j,it)|0)+Math.imul(O,nt)|0,o=o+Math.imul(O,it)|0,n=n+Math.imul(_,st)|0,i=(i=i+Math.imul(_,at)|0)+Math.imul(k,st)|0,o=o+Math.imul(k,at)|0,n=n+Math.imul(b,ct)|0,i=(i=i+Math.imul(b,ht)|0)+Math.imul(v,ct)|0,o=o+Math.imul(v,ht)|0,n=n+Math.imul(m,ft)|0,i=(i=i+Math.imul(m,pt)|0)+Math.imul(g,ft)|0,o=o+Math.imul(g,pt)|0;var Pt=(c+(n=n+Math.imul(l,yt)|0)|0)+((8191&(i=(i=i+Math.imul(l,bt)|0)+Math.imul(d,yt)|0))<<13)|0;c=((o=o+Math.imul(d,bt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(z,G),i=(i=Math.imul(z,V))+Math.imul(q,G)|0,o=Math.imul(q,V),n=n+Math.imul(L,Y)|0,i=(i=i+Math.imul(L,X)|0)+Math.imul(C,Y)|0,o=o+Math.imul(C,X)|0,n=n+Math.imul(N,tt)|0,i=(i=i+Math.imul(N,et)|0)+Math.imul(R,tt)|0,o=o+Math.imul(R,et)|0,n=n+Math.imul(x,nt)|0,i=(i=i+Math.imul(x,it)|0)+Math.imul(I,nt)|0,o=o+Math.imul(I,it)|0,n=n+Math.imul(j,st)|0,i=(i=i+Math.imul(j,at)|0)+Math.imul(O,st)|0,o=o+Math.imul(O,at)|0,n=n+Math.imul(_,ct)|0,i=(i=i+Math.imul(_,ht)|0)+Math.imul(k,ct)|0,o=o+Math.imul(k,ht)|0,n=n+Math.imul(b,ft)|0,i=(i=i+Math.imul(b,pt)|0)+Math.imul(v,ft)|0,o=o+Math.imul(v,pt)|0,n=n+Math.imul(m,yt)|0,i=(i=i+Math.imul(m,bt)|0)+Math.imul(g,yt)|0,o=o+Math.imul(g,bt)|0;var Nt=(c+(n=n+Math.imul(l,wt)|0)|0)+((8191&(i=(i=i+Math.imul(l,_t)|0)+Math.imul(d,wt)|0))<<13)|0;c=((o=o+Math.imul(d,_t)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,n=Math.imul(W,G),i=(i=Math.imul(W,V))+Math.imul(H,G)|0,o=Math.imul(H,V),n=n+Math.imul(z,Y)|0,i=(i=i+Math.imul(z,X)|0)+Math.imul(q,Y)|0,o=o+Math.imul(q,X)|0,n=n+Math.imul(L,tt)|0,i=(i=i+Math.imul(L,et)|0)+Math.imul(C,tt)|0,o=o+Math.imul(C,et)|0,n=n+Math.imul(N,nt)|0,i=(i=i+Math.imul(N,it)|0)+Math.imul(R,nt)|0,o=o+Math.imul(R,it)|0,n=n+Math.imul(x,st)|0,i=(i=i+Math.imul(x,at)|0)+Math.imul(I,st)|0,o=o+Math.imul(I,at)|0,n=n+Math.imul(j,ct)|0,i=(i=i+Math.imul(j,ht)|0)+Math.imul(O,ct)|0,o=o+Math.imul(O,ht)|0,n=n+Math.imul(_,ft)|0,i=(i=i+Math.imul(_,pt)|0)+Math.imul(k,ft)|0,o=o+Math.imul(k,pt)|0,n=n+Math.imul(b,yt)|0,i=(i=i+Math.imul(b,bt)|0)+Math.imul(v,yt)|0,o=o+Math.imul(v,bt)|0,n=n+Math.imul(m,wt)|0,i=(i=i+Math.imul(m,_t)|0)+Math.imul(g,wt)|0,o=o+Math.imul(g,_t)|0;var Rt=(c+(n=n+Math.imul(l,kt)|0)|0)+((8191&(i=(i=i+Math.imul(l,Bt)|0)+Math.imul(d,kt)|0))<<13)|0;c=((o=o+Math.imul(d,Bt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(W,Y),i=(i=Math.imul(W,X))+Math.imul(H,Y)|0,o=Math.imul(H,X),n=n+Math.imul(z,tt)|0,i=(i=i+Math.imul(z,et)|0)+Math.imul(q,tt)|0,o=o+Math.imul(q,et)|0,n=n+Math.imul(L,nt)|0,i=(i=i+Math.imul(L,it)|0)+Math.imul(C,nt)|0,o=o+Math.imul(C,it)|0,n=n+Math.imul(N,st)|0,i=(i=i+Math.imul(N,at)|0)+Math.imul(R,st)|0,o=o+Math.imul(R,at)|0,n=n+Math.imul(x,ct)|0,i=(i=i+Math.imul(x,ht)|0)+Math.imul(I,ct)|0,o=o+Math.imul(I,ht)|0,n=n+Math.imul(j,ft)|0,i=(i=i+Math.imul(j,pt)|0)+Math.imul(O,ft)|0,o=o+Math.imul(O,pt)|0,n=n+Math.imul(_,yt)|0,i=(i=i+Math.imul(_,bt)|0)+Math.imul(k,yt)|0,o=o+Math.imul(k,bt)|0,n=n+Math.imul(b,wt)|0,i=(i=i+Math.imul(b,_t)|0)+Math.imul(v,wt)|0,o=o+Math.imul(v,_t)|0;var Tt=(c+(n=n+Math.imul(m,kt)|0)|0)+((8191&(i=(i=i+Math.imul(m,Bt)|0)+Math.imul(g,kt)|0))<<13)|0;c=((o=o+Math.imul(g,Bt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(W,tt),i=(i=Math.imul(W,et))+Math.imul(H,tt)|0,o=Math.imul(H,et),n=n+Math.imul(z,nt)|0,i=(i=i+Math.imul(z,it)|0)+Math.imul(q,nt)|0,o=o+Math.imul(q,it)|0,n=n+Math.imul(L,st)|0,i=(i=i+Math.imul(L,at)|0)+Math.imul(C,st)|0,o=o+Math.imul(C,at)|0,n=n+Math.imul(N,ct)|0,i=(i=i+Math.imul(N,ht)|0)+Math.imul(R,ct)|0,o=o+Math.imul(R,ht)|0,n=n+Math.imul(x,ft)|0,i=(i=i+Math.imul(x,pt)|0)+Math.imul(I,ft)|0,o=o+Math.imul(I,pt)|0,n=n+Math.imul(j,yt)|0,i=(i=i+Math.imul(j,bt)|0)+Math.imul(O,yt)|0,o=o+Math.imul(O,bt)|0,n=n+Math.imul(_,wt)|0,i=(i=i+Math.imul(_,_t)|0)+Math.imul(k,wt)|0,o=o+Math.imul(k,_t)|0;var Lt=(c+(n=n+Math.imul(b,kt)|0)|0)+((8191&(i=(i=i+Math.imul(b,Bt)|0)+Math.imul(v,kt)|0))<<13)|0;c=((o=o+Math.imul(v,Bt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(W,nt),i=(i=Math.imul(W,it))+Math.imul(H,nt)|0,o=Math.imul(H,it),n=n+Math.imul(z,st)|0,i=(i=i+Math.imul(z,at)|0)+Math.imul(q,st)|0,o=o+Math.imul(q,at)|0,n=n+Math.imul(L,ct)|0,i=(i=i+Math.imul(L,ht)|0)+Math.imul(C,ct)|0,o=o+Math.imul(C,ht)|0,n=n+Math.imul(N,ft)|0,i=(i=i+Math.imul(N,pt)|0)+Math.imul(R,ft)|0,o=o+Math.imul(R,pt)|0,n=n+Math.imul(x,yt)|0,i=(i=i+Math.imul(x,bt)|0)+Math.imul(I,yt)|0,o=o+Math.imul(I,bt)|0,n=n+Math.imul(j,wt)|0,i=(i=i+Math.imul(j,_t)|0)+Math.imul(O,wt)|0,o=o+Math.imul(O,_t)|0;var Ct=(c+(n=n+Math.imul(_,kt)|0)|0)+((8191&(i=(i=i+Math.imul(_,Bt)|0)+Math.imul(k,kt)|0))<<13)|0;c=((o=o+Math.imul(k,Bt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(W,st),i=(i=Math.imul(W,at))+Math.imul(H,st)|0,o=Math.imul(H,at),n=n+Math.imul(z,ct)|0,i=(i=i+Math.imul(z,ht)|0)+Math.imul(q,ct)|0,o=o+Math.imul(q,ht)|0,n=n+Math.imul(L,ft)|0,i=(i=i+Math.imul(L,pt)|0)+Math.imul(C,ft)|0,o=o+Math.imul(C,pt)|0,n=n+Math.imul(N,yt)|0,i=(i=i+Math.imul(N,bt)|0)+Math.imul(R,yt)|0,o=o+Math.imul(R,bt)|0,n=n+Math.imul(x,wt)|0,i=(i=i+Math.imul(x,_t)|0)+Math.imul(I,wt)|0,o=o+Math.imul(I,_t)|0;var Ut=(c+(n=n+Math.imul(j,kt)|0)|0)+((8191&(i=(i=i+Math.imul(j,Bt)|0)+Math.imul(O,kt)|0))<<13)|0;c=((o=o+Math.imul(O,Bt)|0)+(i>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,n=Math.imul(W,ct),i=(i=Math.imul(W,ht))+Math.imul(H,ct)|0,o=Math.imul(H,ht),n=n+Math.imul(z,ft)|0,i=(i=i+Math.imul(z,pt)|0)+Math.imul(q,ft)|0,o=o+Math.imul(q,pt)|0,n=n+Math.imul(L,yt)|0,i=(i=i+Math.imul(L,bt)|0)+Math.imul(C,yt)|0,o=o+Math.imul(C,bt)|0,n=n+Math.imul(N,wt)|0,i=(i=i+Math.imul(N,_t)|0)+Math.imul(R,wt)|0,o=o+Math.imul(R,_t)|0;var zt=(c+(n=n+Math.imul(x,kt)|0)|0)+((8191&(i=(i=i+Math.imul(x,Bt)|0)+Math.imul(I,kt)|0))<<13)|0;c=((o=o+Math.imul(I,Bt)|0)+(i>>>13)|0)+(zt>>>26)|0,zt&=67108863,n=Math.imul(W,ft),i=(i=Math.imul(W,pt))+Math.imul(H,ft)|0,o=Math.imul(H,pt),n=n+Math.imul(z,yt)|0,i=(i=i+Math.imul(z,bt)|0)+Math.imul(q,yt)|0,o=o+Math.imul(q,bt)|0,n=n+Math.imul(L,wt)|0,i=(i=i+Math.imul(L,_t)|0)+Math.imul(C,wt)|0,o=o+Math.imul(C,_t)|0;var qt=(c+(n=n+Math.imul(N,kt)|0)|0)+((8191&(i=(i=i+Math.imul(N,Bt)|0)+Math.imul(R,kt)|0))<<13)|0;c=((o=o+Math.imul(R,Bt)|0)+(i>>>13)|0)+(qt>>>26)|0,qt&=67108863,n=Math.imul(W,yt),i=(i=Math.imul(W,bt))+Math.imul(H,yt)|0,o=Math.imul(H,bt),n=n+Math.imul(z,wt)|0,i=(i=i+Math.imul(z,_t)|0)+Math.imul(q,wt)|0,o=o+Math.imul(q,_t)|0;var Dt=(c+(n=n+Math.imul(L,kt)|0)|0)+((8191&(i=(i=i+Math.imul(L,Bt)|0)+Math.imul(C,kt)|0))<<13)|0;c=((o=o+Math.imul(C,Bt)|0)+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,n=Math.imul(W,wt),i=(i=Math.imul(W,_t))+Math.imul(H,wt)|0,o=Math.imul(H,_t);var Ft=(c+(n=n+Math.imul(z,kt)|0)|0)+((8191&(i=(i=i+Math.imul(z,Bt)|0)+Math.imul(q,kt)|0))<<13)|0;c=((o=o+Math.imul(q,Bt)|0)+(i>>>13)|0)+(Ft>>>26)|0,Ft&=67108863;var Kt=(c+(n=Math.imul(W,kt))|0)+((8191&(i=(i=Math.imul(W,Bt))+Math.imul(H,kt)|0))<<13)|0;return c=((o=Math.imul(H,Bt))+(i>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,u[0]=St,u[1]=jt,u[2]=Ot,u[3]=Et,u[4]=At,u[5]=xt,u[6]=It,u[7]=Pt,u[8]=Nt,u[9]=Rt,u[10]=Tt,u[11]=Lt,u[12]=Ct,u[13]=Ut,u[14]=zt,u[15]=qt,u[16]=Dt,u[17]=Ft,u[18]=Kt,0!==c&&(u[19]=c,r.length++),r};function bigMulTo(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var h=o-c,l=(0|t.words[h])*(0|e.words[c]),d=67108863&l;a=67108863&(d=d+a|0),i+=(s=(s=s+(l/67108864|0)|0)+(d>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function jumboMulTo(t,e,r){return bigMulTo(t,e,r)}function FFTM(t,e){this.x=t,this.y=e}Math.imul||(a=smallMulTo),BN.prototype.mulTo=function mulTo(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?a(this,t,e):r<63?smallMulTo(this,t,e):r<1024?bigMulTo(this,t,e):jumboMulTo(this,t,e)},FFTM.prototype.makeRBT=function makeRBT(t){for(var e=new Array(t),r=BN.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},FFTM.prototype.revBin=function revBin(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},FFTM.prototype.permute=function permute(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},FFTM.prototype.transform=function transform(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=u,d=c,p=0;p<s;p++){var m=r[h+p],g=n[h+p],y=r[h+p+s],b=n[h+p+s],v=l*y-d*b;b=l*b+d*y,y=v,r[h+p]=m+y,n[h+p]=g+b,r[h+p+s]=m-y,n[h+p+s]=g-b,p!==a&&(v=u*l-c*d,d=u*d+c*l,l=v)}},FFTM.prototype.guessLen13b=function guessLen13b(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},FFTM.prototype.conjugate=function conjugate(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},FFTM.prototype.normalize13b=function normalize13b(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},FFTM.prototype.convert13b=function convert13b(t,e,r,n){for(var i=0,o=0;o<e;o++)i+=0|t[o],r[2*o]=8191&i,i>>>=13,r[2*o+1]=8191&i,i>>>=13;for(o=2*e;o<n;++o)r[o]=0;assert(0===i),assert(0==(-8192&i))},FFTM.prototype.stub=function stub(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},FFTM.prototype.mulp=function mulp(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),u=new Array(n),c=new Array(n),h=new Array(n),l=new Array(n),d=r.words;d.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,c,n),this.transform(s,o,a,u,n,i),this.transform(c,o,h,l,n,i);for(var p=0;p<n;p++){var m=a[p]*h[p]-u[p]*l[p];u[p]=a[p]*l[p]+u[p]*h[p],a[p]=m}return this.conjugate(a,u,n),this.transform(a,u,d,o,n,i),this.conjugate(d,o,n),this.normalize13b(d,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r._strip()},BN.prototype.mul=function mul(t){var e=new BN(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},BN.prototype.mulf=function mulf(t){var e=new BN(null);return e.words=new Array(this.length+t.length),jumboMulTo(this,t,e)},BN.prototype.imul=function imul(t){return this.clone().mulTo(t,this)},BN.prototype.imuln=function imuln(t){var e=t<0;e&&(t=-t),assert("number"==typeof t),assert(t<67108864);for(var r=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,o=(67108863&i)+(67108863&r);r>>=26,r+=i/67108864|0,r+=o>>>26,this.words[n]=67108863&o}return 0!==r&&(this.words[n]=r,this.length++),e?this.ineg():this},BN.prototype.muln=function muln(t){return this.clone().imuln(t)},BN.prototype.sqr=function sqr(){return this.mul(this)},BN.prototype.isqr=function isqr(){return this.imul(this.clone())},BN.prototype.pow=function pow(t){var e=function toBitArray(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}(t);if(0===e.length)return new BN(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},BN.prototype.iushln=function iushln(t){assert("number"==typeof t&&t>=0);var e,r=t%26,n=(t-r)/26,i=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(e=0;e<this.length;e++){var s=this.words[e]&i,a=(0|this.words[e])-s<<r;this.words[e]=a|o,o=s>>>26-r}o&&(this.words[e]=o,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this._strip()},BN.prototype.ishln=function ishln(t){return assert(0===this.negative),this.iushln(t)},BN.prototype.iushrn=function iushrn(t,e,r){var n;assert("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var i=t%26,o=Math.min((t-i)/26,this.length),s=67108863^67108863>>>i<<i,a=r;if(n-=o,n=Math.max(0,n),a){for(var u=0;u<o;u++)a.words[u]=this.words[u];a.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=n);u--){var h=0|this.words[u];this.words[u]=c<<26-i|h>>>i,c=h&s}return a&&0!==c&&(a.words[a.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},BN.prototype.ishrn=function ishrn(t,e,r){return assert(0===this.negative),this.iushrn(t,e,r)},BN.prototype.shln=function shln(t){return this.clone().ishln(t)},BN.prototype.ushln=function ushln(t){return this.clone().iushln(t)},BN.prototype.shrn=function shrn(t){return this.clone().ishrn(t)},BN.prototype.ushrn=function ushrn(t){return this.clone().iushrn(t)},BN.prototype.testn=function testn(t){assert("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,n=1<<e;return!(this.length<=r)&&!!(this.words[r]&n)},BN.prototype.imaskn=function imaskn(t){assert("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(assert(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this._strip()},BN.prototype.maskn=function maskn(t){return this.clone().imaskn(t)},BN.prototype.iaddn=function iaddn(t){return assert("number"==typeof t),assert(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},BN.prototype._iaddn=function _iaddn(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},BN.prototype.isubn=function isubn(t){if(assert("number"==typeof t),assert(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},BN.prototype.addn=function addn(t){return this.clone().iaddn(t)},BN.prototype.subn=function subn(t){return this.clone().isubn(t)},BN.prototype.iabs=function iabs(){return this.negative=0,this},BN.prototype.abs=function abs(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function _ishlnsubmul(t,e,r){var n,i,o=t.length+r;this._expand(o);var s=0;for(n=0;n<t.length;n++){i=(0|this.words[n+r])+s;var a=(0|t.words[n])*e;s=((i-=67108863&a)>>26)-(a/67108864|0),this.words[n+r]=67108863&i}for(;n<this.length-r;n++)s=(i=(0|this.words[n+r])+s)>>26,this.words[n+r]=67108863&i;if(0===s)return this._strip();for(assert(-1===s),s=0,n=0;n<this.length;n++)s=(i=-(0|this.words[n])+s)>>26,this.words[n]=67108863&i;return this.negative=1,this._strip()},BN.prototype._wordDiv=function _wordDiv(t,e){var r=(this.length,t.length),n=this.clone(),i=t,o=0|i.words[i.length-1];0!==(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var s,a=n.length-i.length;if("mod"!==e){(s=new BN(null)).length=a+1,s.words=new Array(s.length);for(var u=0;u<s.length;u++)s.words[u]=0}var c=n.clone()._ishlnsubmul(i,1,a);0===c.negative&&(n=c,s&&(s.words[a]=1));for(var h=a-1;h>=0;h--){var l=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(l=Math.min(l/o|0,67108863),n._ishlnsubmul(i,l,h);0!==n.negative;)l--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);s&&(s.words[h]=l)}return s&&s._strip(),n._strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},BN.prototype.divmod=function divmod(t,e,r){return assert(!t.isZero()),this.isZero()?{div:new BN(0),mod:new BN(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,e),"mod"!==e&&(n=o.div.neg()),"div"!==e&&(i=o.mod.neg(),r&&0!==i.negative&&i.iadd(t)),{div:n,mod:i}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),e),"mod"!==e&&(n=o.div.neg()),{div:n,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),e),"div"!==e&&(i=o.mod.neg(),r&&0!==i.negative&&i.isub(t)),{div:o.div,mod:i}):t.length>this.length||this.cmp(t)<0?{div:new BN(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new BN(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new BN(this.modrn(t.words[0]))}:this._wordDiv(t,e);var n,i,o},BN.prototype.div=function div(t){return this.divmod(t,"div",!1).div},BN.prototype.mod=function mod(t){return this.divmod(t,"mod",!1).mod},BN.prototype.umod=function umod(t){return this.divmod(t,"mod",!0).mod},BN.prototype.divRound=function divRound(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},BN.prototype.modrn=function modrn(t){var e=t<0;e&&(t=-t),assert(t<=67108863);for(var r=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(r*n+(0|this.words[i]))%t;return e?-n:n},BN.prototype.modn=function modn(t){return this.modrn(t)},BN.prototype.idivn=function idivn(t){var e=t<0;e&&(t=-t),assert(t<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*r;this.words[n]=i/t|0,r=i%t}return this._strip(),e?this.ineg():this},BN.prototype.divn=function divn(t){return this.clone().idivn(t)},BN.prototype.egcd=function egcd(t){assert(0===t.negative),assert(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new BN(1),i=new BN(0),o=new BN(0),s=new BN(1),a=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++a;for(var u=r.clone(),c=e.clone();!e.isZero();){for(var h=0,l=1;0==(e.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(e.iushrn(h);h-- >0;)(n.isOdd()||i.isOdd())&&(n.iadd(u),i.isub(c)),n.iushrn(1),i.iushrn(1);for(var d=0,p=1;0==(r.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(u),s.isub(c)),o.iushrn(1),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),n.isub(o),i.isub(s)):(r.isub(e),o.isub(n),s.isub(i))}return{a:o,b:s,gcd:r.iushln(a)}},BN.prototype._invmp=function _invmp(t){assert(0===t.negative),assert(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,i=new BN(1),o=new BN(0),s=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var a=0,u=1;0==(e.words[0]&u)&&a<26;++a,u<<=1);if(a>0)for(e.iushrn(a);a-- >0;)i.isOdd()&&i.iadd(s),i.iushrn(1);for(var c=0,h=1;0==(r.words[0]&h)&&c<26;++c,h<<=1);if(c>0)for(r.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(s),o.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(o)):(r.isub(e),o.isub(i))}return(n=0===e.cmpn(1)?i:o).cmpn(0)<0&&n.iadd(t),n},BN.prototype.gcd=function gcd(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},BN.prototype.invm=function invm(t){return this.egcd(t).a.umod(t)},BN.prototype.isEven=function isEven(){return 0==(1&this.words[0])},BN.prototype.isOdd=function isOdd(){return 1==(1&this.words[0])},BN.prototype.andln=function andln(t){return this.words[0]&t},BN.prototype.bincn=function bincn(t){assert("number"==typeof t);var e=t%26,r=(t-e)/26,n=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var i=n,o=r;0!==i&&o<this.length;o++){var s=0|this.words[o];i=(s+=i)>>>26,s&=67108863,this.words[o]=s}return 0!==i&&(this.words[o]=i,this.length++),this},BN.prototype.isZero=function isZero(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function cmpn(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),assert(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},BN.prototype.cmp=function cmp(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},BN.prototype.ucmp=function ucmp(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},BN.prototype.gtn=function gtn(t){return 1===this.cmpn(t)},BN.prototype.gt=function gt(t){return 1===this.cmp(t)},BN.prototype.gten=function gten(t){return this.cmpn(t)>=0},BN.prototype.gte=function gte(t){return this.cmp(t)>=0},BN.prototype.ltn=function ltn(t){return-1===this.cmpn(t)},BN.prototype.lt=function lt(t){return-1===this.cmp(t)},BN.prototype.lten=function lten(t){return this.cmpn(t)<=0},BN.prototype.lte=function lte(t){return this.cmp(t)<=0},BN.prototype.eqn=function eqn(t){return 0===this.cmpn(t)},BN.prototype.eq=function eq(t){return 0===this.cmp(t)},BN.red=function red(t){return new Red(t)},BN.prototype.toRed=function toRed(t){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},BN.prototype.fromRed=function fromRed(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function _forceRed(t){return this.red=t,this},BN.prototype.forceRed=function forceRed(t){return assert(!this.red,"Already a number in reduction context"),this._forceRed(t)},BN.prototype.redAdd=function redAdd(t){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},BN.prototype.redIAdd=function redIAdd(t){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},BN.prototype.redSub=function redSub(t){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},BN.prototype.redISub=function redISub(t){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},BN.prototype.redShl=function redShl(t){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},BN.prototype.redMul=function redMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},BN.prototype.redIMul=function redIMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},BN.prototype.redSqr=function redSqr(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function redISqr(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function redSqrt(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function redInvm(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function redNeg(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function redPow(t){return assert(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var u={k256:null,p224:null,p192:null,p25519:null};function MPrime(t,e){this.name=t,this.p=new BN(e,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(t){if("string"==typeof t){var e=BN._prime(t);this.m=e.p,this.prime=e}else assert(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function Mont(t){Red.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}MPrime.prototype._tmp=function _tmp(){var t=new BN(null);return t.words=new Array(Math.ceil(this.n/13)),t},MPrime.prototype.ireduce=function ireduce(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},MPrime.prototype.split=function split(t,e){t.iushrn(this.n,0,e)},MPrime.prototype.imulK=function imulK(t){return t.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function split(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},K256.prototype.imulK=function imulK(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function imulK(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},BN._prime=function prime(t){if(u[t])return u[t];var prime;if("k256"===t)prime=new K256;else if("p224"===t)prime=new P224;else if("p192"===t)prime=new P192;else{if("p25519"!==t)throw new Error("Unknown prime "+t);prime=new P25519}return u[t]=prime,prime},Red.prototype._verify1=function _verify1(t){assert(0===t.negative,"red works only with positives"),assert(t.red,"red works only with red numbers")},Red.prototype._verify2=function _verify2(t,e){assert(0==(t.negative|e.negative),"red works only with positives"),assert(t.red&&t.red===e.red,"red works only with red numbers")},Red.prototype.imod=function imod(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(move(t,t.umod(this.m)._forceRed(this)),t)},Red.prototype.neg=function neg(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},Red.prototype.add=function add(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},Red.prototype.iadd=function iadd(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},Red.prototype.sub=function sub(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},Red.prototype.isub=function isub(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},Red.prototype.shl=function shl(t,e){return this._verify1(t),this.imod(t.ushln(e))},Red.prototype.imul=function imul(t,e){return this._verify2(t,e),this.imod(t.imul(e))},Red.prototype.mul=function mul(t,e){return this._verify2(t,e),this.imod(t.mul(e))},Red.prototype.isqr=function isqr(t){return this.imul(t,t.clone())},Red.prototype.sqr=function sqr(t){return this.mul(t,t)},Red.prototype.sqrt=function sqrt(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(assert(e%2==1),3===e){var r=this.m.add(new BN(1)).iushrn(2);return this.pow(t,r)}for(var n=this.m.subn(1),i=0;!n.isZero()&&0===n.andln(1);)i++,n.iushrn(1);assert(!n.isZero());var o=new BN(1).toRed(this),s=o.redNeg(),a=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new BN(2*u*u).toRed(this);0!==this.pow(u,a).cmp(s);)u.redIAdd(s);for(var c=this.pow(u,n),h=this.pow(t,n.addn(1).iushrn(1)),l=this.pow(t,n),d=i;0!==l.cmp(o);){for(var p=l,m=0;0!==p.cmp(o);m++)p=p.redSqr();assert(m<d);var g=this.pow(c,new BN(1).iushln(d-m-1));h=h.redMul(g),c=g.redSqr(),l=l.redMul(c),d=m}return h},Red.prototype.invm=function invm(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},Red.prototype.pow=function pow(t,e){if(e.isZero())return new BN(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new BN(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],o=0,s=0,a=e.bitLength()%26;for(0===a&&(a=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],c=a-1;c>=0;c--){var h=u>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==o?(o<<=1,o|=h,(4===++s||0===n&&0===c)&&(i=this.mul(i,r[o]),s=0,o=0)):s=0}a=26}return i},Red.prototype.convertTo=function convertTo(t){var e=t.umod(this.m);return e===t?e.clone():e},Red.prototype.convertFrom=function convertFrom(t){var e=t.clone();return e.red=null,e},BN.mont=function mont(t){return new Mont(t)},inherits(Mont,Red),Mont.prototype.convertTo=function convertTo(t){return this.imod(t.ushln(this.shift))},Mont.prototype.convertFrom=function convertFrom(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},Mont.prototype.imul=function imul(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},Mont.prototype.mul=function mul(t,e){if(t.isZero()||e.isZero())return new BN(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},Mont.prototype.invm=function invm(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(73)(t))},1577:function(t,e,r){"use strict";var n=r(23).Buffer;t.exports=function base(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(255!==e[s])throw new TypeError(o+" is ambiguous");e[s]=i}var a=t.length,u=t.charAt(0),c=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function decodeUnsafe(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return n.alloc(0);for(var r=0,i=0,o=0;t[r]===u;)i++,r++;for(var s=(t.length-r)*c+1>>>0,h=new Uint8Array(s);t[r];){var l=e[t.charCodeAt(r)];if(255===l)return;for(var d=0,p=s-1;(0!==l||d<o)&&-1!==p;p--,d++)l+=a*h[p]>>>0,h[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");o=d,r++}for(var m=s-o;m!==s&&0===h[m];)m++;var g=n.allocUnsafe(i+(s-m));g.fill(0,0,i);for(var y=i;m!==s;)g[y++]=h[m++];return g}return{encode:function encode(e){if((Array.isArray(e)||e instanceof Uint8Array)&&(e=n.from(e)),!n.isBuffer(e))throw new TypeError("Expected Buffer");if(0===e.length)return"";for(var r=0,i=0,o=0,s=e.length;o!==s&&0===e[o];)o++,r++;for(var c=(s-o)*h+1>>>0,l=new Uint8Array(c);o!==s;){for(var d=e[o],p=0,m=c-1;(0!==d||p<i)&&-1!==m;m--,p++)d+=256*l[m]>>>0,l[m]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");i=p,o++}for(var g=c-i;g!==c&&0===l[g];)g++;for(var y=u.repeat(r);g<c;++g)y+=t.charAt(l[g]);return y},decodeUnsafe:decodeUnsafe,decode:function decode(t){var e=decodeUnsafe(t);if(e)return e;throw new Error("Non-base"+a+" character")}}}},1578:function(t,e,r){"use strict";(function(t){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.deserializeUnchecked=e.deserialize=e.serialize=e.BinaryReader=e.BinaryWriter=e.BorshError=e.baseDecode=e.baseEncode=void 0;const u=a(r(1579)),c=a(r(1452)),h=s(r(1580)),l=new("function"!=typeof TextDecoder?h.TextDecoder:TextDecoder)("utf-8",{fatal:!0});e.baseEncode=function baseEncode(e){return"string"==typeof e&&(e=t.from(e,"utf8")),c.default.encode(t.from(e))},e.baseDecode=function baseDecode(e){return t.from(c.default.decode(e))};class BorshError extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}e.BorshError=BorshError;class BinaryWriter{constructor(){this.buf=t.alloc(1024),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=t.concat([this.buf,t.alloc(1024)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(t.from(new u.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(t.from(new u.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(t.from(new u.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(t.from(new u.default(e).toArray("le",64)))}writeBuffer(e){this.buf=t.concat([t.from(this.buf.subarray(0,this.length)),e,t.alloc(1024)]),this.length+=e.length}writeString(e){this.maybeResize();const r=t.from(e,"utf8");this.writeU32(r.length),this.writeBuffer(r)}writeFixedArray(e){this.writeBuffer(t.from(e))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}function handlingRangeError(t,e,r){const n=r.value;r.value=function(...t){try{return n.apply(this,t)}catch(t){if(t instanceof RangeError){const e=t.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(e)>=0)throw new BorshError("Reached the end of buffer when deserializing")}throw t}}}e.BinaryWriter=BinaryWriter;class BinaryReader{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new u.default(t,"le")}readU128(){const t=this.readBuffer(16);return new u.default(t,"le")}readU256(){const t=this.readBuffer(32);return new u.default(t,"le")}readU512(){const t=this.readBuffer(64);return new u.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new BorshError(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return l.decode(e)}catch(t){throw new BorshError("Error decoding UTF-8 string: "+t)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let n=0;n<e;++n)r.push(t());return r}}function capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}function serializeField(t,e,r,n,i){try{if("string"==typeof n)i["write"+capitalizeFirstLetter(n)](r);else if(n instanceof Array)if("number"==typeof n[0]){if(r.length!==n[0])throw new BorshError(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(2===n.length&&"number"==typeof n[1]){if(r.length!==n[1])throw new BorshError(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let e=0;e<n[1];e++)serializeField(t,null,r[e],n[0],i)}else i.writeArray(r,r=>{serializeField(t,e,r,n[0],i)});else if(void 0!==n.kind)switch(n.kind){case"option":null==r?i.writeU8(0):(i.writeU8(1),serializeField(t,e,r,n.type,i));break;case"map":i.writeU32(r.size),r.forEach((r,o)=>{serializeField(t,e,o,n.key,i),serializeField(t,e,r,n.value,i)});break;default:throw new BorshError(`FieldType ${n} unrecognized`)}else serializeStruct(t,r,i)}catch(t){throw t instanceof BorshError&&t.addToFieldPath(e),t}}function serializeStruct(t,e,r){if("function"==typeof e.borshSerialize)return void e.borshSerialize(r);const n=t.get(e.constructor);if(!n)throw new BorshError(`Class ${e.constructor.name} is missing in schema`);if("struct"===n.kind)n.fields.map(([n,i])=>{serializeField(t,n,e[n],i,r)});else{if("enum"!==n.kind)throw new BorshError(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`);{const i=e[n.field];for(let o=0;o<n.values.length;++o){const[s,a]=n.values[o];if(s===i){r.writeU8(o),serializeField(t,s,e[s],a,r);break}}}}}function deserializeField(t,e,r,n){try{if("string"==typeof r)return n["read"+capitalizeFirstLetter(r)]();if(r instanceof Array){if("number"==typeof r[0])return n.readFixedArray(r[0]);if("number"==typeof r[1]){const e=[];for(let i=0;i<r[1];i++)e.push(deserializeField(t,null,r[0],n));return e}return n.readArray(()=>deserializeField(t,e,r[0],n))}if("option"===r.kind){return n.readU8()?deserializeField(t,e,r.type,n):void 0}if("map"===r.kind){let i=new Map;const o=n.readU32();for(let s=0;s<o;s++){const o=deserializeField(t,e,r.key,n),s=deserializeField(t,e,r.value,n);i.set(o,s)}return i}return deserializeStruct(t,r,n)}catch(t){throw t instanceof BorshError&&t.addToFieldPath(e),t}}function deserializeStruct(t,e,r){if("function"==typeof e.borshDeserialize)return e.borshDeserialize(r);const n=t.get(e);if(!n)throw new BorshError(`Class ${e.name} is missing in schema`);if("struct"===n.kind){const n={};for(const[i,o]of t.get(e).fields)n[i]=deserializeField(t,i,o,r);return new e(n)}if("enum"===n.kind){const i=r.readU8();if(i>=n.values.length)throw new BorshError(`Enum index: ${i} is out of range`);const[o,s]=n.values[i];return new e({[o]:deserializeField(t,o,s,r)})}throw new BorshError(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}o([handlingRangeError],BinaryReader.prototype,"readU8",null),o([handlingRangeError],BinaryReader.prototype,"readU16",null),o([handlingRangeError],BinaryReader.prototype,"readU32",null),o([handlingRangeError],BinaryReader.prototype,"readU64",null),o([handlingRangeError],BinaryReader.prototype,"readU128",null),o([handlingRangeError],BinaryReader.prototype,"readU256",null),o([handlingRangeError],BinaryReader.prototype,"readU512",null),o([handlingRangeError],BinaryReader.prototype,"readString",null),o([handlingRangeError],BinaryReader.prototype,"readFixedArray",null),o([handlingRangeError],BinaryReader.prototype,"readArray",null),e.BinaryReader=BinaryReader,e.serialize=function serialize(t,e,r=BinaryWriter){const n=new r;return serializeStruct(t,e,n),n.toArray()},e.deserialize=function deserialize(t,e,r,n=BinaryReader){const i=new n(r),o=deserializeStruct(t,e,i);if(i.offset<r.length)throw new BorshError(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return o},e.deserializeUnchecked=function deserializeUnchecked(t,e,r,n=BinaryReader){return deserializeStruct(t,e,new n(r))}}).call(this,r(15).Buffer)},1579:function(t,e,r){(function(t){!function(t,e){"use strict";function assert(t,e){if(!t)throw new Error(e||"Assertion failed")}function inherits(t,e){t.super_=e;var TempCtor=function(){};TempCtor.prototype=e.prototype,t.prototype=new TempCtor,t.prototype.constructor=t}function BN(t,e,r){if(BN.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var n;"object"==typeof t?t.exports=BN:e.BN=BN,BN.BN=BN,BN.wordSize=26;try{n="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(1453).Buffer}catch(t){}function parseHex4Bits(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void assert(!1,"Invalid character in "+t)}function parseHexByte(t,e,r){var n=parseHex4Bits(t,r);return r-1>=e&&(n|=parseHex4Bits(t,r-1)<<4),n}function parseBase(t,e,r,n){for(var i=0,o=0,s=Math.min(t.length,r),a=e;a<s;a++){var u=t.charCodeAt(a)-48;i*=n,o=u>=49?u-49+10:u>=17?u-17+10:u,assert(u>=0&&o<n,"Invalid character"),i+=o}return i}function move(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(BN.isBN=function isBN(t){return t instanceof BN||null!==t&&"object"==typeof t&&t.constructor.wordSize===BN.wordSize&&Array.isArray(t.words)},BN.max=function max(t,e){return t.cmp(e)>0?t:e},BN.min=function min(t,e){return t.cmp(e)<0?t:e},BN.prototype._init=function init(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),assert(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,r):(this._parseBase(t,e,n),"le"===r&&this._initArray(this.toArray(),e,r)))},BN.prototype._initNumber=function _initNumber(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(assert(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},BN.prototype._initArray=function _initArray(t,e,r){if(assert("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o,s=0;if("be"===r)for(n=t.length-1,i=0;n>=0;n-=3)o=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[i]|=o<<s&67108863,this.words[i+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,i++);else if("le"===r)for(n=0,i=0;n<t.length;n+=3)o=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[i]|=o<<s&67108863,this.words[i+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,i++);return this._strip()},BN.prototype._parseHex=function _parseHex(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=parseHexByte(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=parseHexByte(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this._strip()},BN.prototype._parseBase=function _parseBase(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,u=0,c=r;c<a;c+=n)u=parseBase(t,c,c+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var h=1;for(u=parseBase(t,c,t.length,e),c=0;c<s;c++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},BN.prototype.copy=function copy(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},BN.prototype._move=function _move(t){move(t,this)},BN.prototype.clone=function clone(){var t=new BN(null);return this.copy(t),t},BN.prototype._expand=function _expand(t){for(;this.length<t;)this.words[this.length++]=0;return this},BN.prototype._strip=function strip(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function _normSign(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{BN.prototype[Symbol.for("nodejs.util.inspect.custom")]=inspect}catch(t){BN.prototype.inspect=inspect}else BN.prototype.inspect=inspect;function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var i=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],o=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],s=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];BN.prototype.toString=function toString(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var n=0,a=0,u=0;u<this.length;u++){var c=this.words[u],h=(16777215&(c<<n|a)).toString(16);r=0!==(a=c>>>24-n&16777215)||u!==this.length-1?i[6-h.length]+h+r:h+r,(n+=2)>=26&&(n-=26,u--)}for(0!==a&&(r=a.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var l=o[t],d=s[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modrn(d).toString(t);r=(p=p.idivn(d)).isZero()?m+r:i[l-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function toNumber(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},BN.prototype.toJSON=function toJSON(){return this.toString(16,2)},n&&(BN.prototype.toBuffer=function toBuffer(t,e){return this.toArrayLike(n,t,e)}),BN.prototype.toArray=function toArray(t,e){return this.toArrayLike(Array,t,e)};function smallMulTo(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var h=u>>>26,l=67108863&u,d=Math.min(c,e.length-1),p=Math.max(0,c-t.length+1);p<=d;p++){var m=c-p|0;h+=(s=(i=0|t.words[m])*(o=0|e.words[p])+l)/67108864|0,l=67108863&s}r.words[c]=0|l,u=0|h}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}BN.prototype.toArrayLike=function toArrayLike(t,e,r){this._strip();var n=this.byteLength(),i=r||Math.max(1,n);assert(n<=i,"byte array longer than desired length"),assert(i>0,"Requested array length <= 0");var o=function allocate(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,i);return this["_toArrayLike"+("le"===e?"LE":"BE")](o,n),o},BN.prototype._toArrayLikeLE=function _toArrayLikeLE(t,e){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r++]=255&s,r<t.length&&(t[r++]=s>>8&255),r<t.length&&(t[r++]=s>>16&255),6===o?(r<t.length&&(t[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<t.length)for(t[r++]=n;r<t.length;)t[r++]=0},BN.prototype._toArrayLikeBE=function _toArrayLikeBE(t,e){for(var r=t.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r--]=255&s,r>=0&&(t[r--]=s>>8&255),r>=0&&(t[r--]=s>>16&255),6===o?(r>=0&&(t[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0)for(t[r--]=n;r>=0;)t[r--]=0},Math.clz32?BN.prototype._countBits=function _countBits(t){return 32-Math.clz32(t)}:BN.prototype._countBits=function _countBits(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},BN.prototype._zeroBits=function _zeroBits(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},BN.prototype.bitLength=function bitLength(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function toTwos(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},BN.prototype.fromTwos=function fromTwos(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function isNeg(){return 0!==this.negative},BN.prototype.neg=function neg(){return this.clone().ineg()},BN.prototype.ineg=function ineg(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function iuor(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},BN.prototype.ior=function ior(t){return assert(0==(this.negative|t.negative)),this.iuor(t)},BN.prototype.or=function or(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},BN.prototype.uor=function uor(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},BN.prototype.iuand=function iuand(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},BN.prototype.iand=function iand(t){return assert(0==(this.negative|t.negative)),this.iuand(t)},BN.prototype.and=function and(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},BN.prototype.uand=function uand(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},BN.prototype.iuxor=function iuxor(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},BN.prototype.ixor=function ixor(t){return assert(0==(this.negative|t.negative)),this.iuxor(t)},BN.prototype.xor=function xor(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},BN.prototype.uxor=function uxor(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},BN.prototype.inotn=function inotn(t){assert("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this._strip()},BN.prototype.notn=function notn(t){return this.clone().inotn(t)},BN.prototype.setn=function setn(t,e){assert("number"==typeof t&&t>=0);var r=t/26|0,n=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<n:this.words[r]&~(1<<n),this._strip()},BN.prototype.iadd=function iadd(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},BN.prototype.add=function add(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},BN.prototype.isub=function isub(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this._strip()},BN.prototype.sub=function sub(t){return this.clone().isub(t)};var a=function comb10MulTo(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,c=0,h=0|s[0],l=8191&h,d=h>>>13,p=0|s[1],m=8191&p,g=p>>>13,y=0|s[2],b=8191&y,v=y>>>13,w=0|s[3],_=8191&w,k=w>>>13,B=0|s[4],j=8191&B,O=B>>>13,E=0|s[5],x=8191&E,I=E>>>13,P=0|s[6],N=8191&P,R=P>>>13,T=0|s[7],L=8191&T,C=T>>>13,U=0|s[8],z=8191&U,q=U>>>13,D=0|s[9],W=8191&D,H=D>>>13,$=0|a[0],G=8191&$,V=$>>>13,J=0|a[1],Y=8191&J,X=J>>>13,Q=0|a[2],tt=8191&Q,et=Q>>>13,rt=0|a[3],nt=8191&rt,it=rt>>>13,ot=0|a[4],st=8191&ot,at=ot>>>13,ut=0|a[5],ct=8191&ut,ht=ut>>>13,dt=0|a[6],ft=8191&dt,pt=dt>>>13,mt=0|a[7],yt=8191&mt,bt=mt>>>13,vt=0|a[8],wt=8191&vt,_t=vt>>>13,Mt=0|a[9],kt=8191&Mt,Bt=Mt>>>13;r.negative=t.negative^e.negative,r.length=19;var St=(c+(n=Math.imul(l,G))|0)+((8191&(i=(i=Math.imul(l,V))+Math.imul(d,G)|0))<<13)|0;c=((o=Math.imul(d,V))+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(m,G),i=(i=Math.imul(m,V))+Math.imul(g,G)|0,o=Math.imul(g,V);var jt=(c+(n=n+Math.imul(l,Y)|0)|0)+((8191&(i=(i=i+Math.imul(l,X)|0)+Math.imul(d,Y)|0))<<13)|0;c=((o=o+Math.imul(d,X)|0)+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,n=Math.imul(b,G),i=(i=Math.imul(b,V))+Math.imul(v,G)|0,o=Math.imul(v,V),n=n+Math.imul(m,Y)|0,i=(i=i+Math.imul(m,X)|0)+Math.imul(g,Y)|0,o=o+Math.imul(g,X)|0;var Ot=(c+(n=n+Math.imul(l,tt)|0)|0)+((8191&(i=(i=i+Math.imul(l,et)|0)+Math.imul(d,tt)|0))<<13)|0;c=((o=o+Math.imul(d,et)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(_,G),i=(i=Math.imul(_,V))+Math.imul(k,G)|0,o=Math.imul(k,V),n=n+Math.imul(b,Y)|0,i=(i=i+Math.imul(b,X)|0)+Math.imul(v,Y)|0,o=o+Math.imul(v,X)|0,n=n+Math.imul(m,tt)|0,i=(i=i+Math.imul(m,et)|0)+Math.imul(g,tt)|0,o=o+Math.imul(g,et)|0;var Et=(c+(n=n+Math.imul(l,nt)|0)|0)+((8191&(i=(i=i+Math.imul(l,it)|0)+Math.imul(d,nt)|0))<<13)|0;c=((o=o+Math.imul(d,it)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(j,G),i=(i=Math.imul(j,V))+Math.imul(O,G)|0,o=Math.imul(O,V),n=n+Math.imul(_,Y)|0,i=(i=i+Math.imul(_,X)|0)+Math.imul(k,Y)|0,o=o+Math.imul(k,X)|0,n=n+Math.imul(b,tt)|0,i=(i=i+Math.imul(b,et)|0)+Math.imul(v,tt)|0,o=o+Math.imul(v,et)|0,n=n+Math.imul(m,nt)|0,i=(i=i+Math.imul(m,it)|0)+Math.imul(g,nt)|0,o=o+Math.imul(g,it)|0;var At=(c+(n=n+Math.imul(l,st)|0)|0)+((8191&(i=(i=i+Math.imul(l,at)|0)+Math.imul(d,st)|0))<<13)|0;c=((o=o+Math.imul(d,at)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(x,G),i=(i=Math.imul(x,V))+Math.imul(I,G)|0,o=Math.imul(I,V),n=n+Math.imul(j,Y)|0,i=(i=i+Math.imul(j,X)|0)+Math.imul(O,Y)|0,o=o+Math.imul(O,X)|0,n=n+Math.imul(_,tt)|0,i=(i=i+Math.imul(_,et)|0)+Math.imul(k,tt)|0,o=o+Math.imul(k,et)|0,n=n+Math.imul(b,nt)|0,i=(i=i+Math.imul(b,it)|0)+Math.imul(v,nt)|0,o=o+Math.imul(v,it)|0,n=n+Math.imul(m,st)|0,i=(i=i+Math.imul(m,at)|0)+Math.imul(g,st)|0,o=o+Math.imul(g,at)|0;var xt=(c+(n=n+Math.imul(l,ct)|0)|0)+((8191&(i=(i=i+Math.imul(l,ht)|0)+Math.imul(d,ct)|0))<<13)|0;c=((o=o+Math.imul(d,ht)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(N,G),i=(i=Math.imul(N,V))+Math.imul(R,G)|0,o=Math.imul(R,V),n=n+Math.imul(x,Y)|0,i=(i=i+Math.imul(x,X)|0)+Math.imul(I,Y)|0,o=o+Math.imul(I,X)|0,n=n+Math.imul(j,tt)|0,i=(i=i+Math.imul(j,et)|0)+Math.imul(O,tt)|0,o=o+Math.imul(O,et)|0,n=n+Math.imul(_,nt)|0,i=(i=i+Math.imul(_,it)|0)+Math.imul(k,nt)|0,o=o+Math.imul(k,it)|0,n=n+Math.imul(b,st)|0,i=(i=i+Math.imul(b,at)|0)+Math.imul(v,st)|0,o=o+Math.imul(v,at)|0,n=n+Math.imul(m,ct)|0,i=(i=i+Math.imul(m,ht)|0)+Math.imul(g,ct)|0,o=o+Math.imul(g,ht)|0;var It=(c+(n=n+Math.imul(l,ft)|0)|0)+((8191&(i=(i=i+Math.imul(l,pt)|0)+Math.imul(d,ft)|0))<<13)|0;c=((o=o+Math.imul(d,pt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(L,G),i=(i=Math.imul(L,V))+Math.imul(C,G)|0,o=Math.imul(C,V),n=n+Math.imul(N,Y)|0,i=(i=i+Math.imul(N,X)|0)+Math.imul(R,Y)|0,o=o+Math.imul(R,X)|0,n=n+Math.imul(x,tt)|0,i=(i=i+Math.imul(x,et)|0)+Math.imul(I,tt)|0,o=o+Math.imul(I,et)|0,n=n+Math.imul(j,nt)|0,i=(i=i+Math.imul(j,it)|0)+Math.imul(O,nt)|0,o=o+Math.imul(O,it)|0,n=n+Math.imul(_,st)|0,i=(i=i+Math.imul(_,at)|0)+Math.imul(k,st)|0,o=o+Math.imul(k,at)|0,n=n+Math.imul(b,ct)|0,i=(i=i+Math.imul(b,ht)|0)+Math.imul(v,ct)|0,o=o+Math.imul(v,ht)|0,n=n+Math.imul(m,ft)|0,i=(i=i+Math.imul(m,pt)|0)+Math.imul(g,ft)|0,o=o+Math.imul(g,pt)|0;var Pt=(c+(n=n+Math.imul(l,yt)|0)|0)+((8191&(i=(i=i+Math.imul(l,bt)|0)+Math.imul(d,yt)|0))<<13)|0;c=((o=o+Math.imul(d,bt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(z,G),i=(i=Math.imul(z,V))+Math.imul(q,G)|0,o=Math.imul(q,V),n=n+Math.imul(L,Y)|0,i=(i=i+Math.imul(L,X)|0)+Math.imul(C,Y)|0,o=o+Math.imul(C,X)|0,n=n+Math.imul(N,tt)|0,i=(i=i+Math.imul(N,et)|0)+Math.imul(R,tt)|0,o=o+Math.imul(R,et)|0,n=n+Math.imul(x,nt)|0,i=(i=i+Math.imul(x,it)|0)+Math.imul(I,nt)|0,o=o+Math.imul(I,it)|0,n=n+Math.imul(j,st)|0,i=(i=i+Math.imul(j,at)|0)+Math.imul(O,st)|0,o=o+Math.imul(O,at)|0,n=n+Math.imul(_,ct)|0,i=(i=i+Math.imul(_,ht)|0)+Math.imul(k,ct)|0,o=o+Math.imul(k,ht)|0,n=n+Math.imul(b,ft)|0,i=(i=i+Math.imul(b,pt)|0)+Math.imul(v,ft)|0,o=o+Math.imul(v,pt)|0,n=n+Math.imul(m,yt)|0,i=(i=i+Math.imul(m,bt)|0)+Math.imul(g,yt)|0,o=o+Math.imul(g,bt)|0;var Nt=(c+(n=n+Math.imul(l,wt)|0)|0)+((8191&(i=(i=i+Math.imul(l,_t)|0)+Math.imul(d,wt)|0))<<13)|0;c=((o=o+Math.imul(d,_t)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,n=Math.imul(W,G),i=(i=Math.imul(W,V))+Math.imul(H,G)|0,o=Math.imul(H,V),n=n+Math.imul(z,Y)|0,i=(i=i+Math.imul(z,X)|0)+Math.imul(q,Y)|0,o=o+Math.imul(q,X)|0,n=n+Math.imul(L,tt)|0,i=(i=i+Math.imul(L,et)|0)+Math.imul(C,tt)|0,o=o+Math.imul(C,et)|0,n=n+Math.imul(N,nt)|0,i=(i=i+Math.imul(N,it)|0)+Math.imul(R,nt)|0,o=o+Math.imul(R,it)|0,n=n+Math.imul(x,st)|0,i=(i=i+Math.imul(x,at)|0)+Math.imul(I,st)|0,o=o+Math.imul(I,at)|0,n=n+Math.imul(j,ct)|0,i=(i=i+Math.imul(j,ht)|0)+Math.imul(O,ct)|0,o=o+Math.imul(O,ht)|0,n=n+Math.imul(_,ft)|0,i=(i=i+Math.imul(_,pt)|0)+Math.imul(k,ft)|0,o=o+Math.imul(k,pt)|0,n=n+Math.imul(b,yt)|0,i=(i=i+Math.imul(b,bt)|0)+Math.imul(v,yt)|0,o=o+Math.imul(v,bt)|0,n=n+Math.imul(m,wt)|0,i=(i=i+Math.imul(m,_t)|0)+Math.imul(g,wt)|0,o=o+Math.imul(g,_t)|0;var Rt=(c+(n=n+Math.imul(l,kt)|0)|0)+((8191&(i=(i=i+Math.imul(l,Bt)|0)+Math.imul(d,kt)|0))<<13)|0;c=((o=o+Math.imul(d,Bt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(W,Y),i=(i=Math.imul(W,X))+Math.imul(H,Y)|0,o=Math.imul(H,X),n=n+Math.imul(z,tt)|0,i=(i=i+Math.imul(z,et)|0)+Math.imul(q,tt)|0,o=o+Math.imul(q,et)|0,n=n+Math.imul(L,nt)|0,i=(i=i+Math.imul(L,it)|0)+Math.imul(C,nt)|0,o=o+Math.imul(C,it)|0,n=n+Math.imul(N,st)|0,i=(i=i+Math.imul(N,at)|0)+Math.imul(R,st)|0,o=o+Math.imul(R,at)|0,n=n+Math.imul(x,ct)|0,i=(i=i+Math.imul(x,ht)|0)+Math.imul(I,ct)|0,o=o+Math.imul(I,ht)|0,n=n+Math.imul(j,ft)|0,i=(i=i+Math.imul(j,pt)|0)+Math.imul(O,ft)|0,o=o+Math.imul(O,pt)|0,n=n+Math.imul(_,yt)|0,i=(i=i+Math.imul(_,bt)|0)+Math.imul(k,yt)|0,o=o+Math.imul(k,bt)|0,n=n+Math.imul(b,wt)|0,i=(i=i+Math.imul(b,_t)|0)+Math.imul(v,wt)|0,o=o+Math.imul(v,_t)|0;var Tt=(c+(n=n+Math.imul(m,kt)|0)|0)+((8191&(i=(i=i+Math.imul(m,Bt)|0)+Math.imul(g,kt)|0))<<13)|0;c=((o=o+Math.imul(g,Bt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(W,tt),i=(i=Math.imul(W,et))+Math.imul(H,tt)|0,o=Math.imul(H,et),n=n+Math.imul(z,nt)|0,i=(i=i+Math.imul(z,it)|0)+Math.imul(q,nt)|0,o=o+Math.imul(q,it)|0,n=n+Math.imul(L,st)|0,i=(i=i+Math.imul(L,at)|0)+Math.imul(C,st)|0,o=o+Math.imul(C,at)|0,n=n+Math.imul(N,ct)|0,i=(i=i+Math.imul(N,ht)|0)+Math.imul(R,ct)|0,o=o+Math.imul(R,ht)|0,n=n+Math.imul(x,ft)|0,i=(i=i+Math.imul(x,pt)|0)+Math.imul(I,ft)|0,o=o+Math.imul(I,pt)|0,n=n+Math.imul(j,yt)|0,i=(i=i+Math.imul(j,bt)|0)+Math.imul(O,yt)|0,o=o+Math.imul(O,bt)|0,n=n+Math.imul(_,wt)|0,i=(i=i+Math.imul(_,_t)|0)+Math.imul(k,wt)|0,o=o+Math.imul(k,_t)|0;var Lt=(c+(n=n+Math.imul(b,kt)|0)|0)+((8191&(i=(i=i+Math.imul(b,Bt)|0)+Math.imul(v,kt)|0))<<13)|0;c=((o=o+Math.imul(v,Bt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(W,nt),i=(i=Math.imul(W,it))+Math.imul(H,nt)|0,o=Math.imul(H,it),n=n+Math.imul(z,st)|0,i=(i=i+Math.imul(z,at)|0)+Math.imul(q,st)|0,o=o+Math.imul(q,at)|0,n=n+Math.imul(L,ct)|0,i=(i=i+Math.imul(L,ht)|0)+Math.imul(C,ct)|0,o=o+Math.imul(C,ht)|0,n=n+Math.imul(N,ft)|0,i=(i=i+Math.imul(N,pt)|0)+Math.imul(R,ft)|0,o=o+Math.imul(R,pt)|0,n=n+Math.imul(x,yt)|0,i=(i=i+Math.imul(x,bt)|0)+Math.imul(I,yt)|0,o=o+Math.imul(I,bt)|0,n=n+Math.imul(j,wt)|0,i=(i=i+Math.imul(j,_t)|0)+Math.imul(O,wt)|0,o=o+Math.imul(O,_t)|0;var Ct=(c+(n=n+Math.imul(_,kt)|0)|0)+((8191&(i=(i=i+Math.imul(_,Bt)|0)+Math.imul(k,kt)|0))<<13)|0;c=((o=o+Math.imul(k,Bt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(W,st),i=(i=Math.imul(W,at))+Math.imul(H,st)|0,o=Math.imul(H,at),n=n+Math.imul(z,ct)|0,i=(i=i+Math.imul(z,ht)|0)+Math.imul(q,ct)|0,o=o+Math.imul(q,ht)|0,n=n+Math.imul(L,ft)|0,i=(i=i+Math.imul(L,pt)|0)+Math.imul(C,ft)|0,o=o+Math.imul(C,pt)|0,n=n+Math.imul(N,yt)|0,i=(i=i+Math.imul(N,bt)|0)+Math.imul(R,yt)|0,o=o+Math.imul(R,bt)|0,n=n+Math.imul(x,wt)|0,i=(i=i+Math.imul(x,_t)|0)+Math.imul(I,wt)|0,o=o+Math.imul(I,_t)|0;var Ut=(c+(n=n+Math.imul(j,kt)|0)|0)+((8191&(i=(i=i+Math.imul(j,Bt)|0)+Math.imul(O,kt)|0))<<13)|0;c=((o=o+Math.imul(O,Bt)|0)+(i>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,n=Math.imul(W,ct),i=(i=Math.imul(W,ht))+Math.imul(H,ct)|0,o=Math.imul(H,ht),n=n+Math.imul(z,ft)|0,i=(i=i+Math.imul(z,pt)|0)+Math.imul(q,ft)|0,o=o+Math.imul(q,pt)|0,n=n+Math.imul(L,yt)|0,i=(i=i+Math.imul(L,bt)|0)+Math.imul(C,yt)|0,o=o+Math.imul(C,bt)|0,n=n+Math.imul(N,wt)|0,i=(i=i+Math.imul(N,_t)|0)+Math.imul(R,wt)|0,o=o+Math.imul(R,_t)|0;var zt=(c+(n=n+Math.imul(x,kt)|0)|0)+((8191&(i=(i=i+Math.imul(x,Bt)|0)+Math.imul(I,kt)|0))<<13)|0;c=((o=o+Math.imul(I,Bt)|0)+(i>>>13)|0)+(zt>>>26)|0,zt&=67108863,n=Math.imul(W,ft),i=(i=Math.imul(W,pt))+Math.imul(H,ft)|0,o=Math.imul(H,pt),n=n+Math.imul(z,yt)|0,i=(i=i+Math.imul(z,bt)|0)+Math.imul(q,yt)|0,o=o+Math.imul(q,bt)|0,n=n+Math.imul(L,wt)|0,i=(i=i+Math.imul(L,_t)|0)+Math.imul(C,wt)|0,o=o+Math.imul(C,_t)|0;var qt=(c+(n=n+Math.imul(N,kt)|0)|0)+((8191&(i=(i=i+Math.imul(N,Bt)|0)+Math.imul(R,kt)|0))<<13)|0;c=((o=o+Math.imul(R,Bt)|0)+(i>>>13)|0)+(qt>>>26)|0,qt&=67108863,n=Math.imul(W,yt),i=(i=Math.imul(W,bt))+Math.imul(H,yt)|0,o=Math.imul(H,bt),n=n+Math.imul(z,wt)|0,i=(i=i+Math.imul(z,_t)|0)+Math.imul(q,wt)|0,o=o+Math.imul(q,_t)|0;var Dt=(c+(n=n+Math.imul(L,kt)|0)|0)+((8191&(i=(i=i+Math.imul(L,Bt)|0)+Math.imul(C,kt)|0))<<13)|0;c=((o=o+Math.imul(C,Bt)|0)+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,n=Math.imul(W,wt),i=(i=Math.imul(W,_t))+Math.imul(H,wt)|0,o=Math.imul(H,_t);var Ft=(c+(n=n+Math.imul(z,kt)|0)|0)+((8191&(i=(i=i+Math.imul(z,Bt)|0)+Math.imul(q,kt)|0))<<13)|0;c=((o=o+Math.imul(q,Bt)|0)+(i>>>13)|0)+(Ft>>>26)|0,Ft&=67108863;var Kt=(c+(n=Math.imul(W,kt))|0)+((8191&(i=(i=Math.imul(W,Bt))+Math.imul(H,kt)|0))<<13)|0;return c=((o=Math.imul(H,Bt))+(i>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,u[0]=St,u[1]=jt,u[2]=Ot,u[3]=Et,u[4]=At,u[5]=xt,u[6]=It,u[7]=Pt,u[8]=Nt,u[9]=Rt,u[10]=Tt,u[11]=Lt,u[12]=Ct,u[13]=Ut,u[14]=zt,u[15]=qt,u[16]=Dt,u[17]=Ft,u[18]=Kt,0!==c&&(u[19]=c,r.length++),r};function bigMulTo(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var h=o-c,l=(0|t.words[h])*(0|e.words[c]),d=67108863&l;a=67108863&(d=d+a|0),i+=(s=(s=s+(l/67108864|0)|0)+(d>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function jumboMulTo(t,e,r){return bigMulTo(t,e,r)}function FFTM(t,e){this.x=t,this.y=e}Math.imul||(a=smallMulTo),BN.prototype.mulTo=function mulTo(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?a(this,t,e):r<63?smallMulTo(this,t,e):r<1024?bigMulTo(this,t,e):jumboMulTo(this,t,e)},FFTM.prototype.makeRBT=function makeRBT(t){for(var e=new Array(t),r=BN.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},FFTM.prototype.revBin=function revBin(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},FFTM.prototype.permute=function permute(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},FFTM.prototype.transform=function transform(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=u,d=c,p=0;p<s;p++){var m=r[h+p],g=n[h+p],y=r[h+p+s],b=n[h+p+s],v=l*y-d*b;b=l*b+d*y,y=v,r[h+p]=m+y,n[h+p]=g+b,r[h+p+s]=m-y,n[h+p+s]=g-b,p!==a&&(v=u*l-c*d,d=u*d+c*l,l=v)}},FFTM.prototype.guessLen13b=function guessLen13b(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},FFTM.prototype.conjugate=function conjugate(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},FFTM.prototype.normalize13b=function normalize13b(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},FFTM.prototype.convert13b=function convert13b(t,e,r,n){for(var i=0,o=0;o<e;o++)i+=0|t[o],r[2*o]=8191&i,i>>>=13,r[2*o+1]=8191&i,i>>>=13;for(o=2*e;o<n;++o)r[o]=0;assert(0===i),assert(0==(-8192&i))},FFTM.prototype.stub=function stub(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},FFTM.prototype.mulp=function mulp(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),u=new Array(n),c=new Array(n),h=new Array(n),l=new Array(n),d=r.words;d.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,c,n),this.transform(s,o,a,u,n,i),this.transform(c,o,h,l,n,i);for(var p=0;p<n;p++){var m=a[p]*h[p]-u[p]*l[p];u[p]=a[p]*l[p]+u[p]*h[p],a[p]=m}return this.conjugate(a,u,n),this.transform(a,u,d,o,n,i),this.conjugate(d,o,n),this.normalize13b(d,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r._strip()},BN.prototype.mul=function mul(t){var e=new BN(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},BN.prototype.mulf=function mulf(t){var e=new BN(null);return e.words=new Array(this.length+t.length),jumboMulTo(this,t,e)},BN.prototype.imul=function imul(t){return this.clone().mulTo(t,this)},BN.prototype.imuln=function imuln(t){var e=t<0;e&&(t=-t),assert("number"==typeof t),assert(t<67108864);for(var r=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,o=(67108863&i)+(67108863&r);r>>=26,r+=i/67108864|0,r+=o>>>26,this.words[n]=67108863&o}return 0!==r&&(this.words[n]=r,this.length++),e?this.ineg():this},BN.prototype.muln=function muln(t){return this.clone().imuln(t)},BN.prototype.sqr=function sqr(){return this.mul(this)},BN.prototype.isqr=function isqr(){return this.imul(this.clone())},BN.prototype.pow=function pow(t){var e=function toBitArray(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}(t);if(0===e.length)return new BN(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},BN.prototype.iushln=function iushln(t){assert("number"==typeof t&&t>=0);var e,r=t%26,n=(t-r)/26,i=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(e=0;e<this.length;e++){var s=this.words[e]&i,a=(0|this.words[e])-s<<r;this.words[e]=a|o,o=s>>>26-r}o&&(this.words[e]=o,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this._strip()},BN.prototype.ishln=function ishln(t){return assert(0===this.negative),this.iushln(t)},BN.prototype.iushrn=function iushrn(t,e,r){var n;assert("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var i=t%26,o=Math.min((t-i)/26,this.length),s=67108863^67108863>>>i<<i,a=r;if(n-=o,n=Math.max(0,n),a){for(var u=0;u<o;u++)a.words[u]=this.words[u];a.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=n);u--){var h=0|this.words[u];this.words[u]=c<<26-i|h>>>i,c=h&s}return a&&0!==c&&(a.words[a.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},BN.prototype.ishrn=function ishrn(t,e,r){return assert(0===this.negative),this.iushrn(t,e,r)},BN.prototype.shln=function shln(t){return this.clone().ishln(t)},BN.prototype.ushln=function ushln(t){return this.clone().iushln(t)},BN.prototype.shrn=function shrn(t){return this.clone().ishrn(t)},BN.prototype.ushrn=function ushrn(t){return this.clone().iushrn(t)},BN.prototype.testn=function testn(t){assert("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,n=1<<e;return!(this.length<=r)&&!!(this.words[r]&n)},BN.prototype.imaskn=function imaskn(t){assert("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(assert(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this._strip()},BN.prototype.maskn=function maskn(t){return this.clone().imaskn(t)},BN.prototype.iaddn=function iaddn(t){return assert("number"==typeof t),assert(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},BN.prototype._iaddn=function _iaddn(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},BN.prototype.isubn=function isubn(t){if(assert("number"==typeof t),assert(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},BN.prototype.addn=function addn(t){return this.clone().iaddn(t)},BN.prototype.subn=function subn(t){return this.clone().isubn(t)},BN.prototype.iabs=function iabs(){return this.negative=0,this},BN.prototype.abs=function abs(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function _ishlnsubmul(t,e,r){var n,i,o=t.length+r;this._expand(o);var s=0;for(n=0;n<t.length;n++){i=(0|this.words[n+r])+s;var a=(0|t.words[n])*e;s=((i-=67108863&a)>>26)-(a/67108864|0),this.words[n+r]=67108863&i}for(;n<this.length-r;n++)s=(i=(0|this.words[n+r])+s)>>26,this.words[n+r]=67108863&i;if(0===s)return this._strip();for(assert(-1===s),s=0,n=0;n<this.length;n++)s=(i=-(0|this.words[n])+s)>>26,this.words[n]=67108863&i;return this.negative=1,this._strip()},BN.prototype._wordDiv=function _wordDiv(t,e){var r=(this.length,t.length),n=this.clone(),i=t,o=0|i.words[i.length-1];0!==(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var s,a=n.length-i.length;if("mod"!==e){(s=new BN(null)).length=a+1,s.words=new Array(s.length);for(var u=0;u<s.length;u++)s.words[u]=0}var c=n.clone()._ishlnsubmul(i,1,a);0===c.negative&&(n=c,s&&(s.words[a]=1));for(var h=a-1;h>=0;h--){var l=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(l=Math.min(l/o|0,67108863),n._ishlnsubmul(i,l,h);0!==n.negative;)l--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);s&&(s.words[h]=l)}return s&&s._strip(),n._strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},BN.prototype.divmod=function divmod(t,e,r){return assert(!t.isZero()),this.isZero()?{div:new BN(0),mod:new BN(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,e),"mod"!==e&&(n=o.div.neg()),"div"!==e&&(i=o.mod.neg(),r&&0!==i.negative&&i.iadd(t)),{div:n,mod:i}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),e),"mod"!==e&&(n=o.div.neg()),{div:n,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),e),"div"!==e&&(i=o.mod.neg(),r&&0!==i.negative&&i.isub(t)),{div:o.div,mod:i}):t.length>this.length||this.cmp(t)<0?{div:new BN(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new BN(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new BN(this.modrn(t.words[0]))}:this._wordDiv(t,e);var n,i,o},BN.prototype.div=function div(t){return this.divmod(t,"div",!1).div},BN.prototype.mod=function mod(t){return this.divmod(t,"mod",!1).mod},BN.prototype.umod=function umod(t){return this.divmod(t,"mod",!0).mod},BN.prototype.divRound=function divRound(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},BN.prototype.modrn=function modrn(t){var e=t<0;e&&(t=-t),assert(t<=67108863);for(var r=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(r*n+(0|this.words[i]))%t;return e?-n:n},BN.prototype.modn=function modn(t){return this.modrn(t)},BN.prototype.idivn=function idivn(t){var e=t<0;e&&(t=-t),assert(t<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*r;this.words[n]=i/t|0,r=i%t}return this._strip(),e?this.ineg():this},BN.prototype.divn=function divn(t){return this.clone().idivn(t)},BN.prototype.egcd=function egcd(t){assert(0===t.negative),assert(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new BN(1),i=new BN(0),o=new BN(0),s=new BN(1),a=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++a;for(var u=r.clone(),c=e.clone();!e.isZero();){for(var h=0,l=1;0==(e.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(e.iushrn(h);h-- >0;)(n.isOdd()||i.isOdd())&&(n.iadd(u),i.isub(c)),n.iushrn(1),i.iushrn(1);for(var d=0,p=1;0==(r.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(u),s.isub(c)),o.iushrn(1),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),n.isub(o),i.isub(s)):(r.isub(e),o.isub(n),s.isub(i))}return{a:o,b:s,gcd:r.iushln(a)}},BN.prototype._invmp=function _invmp(t){assert(0===t.negative),assert(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,i=new BN(1),o=new BN(0),s=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var a=0,u=1;0==(e.words[0]&u)&&a<26;++a,u<<=1);if(a>0)for(e.iushrn(a);a-- >0;)i.isOdd()&&i.iadd(s),i.iushrn(1);for(var c=0,h=1;0==(r.words[0]&h)&&c<26;++c,h<<=1);if(c>0)for(r.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(s),o.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(o)):(r.isub(e),o.isub(i))}return(n=0===e.cmpn(1)?i:o).cmpn(0)<0&&n.iadd(t),n},BN.prototype.gcd=function gcd(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},BN.prototype.invm=function invm(t){return this.egcd(t).a.umod(t)},BN.prototype.isEven=function isEven(){return 0==(1&this.words[0])},BN.prototype.isOdd=function isOdd(){return 1==(1&this.words[0])},BN.prototype.andln=function andln(t){return this.words[0]&t},BN.prototype.bincn=function bincn(t){assert("number"==typeof t);var e=t%26,r=(t-e)/26,n=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var i=n,o=r;0!==i&&o<this.length;o++){var s=0|this.words[o];i=(s+=i)>>>26,s&=67108863,this.words[o]=s}return 0!==i&&(this.words[o]=i,this.length++),this},BN.prototype.isZero=function isZero(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function cmpn(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),assert(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},BN.prototype.cmp=function cmp(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},BN.prototype.ucmp=function ucmp(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},BN.prototype.gtn=function gtn(t){return 1===this.cmpn(t)},BN.prototype.gt=function gt(t){return 1===this.cmp(t)},BN.prototype.gten=function gten(t){return this.cmpn(t)>=0},BN.prototype.gte=function gte(t){return this.cmp(t)>=0},BN.prototype.ltn=function ltn(t){return-1===this.cmpn(t)},BN.prototype.lt=function lt(t){return-1===this.cmp(t)},BN.prototype.lten=function lten(t){return this.cmpn(t)<=0},BN.prototype.lte=function lte(t){return this.cmp(t)<=0},BN.prototype.eqn=function eqn(t){return 0===this.cmpn(t)},BN.prototype.eq=function eq(t){return 0===this.cmp(t)},BN.red=function red(t){return new Red(t)},BN.prototype.toRed=function toRed(t){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},BN.prototype.fromRed=function fromRed(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function _forceRed(t){return this.red=t,this},BN.prototype.forceRed=function forceRed(t){return assert(!this.red,"Already a number in reduction context"),this._forceRed(t)},BN.prototype.redAdd=function redAdd(t){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},BN.prototype.redIAdd=function redIAdd(t){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},BN.prototype.redSub=function redSub(t){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},BN.prototype.redISub=function redISub(t){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},BN.prototype.redShl=function redShl(t){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},BN.prototype.redMul=function redMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},BN.prototype.redIMul=function redIMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},BN.prototype.redSqr=function redSqr(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function redISqr(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function redSqrt(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function redInvm(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function redNeg(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function redPow(t){return assert(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var u={k256:null,p224:null,p192:null,p25519:null};function MPrime(t,e){this.name=t,this.p=new BN(e,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(t){if("string"==typeof t){var e=BN._prime(t);this.m=e.p,this.prime=e}else assert(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function Mont(t){Red.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}MPrime.prototype._tmp=function _tmp(){var t=new BN(null);return t.words=new Array(Math.ceil(this.n/13)),t},MPrime.prototype.ireduce=function ireduce(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},MPrime.prototype.split=function split(t,e){t.iushrn(this.n,0,e)},MPrime.prototype.imulK=function imulK(t){return t.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function split(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},K256.prototype.imulK=function imulK(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function imulK(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},BN._prime=function prime(t){if(u[t])return u[t];var prime;if("k256"===t)prime=new K256;else if("p224"===t)prime=new P224;else if("p192"===t)prime=new P192;else{if("p25519"!==t)throw new Error("Unknown prime "+t);prime=new P25519}return u[t]=prime,prime},Red.prototype._verify1=function _verify1(t){assert(0===t.negative,"red works only with positives"),assert(t.red,"red works only with red numbers")},Red.prototype._verify2=function _verify2(t,e){assert(0==(t.negative|e.negative),"red works only with positives"),assert(t.red&&t.red===e.red,"red works only with red numbers")},Red.prototype.imod=function imod(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(move(t,t.umod(this.m)._forceRed(this)),t)},Red.prototype.neg=function neg(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},Red.prototype.add=function add(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},Red.prototype.iadd=function iadd(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},Red.prototype.sub=function sub(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},Red.prototype.isub=function isub(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},Red.prototype.shl=function shl(t,e){return this._verify1(t),this.imod(t.ushln(e))},Red.prototype.imul=function imul(t,e){return this._verify2(t,e),this.imod(t.imul(e))},Red.prototype.mul=function mul(t,e){return this._verify2(t,e),this.imod(t.mul(e))},Red.prototype.isqr=function isqr(t){return this.imul(t,t.clone())},Red.prototype.sqr=function sqr(t){return this.mul(t,t)},Red.prototype.sqrt=function sqrt(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(assert(e%2==1),3===e){var r=this.m.add(new BN(1)).iushrn(2);return this.pow(t,r)}for(var n=this.m.subn(1),i=0;!n.isZero()&&0===n.andln(1);)i++,n.iushrn(1);assert(!n.isZero());var o=new BN(1).toRed(this),s=o.redNeg(),a=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new BN(2*u*u).toRed(this);0!==this.pow(u,a).cmp(s);)u.redIAdd(s);for(var c=this.pow(u,n),h=this.pow(t,n.addn(1).iushrn(1)),l=this.pow(t,n),d=i;0!==l.cmp(o);){for(var p=l,m=0;0!==p.cmp(o);m++)p=p.redSqr();assert(m<d);var g=this.pow(c,new BN(1).iushln(d-m-1));h=h.redMul(g),c=g.redSqr(),l=l.redMul(c),d=m}return h},Red.prototype.invm=function invm(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},Red.prototype.pow=function pow(t,e){if(e.isZero())return new BN(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new BN(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],o=0,s=0,a=e.bitLength()%26;for(0===a&&(a=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],c=a-1;c>=0;c--){var h=u>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==o?(o<<=1,o|=h,(4===++s||0===n&&0===c)&&(i=this.mul(i,r[o]),s=0,o=0)):s=0}a=26}return i},Red.prototype.convertTo=function convertTo(t){var e=t.umod(this.m);return e===t?e.clone():e},Red.prototype.convertFrom=function convertFrom(t){var e=t.clone();return e.red=null,e},BN.mont=function mont(t){return new Mont(t)},inherits(Mont,Red),Mont.prototype.convertTo=function convertTo(t){return this.imod(t.ushln(this.shift))},Mont.prototype.convertFrom=function convertFrom(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},Mont.prototype.imul=function imul(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},Mont.prototype.mul=function mul(t,e){if(t.isZero()||e.isZero())return new BN(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},Mont.prototype.invm=function invm(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(73)(t))},1580:function(t,e,r){"use strict";function inRange(t,e,r){return e<=t&&t<=r}function ToDictionary(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}r.r(e),r.d(e,"TextEncoder",(function(){return TextEncoder})),r.d(e,"TextDecoder",(function(){return TextDecoder}));function Stream(t){this.tokens=[].slice.call(t)}Stream.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};function decoderError(t,e){if(t)throw TypeError("Decoder error");return e||65533}function TextDecoder(t,e){if(!(this instanceof TextDecoder))return new TextDecoder(t,e);if("utf-8"!==(t=void 0!==t?String(t).toLowerCase():"utf-8"))throw new Error("Encoding not supported. Only utf-8 is supported");e=ToDictionary(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e.fatal),this._ignoreBOM=Boolean(e.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function TextEncoder(t,e){if(!(this instanceof TextEncoder))return new TextEncoder(t,e);if("utf-8"!==(t=void 0!==t?String(t).toLowerCase():"utf-8"))throw new Error("Encoding not supported. Only utf-8 is supported");e=ToDictionary(e),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function UTF8Decoder(t){var e=t.fatal,r=0,n=0,i=0,o=128,s=191;this.handler=function(t,a){if(-1===a&&0!==i)return i=0,decoderError(e);if(-1===a)return-1;if(0===i){if(inRange(a,0,127))return a;if(inRange(a,194,223))i=1,r=a-192;else if(inRange(a,224,239))224===a&&(o=160),237===a&&(s=159),i=2,r=a-224;else{if(!inRange(a,240,244))return decoderError(e);240===a&&(o=144),244===a&&(s=143),i=3,r=a-240}return r<<=6*i,null}if(!inRange(a,o,s))return r=i=n=0,o=128,s=191,t.prepend(a),decoderError(e);if(o=128,s=191,r+=a-128<<6*(i-(n+=1)),n!==i)return null;var u=r;return r=i=n=0,u}}function UTF8Encoder(t){t.fatal;this.handler=function(t,e){if(-1===e)return-1;if(inRange(e,0,127))return e;var r,n;inRange(e,128,2047)?(r=1,n=192):inRange(e,2048,65535)?(r=2,n=224):inRange(e,65536,1114111)&&(r=3,n=240);for(var i=[(e>>6*r)+n];r>0;){var o=e>>6*(r-1);i.push(128|63&o),r-=1}return i}}TextDecoder.prototype={decode:function decode(t,e){var r;r="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=ToDictionary(e),this._streaming||(this._decoder=new UTF8Decoder({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var n,i=new Stream(r),o=[];!i.endOfStream()&&-1!==(n=this._decoder.handler(i,i.read()));)null!==n&&(Array.isArray(n)?o.push.apply(o,n):o.push(n));if(!this._streaming){do{if(-1===(n=this._decoder.handler(i,i.read())))break;null!==n&&(Array.isArray(n)?o.push.apply(o,n):o.push(n))}while(!i.endOfStream());this._decoder=null}return o.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===o[0]?(this._BOMseen=!0,o.shift()):this._BOMseen=!0)),function codePointsToString(t){for(var e="",r=0;r<t.length;++r){var n=t[r];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return e}(o)}},TextEncoder.prototype={encode:function encode(t,e){t=t?String(t):"",e=ToDictionary(e),this._streaming||(this._encoder=new UTF8Encoder(this._options)),this._streaming=Boolean(e.stream);for(var r,n=[],i=new Stream(function stringToCodePoints(t){for(var e=String(t),r=e.length,n=0,i=[];n<r;){var o=e.charCodeAt(n);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(n===r-1)i.push(65533);else{var s=t.charCodeAt(n+1);if(56320<=s&&s<=57343){var a=1023&o,u=1023&s;i.push(65536+(a<<10)+u),n+=1}else i.push(65533)}n+=1}return i}(t));!i.endOfStream()&&-1!==(r=this._encoder.handler(i,i.read()));)Array.isArray(r)?n.push.apply(n,r):n.push(r);if(!this._streaming){for(;-1!==(r=this._encoder.handler(i,i.read()));)Array.isArray(r)?n.push.apply(n,r):n.push(r);this._encoder=null}return new Uint8Array(n)}}},1581:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.toBigIntLE=function toBigIntLE(e){{const r=t.from(e);r.reverse();const n=r.toString("hex");return 0===n.length?BigInt(0):BigInt("0x"+n)}},e.toBigIntBE=function toBigIntBE(t){{const e=t.toString("hex");return 0===e.length?BigInt(0):BigInt("0x"+e)}},e.toBufferLE=function toBufferLE(e,r){{const n=e.toString(16),i=t.from(n.padStart(2*r,"0").slice(0,2*r),"hex");return i.reverse(),i}},e.toBufferBE=function toBufferBE(e,r){{const n=e.toString(16);return t.from(n.padStart(2*r,"0").slice(0,2*r),"hex")}}}).call(this,r(15).Buffer)},1582:function(t,e,r){"use strict";var n=r(1454);Object.defineProperty(e,"__esModule",{value:!0}),e.Client=void 0;var i=n(r(1455)),o=n(r(1456)),s=n(r(1457)),a=n(r(1458)),u=n(r(1460)),c=n(r(1585));function _createSuper(t){var e=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,n=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,a.default)(this,r)}}var h=function(t){(0,s.default)(Client,t);var e=_createSuper(Client);function Client(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8080",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.autoconnect,i=void 0===n||n,s=r.reconnect,a=void 0===s||s,u=r.reconnect_interval,h=void 0===u?1e3:u,l=r.max_reconnects,d=void 0===l?5:l,p=arguments.length>2?arguments[2]:void 0;return(0,o.default)(this,Client),e.call(this,c.default,t,{autoconnect:i,reconnect:a,reconnect_interval:h,max_reconnects:d},p)}return(0,i.default)(Client)}(n(r(1586)).default);e.Client=h},1583:function(t,e){function _setPrototypeOf(e,r){return t.exports=_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,_setPrototypeOf(e,r)}t.exports=_setPrototypeOf,t.exports.__esModule=!0,t.exports.default=t.exports},1584:function(t,e){t.exports=function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},1585:function(t,e,r){"use strict";var n=r(1454);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function _default(t,e){return new c(t,e)};var i=n(r(1456)),o=n(r(1455)),s=n(r(1457)),a=n(r(1458)),u=n(r(1460));function _createSuper(t){var e=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,n=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,a.default)(this,r)}}var c=function(t){(0,s.default)(WebSocketBrowserImpl,t);var e=_createSuper(WebSocketBrowserImpl);function WebSocketBrowserImpl(t,r,n){var o;return(0,i.default)(this,WebSocketBrowserImpl),(o=e.call(this)).socket=new window.WebSocket(t,n),o.socket.onopen=function(){return o.emit("open")},o.socket.onmessage=function(t){return o.emit("message",t.data)},o.socket.onerror=function(t){return o.emit("error",t)},o.socket.onclose=function(t){o.emit("close",t.code,t.reason)},o}return(0,o.default)(WebSocketBrowserImpl,[{key:"send",value:function send(t,e,r){var n=r||e;try{this.socket.send(t),n()}catch(t){n(t)}}},{key:"close",value:function close(t,e){this.socket.close(t,e)}},{key:"addEventListener",value:function addEventListener(t,e,r){this.socket.addEventListener(t,e,r)}}]),WebSocketBrowserImpl}(r(1492).EventEmitter)},1586:function(t,e,r){"use strict";(function(t){var n=r(1454);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(r(1587)),o=n(r(1589)),s=n(r(1459)),a=n(r(1456)),u=n(r(1455)),c=n(r(1457)),h=n(r(1458)),l=n(r(1460)),d=r(1492);function _createSuper(t){var e=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,n=(0,l.default)(t);if(e){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,h.default)(this,r)}}var __rest=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},p=function(e){(0,c.default)(CommonClient,e);var r,n,h,l,d=_createSuper(CommonClient);function CommonClient(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ws://localhost:8080",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;(0,a.default)(this,CommonClient);var o=n.autoconnect,s=void 0===o||o,u=n.reconnect,c=void 0===u||u,h=n.reconnect_interval,l=void 0===h?1e3:h,p=n.max_reconnects,m=void 0===p?5:p,g=__rest(n,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return(e=d.call(this)).webSocketFactory=t,e.queue={},e.rpc_id=0,e.address=r,e.autoconnect=s,e.ready=!1,e.reconnect=c,e.reconnect_interval=l,e.max_reconnects=m,e.rest_options=g,e.current_reconnects=0,e.generate_request_id=i||function(){return++e.rpc_id},e.autoconnect&&e._connect(e.address,Object.assign({autoconnect:e.autoconnect,reconnect:e.reconnect,reconnect_interval:e.reconnect_interval,max_reconnects:e.max_reconnects},e.rest_options)),e}return(0,u.default)(CommonClient,[{key:"connect",value:function connect(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function call(t,e,r,n){var i=this;return n||"object"!==(0,s.default)(r)||(n=r,r=null),new Promise((function(o,s){if(!i.ready)return s(new Error("socket not ready"));var a=i.generate_request_id(t,e),u={jsonrpc:"2.0",method:t,params:e||null,id:a};i.socket.send(JSON.stringify(u),n,(function(t){if(t)return s(t);i.queue[a]={promise:[o,s]},r&&(i.queue[a].timeout=setTimeout((function(){delete i.queue[a],s(new Error("reply timeout"))}),r))}))}))}},{key:"login",value:(l=(0,o.default)(i.default.mark((function _callee(t){var e;return i.default.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.call("rpc.login",t);case 2:if(e=r.sent){r.next=5;break}throw new Error("authentication failed");case 5:return r.abrupt("return",e);case 6:case"end":return r.stop()}}),_callee,this)}))),function login(t){return l.apply(this,arguments)})},{key:"listMethods",value:(h=(0,o.default)(i.default.mark((function _callee2(){return i.default.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call("__listMethods");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),_callee2,this)}))),function listMethods(){return h.apply(this,arguments)})},{key:"notify",value:function notify(t,e){var r=this;return new Promise((function(n,i){if(!r.ready)return i(new Error("socket not ready"));var o={jsonrpc:"2.0",method:t,params:e||null};r.socket.send(JSON.stringify(o),(function(t){if(t)return i(t);n()}))}))}},{key:"subscribe",value:(n=(0,o.default)(i.default.mark((function _callee3(t){var e;return i.default.wrap((function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:return"string"==typeof t&&(t=[t]),r.next=3,this.call("rpc.on",t);case 3:if(e=r.sent,"string"!=typeof t||"ok"===e[t]){r.next=6;break}throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);case 6:return r.abrupt("return",e);case 7:case"end":return r.stop()}}),_callee3,this)}))),function subscribe(t){return n.apply(this,arguments)})},{key:"unsubscribe",value:(r=(0,o.default)(i.default.mark((function _callee4(t){var e;return i.default.wrap((function _callee4$(r){for(;;)switch(r.prev=r.next){case 0:return"string"==typeof t&&(t=[t]),r.next=3,this.call("rpc.off",t);case 3:if(e=r.sent,"string"!=typeof t||"ok"===e[t]){r.next=6;break}throw new Error("Failed unsubscribing from an event with: "+e);case 6:return r.abrupt("return",e);case 7:case"end":return r.stop()}}),_callee4,this)}))),function unsubscribe(t){return r.apply(this,arguments)})},{key:"close",value:function close(t,e){this.socket.close(t||1e3,e)}},{key:"_connect",value:function _connect(e,r){var n=this;this.socket=this.webSocketFactory(e,r),this.socket.addEventListener("open",(function(){n.ready=!0,n.emit("open"),n.current_reconnects=0})),this.socket.addEventListener("message",(function(e){var r=e.data;r instanceof ArrayBuffer&&(r=t.from(r).toString());try{r=JSON.parse(r)}catch(t){return}if(r.notification&&n.listeners(r.notification).length){if(!Object.keys(r.params).length)return n.emit(r.notification);var i=[r.notification];if(r.params.constructor===Object)i.push(r.params);else for(var o=0;o<r.params.length;o++)i.push(r.params[o]);return Promise.resolve().then((function(){n.emit.apply(n,i)}))}if(!n.queue[r.id])return r.method&&r.params?Promise.resolve().then((function(){n.emit(r.method,r.params)})):void 0;"error"in r=="result"in r&&n.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),n.queue[r.id].timeout&&clearTimeout(n.queue[r.id].timeout),r.error?n.queue[r.id].promise[1](r.error):n.queue[r.id].promise[0](r.result),delete n.queue[r.id]})),this.socket.addEventListener("error",(function(t){return n.emit("error",t)})),this.socket.addEventListener("close",(function(t){var i=t.code,o=t.reason;n.ready&&setTimeout((function(){return n.emit("close",i,o)}),0),n.ready=!1,n.socket=void 0,1e3!==i&&(n.current_reconnects++,n.reconnect&&(n.max_reconnects>n.current_reconnects||0===n.max_reconnects)&&setTimeout((function(){return n._connect(e,r)}),n.reconnect_interval))}))}}]),CommonClient}(d.EventEmitter);e.default=p}).call(this,r(15).Buffer)},1587:function(t,e,r){t.exports=r(1588)()},1588:function(t,e,r){var n=r(1459).default;function _regeneratorRuntime(){"use strict";
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=_regeneratorRuntime=function _regeneratorRuntime(){return e},t.exports.__esModule=!0,t.exports.default=t.exports;var e={},r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,o=Object.create(i.prototype),s=new Context(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return doneResult()}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var a=maybeInvokeDelegate(s,r);if(a){if(a===c)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=tryCatch(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,s),o}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,s,(function(){return this}));var l=Object.getPrototypeOf,d=l&&l(l(values([])));d&&d!==r&&i.call(d,s)&&(h=d);var p=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){var r;this._invoke=function(o,s){function callInvokeWithMethodAndArg(){return new e((function(r,a){!function invoke(r,o,s,a){var u=tryCatch(t[r],t,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==n(h)&&i.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,s,a)}),(function(t){invoke("throw",t,s,a)})):e.resolve(h).then((function(t){c.value=t,s(c)}),(function(t){return invoke("throw",t,s,a)}))}a(u.arg)}(o,s,r,a)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,maybeInvokeDelegate(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=tryCatch(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function next(){for(;++r<t.length;)if(i.call(t,r))return next.value=t[r],next.done=!1,next;return next.value=void 0,next.done=!0,next};return n.next=n}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(p,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(p),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,a,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var s=new AsyncIterator(wrap(t,r,n,i),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},defineIteratorMethods(p),define(p,u,"Generator"),define(p,s,(function(){return this})),define(p,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function next(){for(;e.length;){var r=e.pop();if(r in t)return next.value=r,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var e=this;function handle(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r],o=n.completion;if("root"===n.tryLoc)return handle("end");if(n.tryLoc<=this.prev){var s=i.call(n,"catchLoc"),a=i.call(n,"finallyLoc");if(s&&a){if(this.prev<n.catchLoc)return handle(n.catchLoc,!0);if(this.prev<n.finallyLoc)return handle(n.finallyLoc)}else if(s){if(this.prev<n.catchLoc)return handle(n.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return handle(n.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(s)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),c}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;resetTryEntry(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,e,r){return this.delegate={iterator:values(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},e}t.exports=_regeneratorRuntime,t.exports.__esModule=!0,t.exports.default=t.exports},1589:function(t,e){function asyncGeneratorStep(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,i)}t.exports=function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function _next(t){asyncGeneratorStep(o,n,i,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(o,n,i,_next,_throw,"throw",t)}_next(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},1590:function(t,e,r){"use strict";const n=r(1512).v4,i=r(1591),ClientBrowser=function(t,e){if(!(this instanceof ClientBrowser))return new ClientBrowser(t,e);e||(e={}),this.options={reviver:void 0!==e.reviver?e.reviver:null,replacer:void 0!==e.replacer?e.replacer:null,generator:void 0!==e.generator?e.generator:function(){return n()},version:void 0!==e.version?e.version:2,notificationIdNull:"boolean"==typeof e.notificationIdNull&&e.notificationIdNull},this.callServer=t};t.exports=ClientBrowser,ClientBrowser.prototype.request=function(t,e,r,n){const o=this;let s=null;const a=Array.isArray(t)&&"function"==typeof e;if(1===this.options.version&&a)throw new TypeError("JSON-RPC 1.0 does not support batching");if(a||!a&&t&&"object"==typeof t&&"function"==typeof e)n=e,s=t;else{"function"==typeof r&&(n=r,r=void 0);const o="function"==typeof n;try{s=i(t,e,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(t){if(o)return n(t);throw t}if(!o)return s}let u;try{u=JSON.stringify(s,this.options.replacer)}catch(t){return n(t)}return this.callServer(u,(function(t,e){o._parseResponse(t,e,n)})),s},ClientBrowser.prototype._parseResponse=function(t,e,r){if(t)return void r(t);if(!e)return r();let n;try{n=JSON.parse(e,this.options.reviver)}catch(t){return r(t)}if(3===r.length){if(Array.isArray(n)){const isError=function(t){return void 0!==t.error},isNotError=function(t){return!isError(t)};return r(null,n.filter(isError),n.filter(isNotError))}return r(null,n.error,n.result)}r(null,n)}},1591:function(t,e,r){"use strict";const n=r(1512).v4;t.exports=function(t,e,r,i){if("string"!=typeof t)throw new TypeError(t+" must be a string");const o="number"==typeof(i=i||{}).version?i.version:2;if(1!==o&&2!==o)throw new TypeError(o+" must be 1 or 2");const s={method:t};if(2===o&&(s.jsonrpc="2.0"),e){if("object"!=typeof e&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");s.params=e}if(void 0===r){const t="function"==typeof i.generator?i.generator:function(){return n()};s.id=t(s,i)}else 2===o&&null===r?i.notificationIdNull&&(s.id=null):s.id=r;return s}},1592:function(t,e,r){"use strict";r.d(e,"a",(function(){return any})),r.d(e,"b",(function(){return array})),r.d(e,"c",(function(){return assert})),r.d(e,"d",(function(){return boolean})),r.d(e,"e",(function(){return coerce})),r.d(e,"f",(function(){return create})),r.d(e,"g",(function(){return instance})),r.d(e,"h",(function(){return literal})),r.d(e,"i",(function(){return nullable})),r.d(e,"j",(function(){return number})),r.d(e,"k",(function(){return optional})),r.d(e,"l",(function(){return record})),r.d(e,"m",(function(){return string})),r.d(e,"n",(function(){return tuple})),r.d(e,"o",(function(){return type})),r.d(e,"p",(function(){return union})),r.d(e,"q",(function(){return unknown}));class StructError extends TypeError{constructor(t,e){let r;const{message:n,...i}=t,{path:o}=t;super(0===o.length?n:"At path: "+o.join(".")+" -- "+n),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var n;return null!=(n=r)?n:r=[t,...e()]}}}function isObject(t){return"object"==typeof t&&null!=t}function print(t){return"string"==typeof t?JSON.stringify(t):""+t}function toFailure(t,e,r,n){if(!0===t)return;!1===t?t={}:"string"==typeof t&&(t={message:t});const{path:i,branch:o}=e,{type:s}=r,{refinement:a,message:u="Expected a value of type `"+s+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+print(n)+"`"}=t;return{value:n,type:s,refinement:a,key:i[i.length-1],path:i,branch:o,...t,message:u}}function*toFailures(t,e,r,n){(function isIterable(t){return isObject(t)&&"function"==typeof t[Symbol.iterator]})(t)||(t=[t]);for(const i of t){const t=toFailure(i,e,r,n);t&&(yield t)}}function*run(t,e,r={}){const{path:n=[],branch:i=[t],coerce:o=!1,mask:s=!1}=r,a={path:n,branch:i};if(o&&(t=e.coercer(t,a),s&&"type"!==e.type&&isObject(e.schema)&&isObject(t)&&!Array.isArray(t)))for(const r in t)void 0===e.schema[r]&&delete t[r];let u=!0;for(const r of e.validator(t,a))u=!1,yield[r,void 0];for(let[r,c,h]of e.entries(t,a)){const e=run(c,h,{path:void 0===r?n:[...n,r],branch:void 0===r?i:[...i,c],coerce:o,mask:s});for(const n of e)n[0]?(u=!1,yield[n[0],void 0]):o&&(c=n[1],void 0===r?t=c:t instanceof Map?t.set(r,c):t instanceof Set?t.add(c):isObject(t)&&(t[r]=c))}if(u)for(const r of e.refiner(t,a))u=!1,yield[r,void 0];u&&(yield[void 0,t])}class Struct{constructor(t){const{type:e,schema:r,validator:n,refiner:i,coercer:o=(t=>t),entries:s=function*(){}}=t;this.type=e,this.schema=r,this.entries=s,this.coercer=o,this.validator=n?(t,e)=>toFailures(n(t,e),e,this,t):()=>[],this.refiner=i?(t,e)=>toFailures(i(t,e),e,this,t):()=>[]}assert(t){return assert(t,this)}create(t){return create(t,this)}is(t){return is(t,this)}mask(t){return function mask(t,e){const r=validate(t,e,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}(t,this)}validate(t,e={}){return validate(t,this,e)}}function assert(t,e){const r=validate(t,e);if(r[0])throw r[0]}function create(t,e){const r=validate(t,e,{coerce:!0});if(r[0])throw r[0];return r[1]}function is(t,e){return!validate(t,e)[0]}function validate(t,e,r={}){const n=run(t,e,r),i=function shiftIterator(t){const{done:e,value:r}=t.next();return e?void 0:r}(n);if(i[0]){return[new StructError(i[0],(function*(){for(const t of n)t[0]&&(yield t[0])})),void 0]}return[void 0,i[1]]}function define(t,e){return new Struct({type:t,schema:null,validator:e})}function any(){return define("any",()=>!0)}function array(t){return new Struct({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer:t=>Array.isArray(t)?t.slice():t,validator:t=>Array.isArray(t)||"Expected an array value, but received: "+print(t)})}function boolean(){return define("boolean",t=>"boolean"==typeof t)}function instance(t){return define("instance",e=>e instanceof t||"Expected a `"+t.name+"` instance, but received: "+print(e))}function literal(t){const e=print(t),r=typeof t;return new Struct({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?t:null,validator:r=>r===t||"Expected the literal `"+e+"`, but received: "+print(r)})}function never(){return define("never",()=>!1)}function nullable(t){return new Struct({...t,validator:(e,r)=>null===e||t.validator(e,r),refiner:(e,r)=>null===e||t.refiner(e,r)})}function number(){return define("number",t=>"number"==typeof t&&!isNaN(t)||"Expected a number, but received: "+print(t))}function optional(t){return new Struct({...t,validator:(e,r)=>void 0===e||t.validator(e,r),refiner:(e,r)=>void 0===e||t.refiner(e,r)})}function record(t,e){return new Struct({type:"record",schema:null,*entries(r){if(isObject(r))for(const n in r){const i=r[n];yield[n,n,t],yield[n,i,e]}},validator:t=>isObject(t)||"Expected an object, but received: "+print(t)})}function string(){return define("string",t=>"string"==typeof t||"Expected a string, but received: "+print(t))}function tuple(t){const e=never();return new Struct({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(t.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],t[i]||e]}},validator:t=>Array.isArray(t)||"Expected an array, but received: "+print(t)})}function type(t){const e=Object.keys(t);return new Struct({type:"type",schema:t,*entries(r){if(isObject(r))for(const n of e)yield[n,r[n],t[n]]},validator:t=>isObject(t)||"Expected an object, but received: "+print(t)})}function union(t){const e=t.map(t=>t.type).join(" | ");return new Struct({type:"union",schema:null,validator(r,n){const i=[];for(const e of t){const[...t]=run(r,e,n),[o]=t;if(!o[0])return[];for(const[e]of t)e&&i.push(e)}return["Expected the value to satisfy a union of `"+e+"`, but received: "+print(r),...i]}})}function unknown(){return define("unknown",()=>!0)}function coerce(t,e,r){return new Struct({...t,coercer:(n,i)=>is(n,e)?t.coercer(r(n,i),i):t.coercer(n,i)})}}}]);